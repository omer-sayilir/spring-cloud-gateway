(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[38],{1513:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(19),r=(a(92),a(2)),i=(a(82),a(3)),o=a(5),c=a(12),m=a(333),d=a(74),h=a(38),p=a.n(h),u=a(61),b=a(8),g=a.n(b),y=a(16),E=a(63),f=a(54),D=a.n(f),v=a(9),N=a.n(v),S=a(6),x=a.n(S),T=a(13),C=a.n(T);class w extends s.Component{constructor(e){super(e),this.downloadDocuments=e=>{this.downloadActivityReport(e)},this.arrangeDataSet=e=>{let t={},a=[];return a.push(e.id),t.sheetName="\xc7al\u0131\u015fan_\u0130\u015flem_Kayd\u0131_"+e.tckn,t.uuid=Object(i.h)(),t.type="zip",t.startDate=this.state.startDate,t.endDate=this.state.endDate,t.employeeIdList=a,t},this.downloadActivityReport=e=>{let t=this,a=t.arrangeDataSet(e);if(N()(t.state.startDate).isValid()&&N()(t.state.endDate).isValid()&&N()(t.state.startDate).startOf("day").isBefore(N()(t.state.endDate).startOf("day"))){let e={url:"/approval/downloadEmployeeActivityDocument",method:"post",data:a};t.setState({openModal:!1}),Object(o.e)(e).then((function(){x.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3})})).catch((function(e){Object(i.v)(e)}))}else x.a.warning("Ba\u015flang\u0131\xe7 ve biti\u015f tarihleri doldurulmal\u0131d\u0131r. Se\xe7ilen ba\u015flang\u0131\xe7 tarihi biti\u015f tarihinden en az 1 (bir) g\xfcn \xf6nce olmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:15e3})},this.showModal=()=>l.a.createElement(C.a,{showCancel:!0,style:{width:"578px",height:"500px"},title:"\xc7al\u0131\u015fan \u0130\u015flem Kayd\u0131",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",confirmBtnText:"Kay\u0131t Belgesi \u0130ndir",disabled:""===this.state.startDate||""===this.state.endDate,cancelBtnText:"Kapat",onCancel:()=>this.setState({openModal:!1,startDate:"",endDate:"",row:""}),onConfirm:()=>this.downloadDocuments(this.state.row)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("span",{style:{fontSize:"small",margin:"-10px 10px 0 10px"}},"Se\xe7ili \xe7al\u0131\u015fan\u0131n se\xe7ilecek zaman aral\u0131\u011f\u0131ndaki T\xfcbitak Zaman Damgas\u0131 ile m\xfch\xfcrlenmi\u015f t\xfcm i\u015flem ge\xe7mi\u015finin kay\u0131t belgesini indirebilirsiniz.")),l.a.createElement("div",{className:"col-sm-12",style:{margin:"1em 0 1em 0"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("span",{style:{fontWeight:"bold"}},"Ba\u015flang\u0131\xe7 Tarihi *")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(D.a,{locale:"tr",className:"datepicker",style:{fontSize:"12px"},input:!0,inputProps:{id:"startDate"},closeOnSelect:!0,value:N()(this.state.startDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.startOf("day").isBefore(D.a.moment().startOf("day"))},onChange:e=>{this.setState({startDate:N()(e).format("YYYY-MM-DD")})}})))),l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("span",{style:{fontWeight:"bold"}},"Biti\u015f Tarihi *")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(D.a,{locale:"tr",className:"datepicker",input:!0,inputProps:{id:"startDate"},closeOnSelect:!0,value:N()(this.state.endDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.startOf("day").isBefore(D.a.moment().startOf("day"))},onChange:e=>{this.setState({endDate:N()(e).format("YYYY-MM-DD")})}}))))))),this.state={selection:[],selectedAll:!1,content:[],total:0,page:0,size:10,loading:!1,manual:!1,searching:!1,searchQuery:void 0,startDate:"",endDate:"",openModal:!1,row:""},this.fetchData=this.fetchData.bind(this),this.handleSearch=this.handleSearch.bind(this)}componentDidMount(){this.setState({jobTitlesData:Object(c.y)()})}fetchData(e,t,a,s){let l=this,n=void 0!==e?"&sort="+e+","+t:"&sort=id,desc",r=l.state.searchQuery?"&"+l.state.searchQuery:"",c={url:"/employee/readEmployeeAll?page="+a+"&size="+s+r+n+"&customFields=",method:"get"};l.setState({loading:!0,searching:!0,manual:!0!==l.manual&&l.manual}),Object(o.e)(c).then((function(e){l.setState({page:a,size:s,total:e.data&&e.data.page?e.data.page.totalElements:0,content:e.data&&e.data.page?e.data.page.content:[],totalIdList:e.data?e.data.selectedIdList:[],loading:!1,searching:!1})})).catch((function(e){l.setState({loading:!1,searching:!1}),Object(i.v)(e)}))}handleSearch(e){this.setState({searchQuery:e,searching:!0,selection:[]},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}toggleCheckboxChange(e,t,a){let s=this,l=e.target.checked,n=s.state.content,r=s.state.selection;if("all"===t){let e=[];l&&n.forEach(t=>{e.push(t[a])}),s.setState({selection:e,selectedAll:l})}else{let e=r.indexOf(t[a]);e>=0?r=[...r.slice(0,e),...r.slice(e+1)]:r.push(t[a]),s.setState({selection:r,selectedAll:r.length>0&&r.length===s.state.content.length})}}isSelected(e){return-1!==this.state.selection.indexOf(e)}renderMainTable(){let e=[];this.state.content&&this.state.content instanceof Array&&this.state.content.map(t=>{e.push(t.id)});let t=[{Header:"Ad",accessor:"name",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(y.a,{text:e.name,maxLength:12}))},{Header:"Soyad",accessor:"surname",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(y.a,{text:e.surname,maxLength:12}))},{Header:"TCKN",accessor:"tckn"},{Header:"Departman",accessor:"department",Cell:e=>l.a.createElement("div",{style:{margin:0}},e.department&&l.a.createElement(y.a,{text:e.department.name,maxLength:12}))},{Header:"G\xf6rev",accessor:"jobTitle",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(y.a,{text:e.jobTitle,maxLength:12}))},{Header:"Durum",accessor:"statusType",Cell:e=>l.a.createElement("div",null,l.a.createElement("span",null,Object(c.R)().map((function(t){if(t.value===e.statusType)return t.label}))))},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:e=>l.a.createElement("div",{style:{textAlign:"left",display:"flex"}},l.a.createElement(E.a,{title:"Kay\u0131t Belgesi \u0130ndir",faIcon:"fa-download",onClick:()=>this.setState({openModal:!0,row:e}),color:"info"})),width:"auto"}];return l.a.createElement(n.a,{columns:t,content:this.state.content,loading:this.state.loading,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.total,page:this.state.page,size:this.state.size,manual:this.state.manual,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchData})}render(){const e=[{label:"\u0130sim",accessor:"name",type:"text",operator:"="},{label:"Soyisim",accessor:"surname",type:"text",operator:"="},{label:"TCKN",accessor:"tckn",type:"numericText",operator:"="},{label:"Durum",accessor:"statusType",type:"select",operator:"=",selectData:Object(c.R)()},{label:"Cinsiyet",accessor:"gender",type:"select",operator:"=",selectData:Object(c.v)()},{label:"Departman",accessor:"department_name",type:"select",operator:"=",selectData:Object(c.k)(this.state.departmentList)},{label:"G\xf6rev",accessor:"jobTitle",type:"select",operator:"=",selectData:this.state.jobTitlesData},{label:"Pasif Durum Gerek\xe7e",accessor:"reason",type:"select",operator:"=",selectData:Object(c.Q)()},{label:"Pasif Durum Biti\u015f Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_passiveEndDate",type:"datetime",operator:">="},{label:"Pasif Durum Biti\u015f Tarihi (Biti\u015f)",accessor:"max_passiveEndDate",type:"datetime",operator:"<="},{label:"\u0130\u015fe Ba\u015flama Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_employmentStartDate",type:"date",operator:">="},{label:"\u0130\u015fe Ba\u015flama Tarihi (Biti\u015f)",accessor:"max_employmentStartDate",type:"date",operator:"<="},{label:"\xc7al\u0131\u015fma \u015eekli",accessor:"employmentStatus",type:"text",operator:"="},{label:"Do\u011fum Yeri",accessor:"cityOfBirth",type:"text",operator:"="},{label:"Do\u011fum Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_dateOfBirth",type:"date",operator:">="},{label:"Do\u011fum Tarihi (Biti\u015f)",accessor:"max_dateOfBirth",type:"date",operator:"<="},{label:"Y\u0131ll\u0131k \u0130zin (En D\xfc\u015f\xfck)",accessor:"min_remainingAnnualVacation",type:"numericText",operator:">="},{label:"Y\u0131ll\u0131k \u0130zin (En Y\xfcksek)",accessor:"max_remainingAnnualVacation",type:"numericText",operator:"<="},{label:"Mazeret \u0130zni (En D\xfc\u015f\xfck)",accessor:"min_remainingExcuseVacation",type:"numericText",operator:">="},{label:"Mazeret \u0130zni (En Y\xfcksek)",accessor:"max_remainingExcuseVacation",type:"numericText",operator:"<="},{label:"E\u011fitim Durumu",accessor:"educationLevel",type:"text",operator:"="},{label:"Askerlik Durumu",accessor:"militaryStatus",type:"text",operator:"="},{label:"Adres",accessor:"address",type:"text",operator:"="},{label:"KEP Adresi",accessor:"kepAddress",type:"text",operator:"="},{label:"e-Posta Adresi",accessor:"email",type:"text",operator:"="},{label:"Telefon Numaras\u0131",accessor:"telephone",type:"text",operator:"="},{label:"Entegrasyon Kodu",accessor:"integrationCode",type:"text",operator:"="}];this.state.titleFilterList&&this.state.titleFilterList.map(t=>{let a="cstmfld"+t;a=a.toString().split(" ").join(""),a=a.toString().toLowerCase(),e.push({label:t,accessor:a,type:"text",operator:"="})});let t=Object(c.I)(this,e,"accessor",this.state.isKepOwner);return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"card-body"}),l.a.createElement("div",{className:"card-body"},l.a.createElement(u.a,{fields:t,loading:this.state.searching,onSearch:this.handleSearch})),l.a.createElement("div",{className:"card-body"},this.renderMainTable()),this.state.openModal&&this.showModal(),this.state.alert)}}var k=w,B=a(4),O=a(21);class M extends s.Component{constructor(e){super(e),this.sendCode=()=>{let e=this;if(e.state.timeStamp&&e.state.hashCode){let t={url:"/signer/verifyTimeStamp",method:"post",data:[e.state.timeStamp,e.state.hashCode]};Object(o.e)(t).then((function(t){let a=t.data;"object"===typeof a?e.setState({checkResult:a}):"string"===typeof a&&e.setState({errorMessage:a})})).catch((function(e){Object(i.v)(e)}))}else x.a.error("Zaman Damgas\u0131 ve Hash Kodu alanlar\u0131n\u0131n doldurulmas\u0131 zorunludur.",{position:"top-right",effect:"stackslide",timeout:1500})},this.renderResult=e=>l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"col"},e.message),l.a.createElement("label",{className:"col",style:{color:e.validation?"green":"orangered"}},e.validation?"DO\u011eRULANDI":"DO\u011eRULANAMADI")),this.showModal=()=>l.a.createElement(r.Modal,{isOpen:!!this.state.checkResult,size:"lg"},l.a.createElement(r.ModalHeader,null,"Zaman Damgas\u0131 Do\u011frulama Sonucu"),l.a.createElement(r.ModalBody,null,l.a.createElement("div",{className:"container"},this.state.checkResult.map(e=>this.renderResult(e)))),l.a.createElement(r.ModalFooter,null,l.a.createElement("div",{className:"col-sm-3"},l.a.createElement(O.a,{position:"leftSide",className:"zocial Onay",label:"Kapat",title:"Kapat",style:{fontSize:"x-small"},onClick:()=>{this.setState({checkResult:null})}})),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement(O.a,{position:"rightSide",className:"zocial Pdf",label:"Do\u011frulama Sonucunu \u0130ndir",title:"Do\u011frulama Sonucunu \u0130ndir",style:{fontSize:"x-small"},onClick:this.downloadDocuments})))),this.setAlert=()=>{x.a.error(this.state.errorMessage,{position:"top-right",effect:"stackslide",timeout:1500}),this.setState({errorMessage:""})},this.downloadDocuments=()=>{let e={url:"/signer/downloadVerifyStatus",responseType:"arraybuffer",method:"post",data:[this.state.timeStamp,this.state.hashCode]};Object(o.e)(e).then((function(e){let t=document.createElement("a");t.href=window.URL.createObjectURL(new Blob([e.data],{type:"application/pdf"})),t.download="Dogrulama_Sonucu.pdf",document.body.appendChild(t),t.click()})).catch((function(e){Object(i.v)(e)}))},this.state={timestamp:null,hashCode:null,checkResult:null,stampTime:null,errorMessage:""}}render(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"card-header",style:{paddingBottom:"40px"}},l.a.createElement("p",null,"\xc7al\u0131\u015fan i\u015flem kayd\u0131 sekmesinden indirilen pdf dosyas\u0131n\u0131n i\xe7erisinde bulunan zaman damgas\u0131 ve hash kodu de\u011ferleri bu sekmedeki ilgili alanlara girilerek do\u011frulu\u011fu kontrol edilebilir.")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 d-flex"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("p",null,"Zaman Damgas\u0131 (Base64) :"),l.a.createElement(r.Input,{placeholder:"Zaman Damgas\u0131 (Base64)",autoComplete:"off",autoFocus:!0,id:"timestamp",name:"timestamp",type:"textarea",style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},value:this.state.timeStamp,onChange:e=>this.setState({timeStamp:e.target.value})})),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("p",null,"Hash De\u011feri (Base64) :"),l.a.createElement(r.Input,{placeholder:"Hash De\u011feri (Base64)",autoComplete:"off",id:"hashCode",name:"hashCode",type:"textarea",style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},value:this.state.hashCode,onChange:e=>this.setState({hashCode:e.target.value})}))))),l.a.createElement("div",{className:" row",style:{marginTop:"10px"}},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"linear-gradient(rgba(159, 208, 55, 0.6), #9fd037)",marginRight:"30px"},rel:"tooltip",className:"TekBtn search btn-icon sag-1 pull-right",onClick:this.sendCode},"Zaman Damgas\u0131 Sorgula"))),null!==this.state.checkResult&&this.showModal(),""!==this.state.errorMessage&&this.setAlert())}}var z=M;class j extends s.Component{constructor(e){super(e),this.previewContent=e=>{let t=this,a={url:"BORDRO"===e.documentType.toString().toUpperCase()?"/bordro/previewBordroContent":"/form/previewFormContent",responseType:"arraybuffer",method:"post",data:e.documentId};t.setState({mediaModal:!1,disabledPreviewBtn:!0,title:"Dok\xfcman \xd6nizleme"}),Object(o.e)(a).then((function(a){let s=new Blob([a.data],{type:a.headers["content-type"]}),l="";if(void 0!=s){let e=new FileReader;e.readAsDataURL(s),e.onloadend=function(){l=e.result,t.setState({url:l})}}let n="BORDRO"!==e.documentType.toString().toUpperCase();t.setState({mediaModal:!0,isForm:n,disabledPreviewBtn:!1})})).catch((function(e){Object(i.v)(e),t.setState({mediaModal:!1,title:null,disabledPreviewBtn:!1})}))},this.downloadContent=e=>{let t=this,a={url:"BORDRO"===e.documentType.toString().toUpperCase()?"/bordro/previewBordroContent":"/form/previewFormContent",responseType:"arraybuffer",method:"post",data:e.documentId};t.setState({disabledDownloadBtn:!0}),Object(o.e)(a).then((function(a){let s=new Blob([a.data],{type:a.headers["content-type"]});var l=document.createElement("a");l.href=window.URL.createObjectURL(s),l.download="Dokuman_"+(e.employeeFullName?e.employeeFullName+"_":"")+(e.documentName?e.documentName+"_":"")+".pdf",document.body.appendChild(l),l.click(),t.setState({disabledDownloadBtn:!1}),t.setState({loading:!1})})).catch((function(e){Object(i.v)(e),t.setState({disabledDownloadBtn:!1,title:null})}))},this.readStateDetail=e=>{let t=this;t.setState({disabledBtn:!0});let a={url:"BORDRO"===e.documentType.toString().toUpperCase()?"/bordro/readBordroById":"/form/readFormById",method:"post",data:e.documentId};Object(o.e)(a).then((function(a){t.setState({disabledBtn:!1,documentType:e.documentType,stateDetail:a.data})})).catch((function(e){Object(i.v)(e),t.setState({disabledBtn:!1})}))},this.readDocumentId=e=>({id:e.documentId}),this.defineTabName=()=>"0"===this.state.activeTab?"T\xfcm \u0130\u015flem Ge\xe7mi\u015fi":"1"===this.state.activeTab?"\xc7al\u0131\u015fan \u0130\u015flem Kayd\u0131":"2"===this.state.activeTab?"M\xfc\u015fteri \u0130\u015flem Kayd\u0131":"3"===this.state.activeTab?"Zaman Damgas\u0131 Do\u011frulama":void 0,this.arrangeDataSet=e=>{let t={};return t.sheetName="M\xfc\u015fteri_\u0130\u015flem_Kayd\u0131_"+e.vknTckn,t.uuid=Object(i.h)(),t.customerId=e.recordId,t.type="zip",t.startDate=this.state.startDate,t.endDate=this.state.endDate,t.employeeIdList=[],t},this.downloadClicked=e=>{let t={url:"/approval/customer-report",method:"post",data:this.arrangeDataSet(e)};this.setState({openModal:!1}),Object(o.e)(t).then((function(){x.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3})})).catch((function(e){Object(i.v)(e)}))},this.showModal=()=>l.a.createElement(C.a,{showCancel:!0,style:{width:"578px",height:"500px"},title:"M\xfc\u015fteri \u0130\u015flem Kayd\u0131",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",confirmBtnText:"Kay\u0131t Belgesi \u0130ndir",disabled:""===this.state.startDate||""===this.state.endDate,cancelBtnText:"Kapat",onCancel:()=>this.setState({openModal:!1,startDate:"",endDate:"",row:""}),onConfirm:()=>this.downloadClicked(this.state.row)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("span",{style:{fontSize:"small",margin:"-10px 10px 0 10px"}},"Se\xe7ilen m\xfc\u015fterinin se\xe7ilecek zaman aral\u0131\u011f\u0131ndaki t\xfcm i\u015flem ge\xe7mi\u015finin kay\u0131t belgesini indirebilirsiniz.")),l.a.createElement("div",{className:"col-sm-12",style:{margin:"1em 0 1em 0"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("span",{style:{fontWeight:"bold"}},"Ba\u015flang\u0131\xe7 Tarihi *")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(D.a,{locale:"tr",className:"datepicker",style:{fontSize:"12px"},input:!0,inputProps:{id:"startDate"},closeOnSelect:!0,value:N()(this.state.startDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.startOf("day").isBefore(D.a.moment().startOf("day"))},onChange:e=>{this.setState({startDate:N()(e).format("YYYY-MM-DD")})}})))),l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("span",{style:{fontWeight:"bold"}},"Biti\u015f Tarihi *")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(D.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:N()(this.state.endDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.startOf("day").isBefore(D.a.moment().startOf("day"))},onChange:e=>{this.setState({endDate:N()(e).format("YYYY-MM-DD")})}}))))))),this.state={selection:[],selectedAll:!1,content:[],customers:[],total:0,page:0,size:10,loading:!1,manual:!1,searching:!1,customerTotal:0,customerPage:0,customerSize:10,customerLoading:!1,customerManual:!1,customerSearching:!1,searchQuery:void 0,isConditionAllowed:!1,stop:null,disabledPreviewBtn:!1,activeTab:"0",openModal:!1,startDate:"",endDate:""},this.fetchData=this.fetchData.bind(this),this.fetchCustomerData=this.fetchCustomerData.bind(this),this.handleSearch=this.handleSearch.bind(this),this.handleCustomerSearch=this.handleCustomerSearch.bind(this)}fetchData(e,t,a,s){let l=this,n=void 0!==e?"&sort="+e+","+t:"",r=l.state.searchQuery?"&"+l.state.searchQuery:"",c={url:"/approval/readActivityStream?employeeId="+(l.props.match&&l.props.match.params.id?l.props.match.params.id:"")+"&page="+a+"&size="+s+r+n,method:"get"};l.setState({loading:!0,manual:!0!==l.manual&&l.manual}),Object(o.e)(c).then((function(e){Object(i.e)(l,e.data),l.setState({page:a,size:s,total:e.data.totalElements,content:e.data.content,loading:!1,selectedAll:!1,selection:[]})})).catch((function(e){l.setState({loading:!1}),Object(i.v)(e)}))}fetchCustomerData(e,t,a,s){let l=this,n=e?"&sort="+e+","+t:"&sort=recordId,desc",r=l.state.searchQuery?"&"+l.state.searchQuery:"",c={url:"/customer/fetch?page="+a+"&size="+s+n+r+(""!==r&&r.includes("showPassive")?"":"&showPassive=FALSE"),method:"get"};l.setState({customerLoading:!0,customerSearching:!0,customerManual:!0!==l.customerManual&&l.customerManual}),Object(o.e)(c).then((function(e){l.setState({customerPage:a,customerSize:s,customerTotal:e.data.totalElements,customers:e.data.content,customerLoading:!1,customerSearching:!1})})).catch((function(e){l.setState({customerLoading:!1,customerSearching:!1}),Object(i.v)(e)}))}handleSearch(e){this.setState({searchQuery:e,searching:!0,selection:[]},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}handleCustomerSearch(e){this.setState({searchQuery:e,customerSearching:!0},()=>this.fetchCustomerData(this.state.accessor,this.state.direction,0,this.state.customerSize))}renderMainTable(){let e=[{Header:"\u0130\u015flem Yapan",accessor:"userFullName"},{Header:"\u0130\u015flem Yapan  TCKN",accessor:"userTckn"}],t=[{Header:"Dok\xfcman Tipi",accessor:"documentType"},{Header:"Dok\xfcman Ad\u0131",accessor:"documentName"},{Header:"Dok\xfcmandaki Personel",accessor:"employeeFullName"},{Header:"\u0130\u015flem",accessor:"action",Cell:e=>l.a.createElement("div",null,"WAITING"===e.action&&l.a.createElement("span",{className:"text-warning"},"Onay\u0131na Sunuldu"),"DISPLAYED"===e.action&&l.a.createElement("span",{className:"text-info"},"\u0130lk defa g\xf6r\xfcnt\xfcledi"),"TIMEOUT"===e.action&&l.a.createElement("span",{className:"text-danger"},"Zaman A\u015f\u0131m\u0131na U\u011frad\u0131"),"OBJECTION"===e.action&&l.a.createElement("span",{className:"text-danger"},"Red Etti"),"CONFIRMED"===e.action&&l.a.createElement("span",{className:"text-success"},"Onaylad\u0131"),"ANSWERED"===e.action&&l.a.createElement("span",{className:"text-success"},"Cevaplad\u0131"),"SIGNED"===e.action&&l.a.createElement("span",{className:"text-success"},"\u0130mzalad\u0131 ve Onaylad\u0131"),"CONFIRMED_BY_COMPANY"===e.action&&l.a.createElement("span",{className:"text-success"},"Firma taraf\u0131ndan, onaylanm\u0131\u015f kabul edilmi\u015ftir"),"CANCELED"===e.action&&l.a.createElement("span",{className:"text-danger"},"G\xf6nderim \u0130ptal Edildi"))},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:(e,t)=>l.a.createElement("div",{className:"btn-group",style:{padding:0,margin:0}},Object(i.f)(this,[B.a])&&l.a.createElement("div",{className:"dropdown",style:{padding:0,margin:0}},l.a.createElement("button",{className:"MenuBtn2 listt btn btn-default",style:{WebkitTextFillColor:"white"},type:"button","data-toggle":"dropdown"},"Se\xe7\u0130n\u0130z"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton_"+e.id},!this.state.disabledPreviewBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item",onClick:()=>this.previewContent(e)},l.a.createElement("i",{className:"fa fa-search"}),"G\xf6r\xfcnt\xfcle"),!!this.state.disabledPreviewBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item"},l.a.createElement(p.a,{type:"spinningBubbles",style:{width:"20px",position:"absolute"}}),l.a.createElement("span",{style:{paddingLeft:"24px",color:"gray"}},"G\xf6r\xfcnt\xfcle")),!this.state.disabledDownloadBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item",onClick:()=>this.downloadContent(e)},l.a.createElement("i",{className:"fa fa-download"}),"Dok\xfcman\u0131 \u0130ndir"),!this.state.disabledDownloadBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item",onClick:()=>Object(c.n)(this,this.readDocumentId(e),t,e.documentType)},l.a.createElement("i",{className:"fa fa-download"}),"Onay Belgesini \u0130ndir"),!!this.state.disabledDownloadBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item"},l.a.createElement(p.a,{type:"spinningBubbles",style:{width:"20px",position:"absolute"}}),l.a.createElement("span",{style:{paddingLeft:"24px",color:"gray"}},"Dok\xfcman\u0131 \u0130ndir")),!!this.state.disabledDownloadBtn&&Object(i.f)(this,B.a)&&l.a.createElement("a",{className:"dropdown-item"},l.a.createElement(p.a,{type:"spinningBubbles",style:{width:"20px",position:"absolute"}}),l.a.createElement("span",{style:{paddingLeft:"24px",color:"gray"}},"Onay Belgesini \u0130ndir")),l.a.createElement("a",{className:"dropdown-item",onClick:()=>this.readStateDetail(e)},l.a.createElement("i",{className:"fa fa-info-circle"}),"Durum Detay\u0131"))))}],a=[{Header:"\u0130\u015flem Tarihi",accessor:"updatedTime",Cell:e=>l.a.createElement("div",null,e.updatedTime&&N()(e.updatedTime.toString().replace("T"," ")).format("DD-MM-YYYY HH:mm:ss"))}];this.props.match&&this.props.match.params.id||(a=a.concat(e)),a=a.concat(t);let s=Object(c.G)(this,a,"accessor");return l.a.createElement(n.a,{columns:s,content:this.state.content,loading:this.state.loading,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.total,page:this.state.page,size:this.state.size,manual:this.state.manual,options:["10","20","50","100","500","1000"],fetchData:this.fetchData})}defineServiceStateIcon(e){return e.customerContractList&&e.customerContractList[0]&&e.customerContractList[0].signatureState&&!e.customerContractList[0].serviceTerminationDate?l.a.createElement("label",{className:"fas fa-check",style:{color:"#9fd037",fontSize:"1.2em",cursor:"pointer"}}):l.a.createElement("a",null,l.a.createElement("label",{className:"fas fa-exclamation",style:{color:"#F2421B",fontSize:"1.2em",cursor:"pointer"}}))}renderCustomerTable(){const e=[{Header:"Unvan",accessor:"formattedName",Cell:e=>l.a.createElement("div",null,10===e.vknTckn.length?l.a.createElement(y.a,{text:e.formattedName,maxLength:20}):l.a.createElement(y.a,{text:e.givenName+" "+e.familyName,maxLength:20}))},{Header:"VKN/TCKN",accessor:"vknTckn"},{Header:"Kurumsal e-Posta",accessor:"corporateMail"},{Header:"Vergi Dairesi",accessor:"taxOffice"},{Header:"Ba\u011fl\u0131 Oldu\u011fu Kurulu\u015f",accessor:"parentCustomer",sortable:!1},{Header:"Hizmet Durumu",accessor:"",sortable:!1,Cell:e=>l.a.createElement("div",null,this.defineServiceStateIcon(e))},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:e=>l.a.createElement("div",{style:{textAlign:"left",display:"flex"}},l.a.createElement(E.a,{title:"\u0130ndir",faIcon:"fa-download",color:"warning",onClick:()=>{let t=e.createdAt&&null!=e.createdAt?e.createdAt:new Date(2015,1,1,0,0,0),a=N()();this.setState({openModal:!0,row:e,startDate:t,endDate:a})}})),width:"auto"}];return l.a.createElement(n.a,{columns:e,content:this.state.customers,loading:this.state.customerLoading,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.customerTotal,page:this.state.customerPage,size:this.state.customerSize,manual:this.state.customerManual,options:["5","10","20","50","100"],fetchData:this.fetchCustomerData})}render(){let e=[];return this.props.match&&this.props.match.params.id||(e=[{label:"\u0130\u015flem Yapan",accessor:"userFullName",type:"text",operator:"="},{label:"\u0130\u015flem Yapan TCKN",accessor:"userTckn",type:"numericText",operator:"="}]),e.push({label:"Dok\xfcman Tipi",accessor:"documentType",type:"text",operator:"="}),e.push({label:"Dok\xfcman Ad\u0131",accessor:"documentName",type:"text",operator:"="}),e.push({label:"Dok\xfcmandaki Personel",accessor:"employeeFullName",type:"text",operator:"="}),e.push({label:"\u0130\u015flem Durumu",accessor:"action",type:"select",operator:"=",selectData:Object(c.f)()}),l.a.createElement(r.Row,{className:"baseBackground"},l.a.createElement(r.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}}),this.state.alert,l.a.createElement("div",{className:"row satirBasi"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"card"},l.a.createElement(r.CardHeader,null,l.a.createElement(r.CardTitle,{tag:"h4"},"\u0130\u015flem Ge\xe7mi\u015fi")),l.a.createElement("div",{className:"col-sm-12"},l.a.createElement(r.Nav,{pills:!0,className:"nav-pills-primary "},l.a.createElement(r.NavItem,null,l.a.createElement(r.NavLink,{className:g()({active:"0"===this.state.activeTab}),onClick:()=>{this.setState({activeTab:"0"})}},"T\xfcm \u0130\u015flem Ge\xe7mi\u015fi")),!(this.props.match&&this.props.match.params.id)&&l.a.createElement(r.NavItem,null,l.a.createElement(r.NavLink,{className:g()({active:"1"===this.state.activeTab}),onClick:()=>{this.setState({activeTab:"1"})}},"\xc7al\u0131\u015fan \u0130\u015flem Kayd\u0131")),this.props.isSuperAdmin&&l.a.createElement(r.NavItem,null,l.a.createElement(r.NavLink,{className:g()({active:"2"===this.state.activeTab}),onClick:()=>{this.setState({activeTab:"2"})}},"M\xfc\u015fteri \u0130\u015flem Kayd\u0131")))),l.a.createElement("hr",{style:{marginBottom:"20px"}}),l.a.createElement("div",{className:"card-header card-header-danger"},l.a.createElement("h4",{className:"card-title"},this.defineTabName())),l.a.createElement(r.CardBody,null,l.a.createElement(r.TabContent,{activeTab:this.state.activeTab},l.a.createElement(r.TabPane,{tabId:"0"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},l.a.createElement("div",{className:"card-body"},l.a.createElement(u.a,{fields:e,loading:this.state.searching,onSearch:this.handleSearch})),this.renderMainTable()))),l.a.createElement(r.TabPane,{tabId:"1"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},!(this.props.match&&this.props.match.params.id)&&l.a.createElement(k,null)))),l.a.createElement(r.TabPane,{tabId:"2"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},l.a.createElement("div",{className:"card-body"},l.a.createElement(u.a,{fields:[{label:"M\xfc\u015fteri Ad\u0131",accessor:"customerName",type:"text",operator:"="},{label:"Unvan",accessor:"formattedName",type:"text",operator:"="},{label:"VKN/TCKN",accessor:"vknTckn",type:"numericText",operator:"="},{label:"Ad",accessor:"givenName",type:"text",operator:"="},{label:"Soyad",accessor:"familyName",type:"text",operator:"="},{label:"Pasif M\xfc\u015fterileri G\xf6ster",accessor:"showPassive",type:"boolean",operator:"="}],loading:this.state.searching,onSearch:this.handleCustomerSearch})),this.props.isSuperAdmin&&!(this.props.match&&this.props.match.params.id)&&this.renderCustomerTable()),this.state.openModal&&this.showModal())),l.a.createElement(r.TabPane,{tabId:"3"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},!(this.props.match&&this.props.match.params.id)&&l.a.createElement(z,null)))))),this.state.mediaModal&&l.a.createElement(d.a,{url:this.state.url,modal:this.state.mediaModal,closeModal:()=>this.setState({url:null,mediaModal:!1}),canvas:this.state.isForm}),this.state.stateDetail&&l.a.createElement(m.a,{detail:this.state.stateDetail,documentType:this.state.documentType,toggle:()=>this.setState({stateDetail:void 0})})))))}}t.default=j}}]);
//# sourceMappingURL=38.1392828a.chunk.js.map