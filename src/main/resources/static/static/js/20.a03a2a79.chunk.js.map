{"version":3,"sources":["../node_modules/canvg/lib/index.es.js","../node_modules/rgbcolor/index.js","../node_modules/svg-pathdata/lib/SVGPathData.module.js","../node_modules/stackblur-canvas/dist/stackblur-es.js"],"names":["index","Object","freeze","__proto__","offscreen","DOMParser","DOMParserFallback","arguments","length","undefined","preset","window","ignoreAnimation","ignoreMouse","createCanvas","width","height","OffscreenCanvas","createImage","url","response","fetch","blob","createImageBitmap","Reflect","deleteProperty","node","_ref","canvas","loadImage","compressSpaces","str","replace","trimLeft","trimRight","toNumbers","match","map","parseFloat","allUppercase","normalizeAttributeName","name","test","toLowerCase","parseExternalUrl","urlMatch","exec","normalizeColor","color","startsWith","rgbParts","num","isFloat","String","Math","round","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","selector","regex","matches","getSelectorSpecificity","specificity","currentSelector","delta","join","PSEUDO_ZERO","vectorMagnitude","v","sqrt","pow","vectorsRatio","u","vectorsAngle","acos","CB1","t","CB2","CB3","CB4","QB1","QB2","QB3","Property","document","value","this","isNormalizedColor","separator","getString","trim","split","zeroIsValue","regexp","result","isString","hasValue","asString","endsWith","def","n","rootEmSize","emSize","axisOrIsFontSize","processPercent","axis","isFontSize","viewPort","screen","getNumber","min","computeSize","max","getRem","getEm","getDpi","PI","definitions","element","opacity","getDefinition","createGradient","ctx","createPattern","getHrefAttribute","patternTransform","getAttribute","setValue","textBaselineMapping","getColor","len","commas","i","ok","alpha","toRGBA","ViewPort","viewPorts","push","pop","getCurrent","d","Point","x","y","point","defaultValue","scale","path","points","pathPoints","atan2","transform","xp","yp","Mouse","working","events","eventElements","onClick","bind","onMouseMove","onclick","onmousemove","style","cursor","forEach","run","parent","_ref2","isPointInPath","boundingBox","_ref3","isPointInBox","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","event","mapXY","clientX","clientY","type","eventTarget","defaultWindow","defaultFetch$1","Screen","FRAMERATE","MAX_VIRTUAL_PIXELS","CLIENT_WIDTH","CLIENT_HEIGHT","mouse","animations","waits","frameDuration","isReadyLock","isFirstRender","intervalId","checker","readyPromise","Promise","resolve","every","_","resolveReady","strokeStyle","lineCap","lineJoin","miterLimit","aspectRatio","desiredWidth","desiredHeight","minX","minY","refX","refY","clip","clipX","clipY","cleanAspectRatio","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleX","scaleY","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","translate","getPixels","scaledClipX","scaledClipY","beginPath","moveTo","lineTo","closePath","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","enableRedraw","ignoreDimensions","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","isReady","render","now","Date","then","tick","shouldUpdate","runEvents","start","cancel","stop","reduce","animation","update","hasEvents","clear","setCurrent","widthStyle","getStyle","heightStyle","concat","cWidth","clientWidth","cHeight","clientHeight","viewBox","xRatio","yRatio","_widthStyle","isNaN","_heightStyle","transformStyle","clearRect","defaultFetch","DefaultDOMParser","Parser","resource","_this","parseFromString","load","xml","parser","checkDocument","err","parserError","getElementsByTagName","Error","textContent","_this2","text","Translate","parse","applyTransform","Rotate","rotate","transformOrigin","angle","originX","originY","cx","cy","numbers","tx","ty","getRadians","rad","cos","sin","Scale","scaleSize","parseScale","Matrix","matrix","a","b","c","e","f","det","Skew","skew","super","SkewX","tan","SkewY","Transform","transforms","parseTransforms","parseTransform","TransformType","transformTypes","transformOriginXProperty","transformOriginYProperty","apply","unapply","applyToPoint","skewX","skewY","Element","captureTextNodes","attributes","styles","stylesSpecificity","animationFrozen","animationFrozenValue","children","nodeType","Array","from","attribute","nodeName","addStylesFromStyleDefinition","id","childNodes","childNode","addChild","textNode","createTextNode","getText","createIfNotExists","attr","_attr","empty","key","skipAncestors","parentStyle","_style","save","mask","applyEffects","getValue","filter","setContext","renderChildren","clearContext","restore","fromElement","clipPathStyleProp","child","createElement","ignoreChildTypes","includes","_node$getAttribute","styleClasses","call","some","styleClass","matchesSelector","existingSpecificity","ignoreStyles","toRestore","styleProp","_this$parent","indexOf","UnknownElement","wrapFontFamily","fontFamily","trimmed","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","fontVariant","fontSize","inherit","inheritFont","parts","set","part","variants","weights","process","BoundingBox","x1","Number","NaN","y1","x2","y2","addPoint","p0","p1","p2","p3","forX","b2ac","t1","addX","sumCubic","addY","t2","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","bezierCurveAdd","cp1x","cp1y","cp2x","cp2y","addBezierCurve","PathParser","control","current","command","commands","previousCommand","angles","xProp","yProp","makeAbsolute","getPoint","CURVE_TO","SMOOTH_CURVE_TO","QUAD_TO","SMOOTH_QUAD_TO","ox","oy","relative","priorTo","angleTo","addMarkerAngle","j","RenderedElement","modifiedEmSizeStack","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","isUrlDefinition","fillStyle","getFillStyleDefinition","_fillStyle","_fillStyle2","addOpacity","_strokeStyle","_strokeStyle2","strokeWidthStyleProp","newLineWidth","lineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","strokeDasharrayStyleProp","strokeDashoffsetProp","gaps","setLineDash","webkitLineDash","mozDash","offset","lineDashOffset","webkitLineDashOffset","mozDashOffset","font","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","toString","isPixels","globalAlpha","calculateOpacity","popEmSize","PathElement","pathParser","reset","isEnd","next","MOVE_TO","pathM","LINE_TO","pathL","HORIZ_LINE_TO","pathH","VERT_LINE_TO","pathV","pathC","pathS","pathQ","pathT","ARC","pathA","CLOSE_PATH","pathZ","getMarkerPoints","getMarkerAngles","checkPath","fillRuleStyleProp","fill","setTransform","stroke","markers","getMarkers","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","marker","_marker","_point","_angle","_marker2","_point2","_angle2","getAsCurrentPoint","addMarker","controlPoint","getAsControlPoint","currentPoint","bezierCurveTo","getReflectedControlPoint","addQuadraticCurve","quadraticCurveTo","rX","rY","xRot","lArcFlag","sweepFlag","xAxisRotation","currp","l","s","cpp","centp","a1","ad","dir","ah","halfWay","r","sx","sy","arc","Boolean","GlyphElement","horizAdvX","unicode","arabicForm","TextElement","measureCache","textBaseline","getTextBaseline","leafTexts","textChunkStart","POSITIVE_INFINITY","maxX","NEGATIVE_INFINITY","getTElementBoundingBox","initializeCoordinates","adjustChildCoordinatesRecursive","childBoundingBox","getChildBoundingBox","addBoundingBox","inheritFontSize","getFontSize","measureText","char","glyph","isArabic","prevChar","nextChar","glyphs","maybeGlyph","missingGlyph","parentNode","lastIndex","renderChild","isWorking","checkBoundingBox","getBoundingBox","renderTElementChildren","renderText","customFont","unitsPerEm","fontFace","ctxFont","isRTL","reverse","dx","getGlyph","lw","fillText","strokeText","firstElement","textAnchor","shift","adjustChildCoordinatesRecursiveCore","applyAnchoring","textParent","adjustChildCoordinates","xAttr","yAttr","dxAttr","dyAttr","getInheritedAttribute","measure","measureTargetText","targetText","_measure","isFirstChild","parentAttr","TSpanElement","getTextFromNode","TextNode","SVGElement","root","_this$node$parentNode","setDefaults","getComputedStyle","getPropertyValue","fontSizeProp","refXAttr","refYAttr","viewBoxAttr","setViewBox","removeCurrent","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","RectElement","rxAttr","ryAttr","rx","ry","KAPPA","CircleElement","EllipseElement","LineElement","x0","y0","getPoints","PolylineElement","parsePath","PolygonElement","PatternElement","parentOpacityProp","patternSvg","patternCanvas","patternCtx","getContext","MarkerElement","orient","markerUnits","markerSvg","overflow","DefsElement","GElement","GradientElement","attributesToInherit","stops","stopsContainer","inheritStopContainer","gradient","getGradient","addParentOpacity","addColorStop","rootView","rect","group","attributeToInherit","LinearGradientElement","isBoundingBoxUnits","getGradientUnits","createLinearGradient","RadialGradientElement","fx","fy","fr","createRadialGradient","StopElement","stopOpacity","stopColor","AnimateElement","duration","initialValue","initialUnits","removed","frozen","begin","getMilliseconds","maxDuration","to","values","valuesAttr","attributeType","attributeName","progress","getProgress","newValue","prop","getProperty","getUnits","updated","calcValue","typeAttr","p","lb","floor","ub","ceil","AnimateColorElement","colorFrom","colorTo","g","AnimateTransformElement","transformFrom","transformTo","FontElement","fontFamilyStyle","FontFaceElement","ascent","descent","MissingGlyphElement","TRefElement","firstChild","AElement","hasText","open","ownKeys$2","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread$2","target","source","getOwnPropertyDescriptors","defineProperties","defineProperty","TextPathElement","textWidth","textHeight","pathLength","glyphInfo","letterSpacingCache","measuresCache","Map","pathElement","dataArray","parsePathData","theta","dTheta","psi","fs","setTextData","textDecoration","rotation","partialText","idx","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","dy","charI","glyphWidth","getLetterSpacingAt","splineStep","getEquidistantPointOnPath","segment","dyX","dyY","has","get","chars","thisSpacing","parentSpacing","letterSpacing","textLen","dxSum","acc","cur","getPathLength","startOffset","nextOffset","findSegmentToFitChar","pathCommands","startX","startY","nextCommandType","calcLength","commandType","getLineLength","getPointOnCubicBezier","getPointOnQuadraticBezier","end","inc","abs","getPointOnEllipticalArc","dist","fromX","fromY","m","rise","pt","ix","iy","pRise","pRun","distance","fullLen","cumulativePathLength","currentT","getPointOnLine","pct","p4x","p4y","cosPsi","sinPsi","inputStep","inputPrecision","precision","step","equidistantCache","getPointOnPath","targetDistance","buildEquidistantCache","dataUriRegex","ImageElement","loaded","href","isSvg","images","loadSvg","image","console","error","data","atob","decodeURIComponent","svg","subDocument","canvg","forkString","documentElement","_image","complete","drawImage","SymbolElement","SVGFontLoader","fonts","fontNode","StyleElement","cssParts","cssClasses","cssProps","cssClass","props","cssProp","substr","src","UseElement","tempSvg","oldParent","cachedElement","imGet","img","_height","rgba","imSet","val","m1","m2","m3","FeColorMatrixElement","includeOpacity","_x","_y","srcData","getImageData","nr","ng","nb","na","putImageData","MaskElement","ignoredStyles","removeStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","globalCompositeOperation","fillRect","restoreStyles","noop","ClipPathElement","contextProto","getPrototypeOf","elementTransform","FilterElement","px","py","efd","extraFilterDistance","tmpCanvasWidth","tmpCanvasHeight","FeDropShadowElement","_width","FeMorphologyElement","FeCompositeElement","FeGaussianBlurElement","blurRadius","body","getUniqueId","display","appendChild","removeChild","TitleElement","DescElement","elements","ownKeys$1","_createImage","anonymousCrossOrigin","crossOrigin","reject","onload","onerror","_event","_source","_lineno","_colno","Document","emSizeStack","uniqueId","bindCreateImage","wait","isImagesLoaded","isFontsLoaded","forceAnonymousCrossOrigin","elementType","ElementType","elementTypes","config","_objectSpread$1","ownKeys","_objectSpread","Canvg","options","createDocumentElement","_arguments","svgDocument","fromString","ready","_arguments2","baseOptions","resize","module","exports","color_string","charAt","simple_colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","feldspar","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslateblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","violetred","wheat","white","whitesmoke","yellow","yellowgreen","color_defs","re","example","bits","parseInt","processor","channels","toRGB","toHex","getHelpXML","examples","sc","setAttribute","list_item","list_color","RGBColor","example_div","cssText","list_item_value","setPrototypeOf","prototype","hasOwnProperty","TypeError","constructor","create","o","h","O","T","cX","cY","phi1","phi2","N","E","A","C","M","R","I","S","L","ROUND","TO_ABS","TO_REL","NORMALIZE_HVZ","NORMALIZE_ST","QT_TO_C","INFO","SANITIZE","LINE_COMMANDS","MATRIX","ROTATE","TRANSLATE","SCALE","SKEW_X","atan","SKEW_Y","X_AXIS_SYMMETRY","Y_AXIS_SYMMETRY","A_TO_C","H","ANNOTATE_ARCS","CLONE","CALCULATE_BOUNDS","maxY","DRAWING_COMMANDS","w","U","toAbs","toRel","normalizeHVZ","normalizeST","qtToC","aToC","sanitize","xSymmetry","ySymmetry","annotateArcs","charCodeAt","curNumber","curCommandType","curCommandRelative","canParseCommandOrComma","curNumberHasExp","curNumberHasExpDigits","curNumberHasDecimal","curArgs","finish","SyntaxError","isArray","encode","getBounds","_typeof","obj","Symbol","iterator","mulTable","shgTable","getImageDataFromCanvas","topX","topY","getElementById","context","processCanvasRGBA","radius","imageData","stackEnd","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","stackIn","stackOut","yw","yi","mulSum","shgSum","pr","pg","pb","pa","_i","rInSum","gInSum","bInSum","aInSum","rOutSum","gOutSum","bOutSum","aOutSum","rSum","gSum","bSum","aSum","_i2","rbs","paInitial","_a2","_p","_stackOut","_r","_g","_b","_a","_pr","_pg","_pb","_pa","_rOutSum","_gOutSum","_bOutSum","_aOutSum","_rSum","_gSum","_bSum","_aSum","_i3","_gInSum","_bInSum","_aInSum","_rInSum","_i4","_rbs","_p2","processImageDataRGBA","instance","Constructor","_classCallCheck"],"mappings":"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IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClwCC,EAAW,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GA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","file":"static/js/20.a03a2a79.chunk.js","sourcesContent":["import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport requestAnimationFrame from 'raf';\nimport RGBColor from 'rgbcolor';\nimport { SVGPathData } from 'svg-pathdata';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\r\n * Options preset for `OffscreenCanvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @returns Preset object.\r\n */\nfunction offscreen() {\n  var {\n    DOMParser: DOMParserFallback\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var preset = {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParserFallback,\n    createCanvas(width, height) {\n      return new OffscreenCanvas(width, height);\n    },\n    createImage(url) {\n      return _asyncToGenerator(function* () {\n        var response = yield fetch(url);\n        var blob = yield response.blob();\n        var img = yield createImageBitmap(blob);\n        return img;\n      })();\n    }\n  };\n  if (typeof DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n    Reflect.deleteProperty(preset, 'DOMParser');\n  }\n  return preset;\n}\n\n/**\r\n * Options preset for `node-canvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @param config.canvas - `node-canvas` exports.\r\n * @param config.fetch - WHATWG-compatible `fetch` function.\r\n * @returns Preset object.\r\n */\nfunction node(_ref) {\n  var {\n    DOMParser,\n    canvas,\n    fetch\n  } = _ref;\n  return {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser,\n    fetch,\n    createCanvas: canvas.createCanvas,\n    createImage: canvas.loadImage\n  };\n}\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  offscreen: offscreen,\n  node: node\n});\n\n/**\r\n * HTML-safe compress white-spaces.\r\n * @param str - String to compress.\r\n * @returns String.\r\n */\nfunction compressSpaces(str) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\r\n * HTML-safe left trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimLeft(str) {\n  return str.replace(/^[\\n \\t]+/, '');\n}\n/**\r\n * HTML-safe right trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimRight(str) {\n  return str.replace(/[\\n \\t]+$/, '');\n}\n/**\r\n * String to numbers array.\r\n * @param str - Numbers string.\r\n * @returns Numbers array.\r\n */\n\nfunction toNumbers(str) {\n  var matches = (str || '').match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm) || [];\n  return matches.map(parseFloat);\n} // Microsoft Edge fix\n\nvar allUppercase = /^[A-Z-]+$/;\n/**\r\n * Normalize attribute name.\r\n * @param name - Attribute name.\r\n * @returns Normalized attribute name.\r\n */\n\nfunction normalizeAttributeName(name) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase();\n  }\n  return name;\n}\n/**\r\n * Parse external URL.\r\n * @param url - CSS url string.\r\n * @returns Parsed URL.\r\n */\n\nfunction parseExternalUrl(url) {\n  //                      single quotes [2]\n  //                      v         double quotes [3]\n  //                      v         v         no quotes [4]\n  //                      v         v         v\n  var urlMatch = /url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(url) || [];\n  return urlMatch[2] || urlMatch[3] || urlMatch[4];\n}\n/**\r\n * Transform floats to integers in rgb colors.\r\n * @param color - Color to normalize.\r\n * @returns Normalized color.\r\n */\n\nfunction normalizeColor(color) {\n  if (!color.startsWith('rgb')) {\n    return color;\n  }\n  var rgbParts = 3;\n  var normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, (num, isFloat) => rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num);\n  return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nvar attributeRegex = /(\\[[^\\]]+\\])/g;\nvar idRegex = /(#[^\\s+>~.[:]+)/g;\nvar classRegex = /(\\.[^\\s+>~.[:]+)/g;\nvar pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi;\nvar pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi;\nvar pseudoClassRegex = /(:[^\\s+>~.[:]+)/g;\nvar elementRegex = /([^\\s+>~.[:]+)/g;\nfunction findSelectorMatch(selector, regex) {\n  var matches = regex.exec(selector);\n  if (!matches) {\n    return [selector, 0];\n  }\n  return [selector.replace(regex, ' '), matches.length];\n}\n/**\r\n * Measure selector specificity.\r\n * @param selector - Selector to measure.\r\n * @returns Specificity.\r\n */\n\nfunction getSelectorSpecificity(selector) {\n  var specificity = [0, 0, 0];\n  var currentSelector = selector.replace(/:not\\(([^)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n  var delta = 0;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex);\n  specificity[0] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex);\n  specificity[2] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex);\n  specificity[1] += delta;\n  currentSelector = currentSelector.replace(/[*\\s+>~]/g, ' ').replace(/[#.]/g, ' ');\n  [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex); // lgtm [js/useless-assignment-to-local]\n\n  specificity[2] += delta;\n  return specificity.join('');\n}\nvar PSEUDO_ZERO = .00000001;\n/**\r\n * Vector magnitude.\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorMagnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\r\n * Ratio between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsRatio(u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\r\n * Angle between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n  return t * t * t;\n}\nfunction CB2(t) {\n  return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n  return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n  return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n  return t * t;\n}\nfunction QB2(t) {\n  return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n  return (1 - t) * (1 - t);\n}\nclass Property {\n  constructor(document, name, value) {\n    this.document = document;\n    this.name = name;\n    this.value = value;\n    this.isNormalizedColor = false;\n  }\n  static empty(document) {\n    return new Property(document, 'EMPTY', '');\n  }\n  split() {\n    var separator = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ' ';\n    var {\n      document,\n      name\n    } = this;\n    return compressSpaces(this.getString()).trim().split(separator).map(value => new Property(document, name, value));\n  }\n  hasValue(zeroIsValue) {\n    var {\n      value\n    } = this;\n    return value !== null && value !== '' && (zeroIsValue || value !== 0) && typeof value !== 'undefined';\n  }\n  isString(regexp) {\n    var {\n      value\n    } = this;\n    var result = typeof value === 'string';\n    if (!result || !regexp) {\n      return result;\n    }\n    return regexp.test(value);\n  }\n  isUrlDefinition() {\n    return this.isString(/^url\\(/);\n  }\n  isPixels() {\n    if (!this.hasValue()) {\n      return false;\n    }\n    var asString = this.getString();\n    switch (true) {\n      case asString.endsWith('px'):\n      case /^[0-9]+$/.test(asString):\n        return true;\n      default:\n        return false;\n    }\n  }\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  getValue(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return this.value;\n    }\n    return def;\n  }\n  getNumber(def) {\n    if (!this.hasValue()) {\n      if (typeof def === 'undefined') {\n        return 0;\n      }\n      return parseFloat(def);\n    }\n    var {\n      value\n    } = this;\n    var n = parseFloat(value);\n    if (this.isString(/%$/)) {\n      n /= 100.0;\n    }\n    return n;\n  }\n  getString(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return typeof this.value === 'undefined' ? '' : String(this.value);\n    }\n    return String(def);\n  }\n  getColor(def) {\n    var color = this.getString(def);\n    if (this.isNormalizedColor) {\n      return color;\n    }\n    this.isNormalizedColor = true;\n    color = normalizeColor(color);\n    this.value = color;\n    return color;\n  }\n  getDpi() {\n    return 96.0; // TODO: compute?\n  }\n  getRem() {\n    return this.document.rootEmSize;\n  }\n  getEm() {\n    return this.document.emSize;\n  }\n  getUnits() {\n    return this.getString().replace(/[0-9.-]/g, '');\n  }\n  getPixels(axisOrIsFontSize) {\n    var processPercent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!this.hasValue()) {\n      return 0;\n    }\n    var [axis, isFontSize] = typeof axisOrIsFontSize === 'boolean' ? [undefined, axisOrIsFontSize] : [axisOrIsFontSize];\n    var {\n      viewPort\n    } = this.document.screen;\n    switch (true) {\n      case this.isString(/vmin$/):\n        return this.getNumber() / 100.0 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n      case this.isString(/vmax$/):\n        return this.getNumber() / 100.0 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n      case this.isString(/vw$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('x');\n      case this.isString(/vh$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('y');\n      case this.isString(/rem$/):\n        return this.getNumber() * this.getRem();\n      case this.isString(/em$/):\n        return this.getNumber() * this.getEm();\n      case this.isString(/ex$/):\n        return this.getNumber() * this.getEm() / 2.0;\n      case this.isString(/px$/):\n        return this.getNumber();\n      case this.isString(/pt$/):\n        return this.getNumber() * this.getDpi() * (1.0 / 72.0);\n      case this.isString(/pc$/):\n        return this.getNumber() * 15;\n      case this.isString(/cm$/):\n        return this.getNumber() * this.getDpi() / 2.54;\n      case this.isString(/mm$/):\n        return this.getNumber() * this.getDpi() / 25.4;\n      case this.isString(/in$/):\n        return this.getNumber() * this.getDpi();\n      case this.isString(/%$/) && isFontSize:\n        return this.getNumber() * this.getEm();\n      case this.isString(/%$/):\n        return this.getNumber() * viewPort.computeSize(axis);\n      default:\n        {\n          var n = this.getNumber();\n          if (processPercent && n < 1.0) {\n            return n * viewPort.computeSize(axis);\n          }\n          return n;\n        }\n    }\n  }\n  getMilliseconds() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n    if (this.isString(/ms$/)) {\n      return this.getNumber();\n    }\n    return this.getNumber() * 1000;\n  }\n  getRadians() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n    switch (true) {\n      case this.isString(/deg$/):\n        return this.getNumber() * (Math.PI / 180.0);\n      case this.isString(/grad$/):\n        return this.getNumber() * (Math.PI / 200.0);\n      case this.isString(/rad$/):\n        return this.getNumber();\n      default:\n        return this.getNumber() * (Math.PI / 180.0);\n    }\n  }\n  getDefinition() {\n    var asString = this.getString();\n    var name = /#([^)'\"]+)/.exec(asString);\n    if (name) {\n      name = name[1];\n    }\n    if (!name) {\n      name = asString;\n    }\n    return this.document.definitions[name];\n  }\n  getFillStyleDefinition(element, opacity) {\n    var def = this.getDefinition();\n    if (!def) {\n      return null;\n    } // gradient\n\n    if (typeof def.createGradient === 'function') {\n      return def.createGradient(this.document.ctx, element, opacity);\n    } // pattern\n\n    if (typeof def.createPattern === 'function') {\n      if (def.getHrefAttribute().hasValue()) {\n        var patternTransform = def.getAttribute('patternTransform');\n        def = def.getHrefAttribute().getDefinition();\n        if (patternTransform.hasValue()) {\n          def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n        }\n      }\n      return def.createPattern(this.document.ctx, element, opacity);\n    }\n    return null;\n  }\n  getTextBaseline() {\n    if (!this.hasValue()) {\n      return null;\n    }\n    return Property.textBaselineMapping[this.getString()];\n  }\n  addOpacity(opacity) {\n    var value = this.getColor();\n    var len = value.length;\n    var commas = 0; // Simulate old RGBColor version, which can't parse rgba.\n\n    for (var i = 0; i < len; i++) {\n      if (value[i] === ',') {\n        commas++;\n      }\n      if (commas === 3) {\n        break;\n      }\n    }\n    if (opacity.hasValue() && this.isString() && commas !== 3) {\n      var color = new RGBColor(value);\n      if (color.ok) {\n        color.alpha = opacity.getNumber();\n        value = color.toRGBA();\n      }\n    }\n    return new Property(this.document, this.name, value);\n  }\n}\nProperty.textBaselineMapping = {\n  'baseline': 'alphabetic',\n  'before-edge': 'top',\n  'text-before-edge': 'top',\n  'middle': 'middle',\n  'central': 'middle',\n  'after-edge': 'bottom',\n  'text-after-edge': 'bottom',\n  'ideographic': 'ideographic',\n  'alphabetic': 'alphabetic',\n  'hanging': 'hanging',\n  'mathematical': 'alphabetic'\n};\nclass ViewPort {\n  constructor() {\n    this.viewPorts = [];\n  }\n  clear() {\n    this.viewPorts = [];\n  }\n  setCurrent(width, height) {\n    this.viewPorts.push({\n      width,\n      height\n    });\n  }\n  removeCurrent() {\n    this.viewPorts.pop();\n  }\n  getCurrent() {\n    var {\n      viewPorts\n    } = this;\n    return viewPorts[viewPorts.length - 1];\n  }\n  get width() {\n    return this.getCurrent().width;\n  }\n  get height() {\n    return this.getCurrent().height;\n  }\n  computeSize(d) {\n    if (typeof d === 'number') {\n      return d;\n    }\n    if (d === 'x') {\n      return this.width;\n    }\n    if (d === 'y') {\n      return this.height;\n    }\n    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n  }\n}\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  static parse(point) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var [x = defaultValue, y = defaultValue] = toNumbers(point);\n    return new Point(x, y);\n  }\n  static parseScale(scale) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var [x = defaultValue, y = x] = toNumbers(scale);\n    return new Point(x, y);\n  }\n  static parsePath(path) {\n    var points = toNumbers(path);\n    var len = points.length;\n    var pathPoints = [];\n    for (var i = 0; i < len; i += 2) {\n      pathPoints.push(new Point(points[i], points[i + 1]));\n    }\n    return pathPoints;\n  }\n  angleTo(point) {\n    return Math.atan2(point.y - this.y, point.x - this.x);\n  }\n  applyTransform(transform) {\n    var {\n      x,\n      y\n    } = this;\n    var xp = x * transform[0] + y * transform[2] + transform[4];\n    var yp = x * transform[1] + y * transform[3] + transform[5];\n    this.x = xp;\n    this.y = yp;\n  }\n}\nclass Mouse {\n  constructor(screen) {\n    this.screen = screen;\n    this.working = false;\n    this.events = [];\n    this.eventElements = []; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onClick = this.onClick.bind(this); // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n  isWorking() {\n    return this.working;\n  }\n  start() {\n    if (this.working) {\n      return;\n    }\n    var {\n      screen,\n      onClick,\n      onMouseMove\n    } = this;\n    var canvas = screen.ctx.canvas;\n    canvas.onclick = onClick;\n    canvas.onmousemove = onMouseMove;\n    this.working = true;\n  }\n  stop() {\n    if (!this.working) {\n      return;\n    }\n    var canvas = this.screen.ctx.canvas;\n    this.working = false;\n    canvas.onclick = null;\n    canvas.onmousemove = null;\n  }\n  hasEvents() {\n    return this.working && this.events.length > 0;\n  }\n  runEvents() {\n    if (!this.working) {\n      return;\n    }\n    var {\n      screen: document,\n      events,\n      eventElements\n    } = this;\n    var {\n      style\n    } = document.ctx.canvas;\n    if (style) {\n      style.cursor = '';\n    }\n    events.forEach((_ref, i) => {\n      var {\n        run\n      } = _ref;\n      var element = eventElements[i];\n      while (element) {\n        run(element);\n        element = element.parent;\n      }\n    }); // done running, clear\n\n    this.events = [];\n    this.eventElements = [];\n  }\n  checkPath(element, ctx) {\n    if (!this.working || !ctx) {\n      return;\n    }\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref2, i) => {\n      var {\n        x,\n        y\n      } = _ref2;\n      if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n  checkBoundingBox(element, boundingBox) {\n    if (!this.working || !boundingBox) {\n      return;\n    }\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref3, i) => {\n      var {\n        x,\n        y\n      } = _ref3;\n      if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n  mapXY(x, y) {\n    var {\n      window,\n      ctx\n    } = this.screen;\n    var point = new Point(x, y);\n    var element = ctx.canvas;\n    while (element) {\n      point.x -= element.offsetLeft;\n      point.y -= element.offsetTop;\n      element = element.offsetParent;\n    }\n    if (window.scrollX) {\n      point.x += window.scrollX;\n    }\n    if (window.scrollY) {\n      point.y += window.scrollY;\n    }\n    return point;\n  }\n  onClick(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onclick',\n      x,\n      y,\n      run(eventTarget) {\n        if (eventTarget.onClick) {\n          eventTarget.onClick();\n        }\n      }\n    });\n  }\n  onMouseMove(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onmousemove',\n      x,\n      y,\n      run(eventTarget) {\n        if (eventTarget.onMouseMove) {\n          eventTarget.onMouseMove();\n        }\n      }\n    });\n  }\n}\nvar defaultWindow = typeof window !== 'undefined' ? window : null;\nvar defaultFetch$1 = typeof fetch !== 'undefined' ? fetch.bind(undefined) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n: null;\nclass Screen {\n  constructor(ctx) {\n    var {\n      fetch = defaultFetch$1,\n      window = defaultWindow\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.ctx = ctx;\n    this.FRAMERATE = 30;\n    this.MAX_VIRTUAL_PIXELS = 30000;\n    this.CLIENT_WIDTH = 800;\n    this.CLIENT_HEIGHT = 600;\n    this.viewPort = new ViewPort();\n    this.mouse = new Mouse(this);\n    this.animations = [];\n    this.waits = [];\n    this.frameDuration = 0;\n    this.isReadyLock = false;\n    this.isFirstRender = true;\n    this.intervalId = null;\n    this.window = window;\n    this.fetch = fetch;\n  }\n  wait(checker) {\n    this.waits.push(checker);\n  }\n  ready() {\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    if (!this.readyPromise) {\n      return Promise.resolve();\n    }\n    return this.readyPromise;\n  }\n  isReady() {\n    if (this.isReadyLock) {\n      return true;\n    }\n    var isReadyLock = this.waits.every(_ => _());\n    if (isReadyLock) {\n      this.waits = [];\n      if (this.resolveReady) {\n        this.resolveReady();\n      }\n    }\n    this.isReadyLock = isReadyLock;\n    return isReadyLock;\n  }\n  setDefaults(ctx) {\n    // initial values and defaults\n    ctx.strokeStyle = 'rgba(0,0,0,0)';\n    ctx.lineCap = 'butt';\n    ctx.lineJoin = 'miter';\n    ctx.miterLimit = 4;\n  }\n  setViewBox(_ref) {\n    var {\n      document,\n      ctx,\n      aspectRatio,\n      width,\n      desiredWidth,\n      height,\n      desiredHeight,\n      minX = 0,\n      minY = 0,\n      refX,\n      refY,\n      clip = false,\n      clipX = 0,\n      clipY = 0\n    } = _ref;\n    // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n    var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, ''); // ignore defer\n\n    var [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(' ');\n    var align = aspectRatioAlign || 'xMidYMid';\n    var meetOrSlice = aspectRatioMeetOrSlice || 'meet'; // calculate scale\n\n    var scaleX = width / desiredWidth;\n    var scaleY = height / desiredHeight;\n    var scaleMin = Math.min(scaleX, scaleY);\n    var scaleMax = Math.max(scaleX, scaleY);\n    var finalDesiredWidth = desiredWidth;\n    var finalDesiredHeight = desiredHeight;\n    if (meetOrSlice === 'meet') {\n      finalDesiredWidth *= scaleMin;\n      finalDesiredHeight *= scaleMin;\n    }\n    if (meetOrSlice === 'slice') {\n      finalDesiredWidth *= scaleMax;\n      finalDesiredHeight *= scaleMax;\n    }\n    var refXProp = new Property(document, 'refX', refX);\n    var refYProp = new Property(document, 'refY', refY);\n    var hasRefs = refXProp.hasValue() && refYProp.hasValue();\n    if (hasRefs) {\n      ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n    }\n    if (clip) {\n      var scaledClipX = scaleMin * clipX;\n      var scaledClipY = scaleMin * clipY;\n      ctx.beginPath();\n      ctx.moveTo(scaledClipX, scaledClipY);\n      ctx.lineTo(width, scaledClipY);\n      ctx.lineTo(width, height);\n      ctx.lineTo(scaledClipX, height);\n      ctx.closePath();\n      ctx.clip();\n    }\n    if (!hasRefs) {\n      var isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n      var isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n      var isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n      var isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n      if (align.startsWith('xMid') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0);\n      }\n      if (align.endsWith('YMid') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0);\n      }\n      if (align.startsWith('xMax') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width - finalDesiredWidth, 0);\n      }\n      if (align.endsWith('YMax') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height - finalDesiredHeight);\n      }\n    } // scale\n\n    switch (true) {\n      case align === 'none':\n        ctx.scale(scaleX, scaleY);\n        break;\n      case meetOrSlice === 'meet':\n        ctx.scale(scaleMin, scaleMin);\n        break;\n      case meetOrSlice === 'slice':\n        ctx.scale(scaleMax, scaleMax);\n        break;\n    } // translate\n\n    ctx.translate(-minX, -minY);\n  }\n  start(element) {\n    var {\n      enableRedraw = false,\n      ignoreMouse = false,\n      ignoreAnimation = false,\n      ignoreDimensions = false,\n      ignoreClear = false,\n      forceRedraw,\n      scaleWidth,\n      scaleHeight,\n      offsetX,\n      offsetY\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      FRAMERATE,\n      mouse\n    } = this;\n    var frameDuration = 1000 / FRAMERATE;\n    this.frameDuration = frameDuration;\n    this.readyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n    if (this.isReady()) {\n      this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n    }\n    if (!enableRedraw) {\n      return;\n    }\n    var now = Date.now();\n    var then = now;\n    var delta = 0;\n    var tick = () => {\n      now = Date.now();\n      delta = now - then;\n      if (delta >= frameDuration) {\n        then = now - delta % frameDuration;\n        if (this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n          this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n          mouse.runEvents();\n        }\n      }\n      this.intervalId = requestAnimationFrame(tick);\n    };\n    if (!ignoreMouse) {\n      mouse.start();\n    }\n    this.intervalId = requestAnimationFrame(tick);\n  }\n  stop() {\n    if (this.intervalId) {\n      requestAnimationFrame.cancel(this.intervalId);\n      this.intervalId = null;\n    }\n    this.mouse.stop();\n  }\n  shouldUpdate(ignoreAnimation, forceRedraw) {\n    // need update from animations?\n    if (!ignoreAnimation) {\n      var {\n        frameDuration\n      } = this;\n      var shouldUpdate = this.animations.reduce((shouldUpdate, animation) => animation.update(frameDuration) || shouldUpdate, false);\n      if (shouldUpdate) {\n        return true;\n      }\n    } // need update from redraw?\n\n    if (typeof forceRedraw === 'function' && forceRedraw()) {\n      return true;\n    }\n    if (!this.isReadyLock && this.isReady()) {\n      return true;\n    } // need update from mouse events?\n\n    if (this.mouse.hasEvents()) {\n      return true;\n    }\n    return false;\n  }\n  render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n    var {\n      CLIENT_WIDTH,\n      CLIENT_HEIGHT,\n      viewPort,\n      ctx,\n      isFirstRender\n    } = this;\n    var canvas = ctx.canvas;\n    viewPort.clear();\n    if (canvas.width && canvas.height) {\n      viewPort.setCurrent(canvas.width, canvas.height);\n    } else {\n      viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);\n    }\n    var widthStyle = element.getStyle('width');\n    var heightStyle = element.getStyle('height');\n    if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n      // set canvas size\n      if (widthStyle.hasValue()) {\n        canvas.width = widthStyle.getPixels('x');\n        if (canvas.style) {\n          canvas.style.width = \"\".concat(canvas.width, \"px\");\n        }\n      }\n      if (heightStyle.hasValue()) {\n        canvas.height = heightStyle.getPixels('y');\n        if (canvas.style) {\n          canvas.style.height = \"\".concat(canvas.height, \"px\");\n        }\n      }\n    }\n    var cWidth = canvas.clientWidth || canvas.width;\n    var cHeight = canvas.clientHeight || canvas.height;\n    if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n      cWidth = widthStyle.getPixels('x');\n      cHeight = heightStyle.getPixels('y');\n    }\n    viewPort.setCurrent(cWidth, cHeight);\n    if (typeof offsetX === 'number') {\n      element.getAttribute('x', true).setValue(offsetX);\n    }\n    if (typeof offsetY === 'number') {\n      element.getAttribute('y', true).setValue(offsetY);\n    }\n    if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n      var viewBox = toNumbers(element.getAttribute('viewBox').getString());\n      var xRatio = 0;\n      var yRatio = 0;\n      if (typeof scaleWidth === 'number') {\n        var _widthStyle = element.getStyle('width');\n        if (_widthStyle.hasValue()) {\n          xRatio = _widthStyle.getPixels('x') / scaleWidth;\n        } else if (!isNaN(viewBox[2])) {\n          xRatio = viewBox[2] / scaleWidth;\n        }\n      }\n      if (typeof scaleHeight === 'number') {\n        var _heightStyle = element.getStyle('height');\n        if (_heightStyle.hasValue()) {\n          yRatio = _heightStyle.getPixels('y') / scaleHeight;\n        } else if (!isNaN(viewBox[3])) {\n          yRatio = viewBox[3] / scaleHeight;\n        }\n      }\n      if (!xRatio) {\n        xRatio = yRatio;\n      }\n      if (!yRatio) {\n        yRatio = xRatio;\n      }\n      element.getAttribute('width', true).setValue(scaleWidth);\n      element.getAttribute('height', true).setValue(scaleHeight);\n      var transformStyle = element.getStyle('transform', true, true);\n      transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1.0 / xRatio, \", \").concat(1.0 / yRatio, \")\"));\n    } // clear and render\n\n    if (!ignoreClear) {\n      ctx.clearRect(0, 0, cWidth, cHeight);\n    }\n    element.render(ctx);\n    if (isFirstRender) {\n      this.isFirstRender = false;\n    }\n  }\n}\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch$1;\nvar {\n  defaultFetch\n} = Screen;\nvar DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : null;\nclass Parser {\n  constructor() {\n    var {\n      fetch = defaultFetch,\n      DOMParser = DefaultDOMParser\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.fetch = fetch;\n    this.DOMParser = DOMParser;\n  }\n  parse(resource) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (resource.startsWith('<')) {\n        return _this.parseFromString(resource);\n      }\n      return _this.load(resource);\n    })();\n  }\n  parseFromString(xml) {\n    var parser = new this.DOMParser();\n    try {\n      return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n    } catch (err) {\n      return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n    }\n  }\n  checkDocument(document) {\n    var parserError = document.getElementsByTagName('parsererror')[0];\n    if (parserError) {\n      throw new Error(parserError.textContent);\n    }\n    return document;\n  }\n  load(url) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var response = yield _this2.fetch(url);\n      var xml = yield response.text();\n      return _this2.parseFromString(xml);\n    })();\n  }\n}\nclass Translate {\n  constructor(_, point) {\n    this.type = 'translate';\n    this.point = null;\n    this.point = Point.parse(point);\n  }\n  apply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(x || 0.0, y || 0.0);\n  }\n  unapply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(-1.0 * x || 0.0, -1.0 * y || 0.0);\n  }\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.point;\n    point.applyTransform([1, 0, 0, 1, x || 0.0, y || 0.0]);\n  }\n}\nclass Rotate {\n  constructor(document, rotate, transformOrigin) {\n    this.type = 'rotate';\n    this.angle = null;\n    this.originX = null;\n    this.originY = null;\n    this.cx = 0;\n    this.cy = 0;\n    var numbers = toNumbers(rotate);\n    this.angle = new Property(document, 'angle', numbers[0]);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n    this.cx = numbers[1] || 0;\n    this.cy = numbers[2] || 0;\n  }\n  apply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n  unapply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(-1.0 * angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n  applyToPoint(point) {\n    var {\n      cx,\n      cy,\n      angle\n    } = this;\n    var rad = angle.getRadians();\n    point.applyTransform([1, 0, 0, 1, cx || 0.0, cy || 0.0 // this.p.y\n    ]);\n    point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);\n    point.applyTransform([1, 0, 0, 1, -cx || 0.0, -cy || 0.0 // -this.p.y\n    ]);\n  }\n}\nclass Scale {\n  constructor(_, scale, transformOrigin) {\n    this.type = 'scale';\n    this.scale = null;\n    this.originX = null;\n    this.originY = null;\n    var scaleSize = Point.parseScale(scale); // Workaround for node-canvas\n\n    if (scaleSize.x === 0 || scaleSize.y === 0) {\n      scaleSize.x = PSEUDO_ZERO;\n      scaleSize.y = PSEUDO_ZERO;\n    }\n    this.scale = scaleSize;\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n  apply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(x, y || x);\n    ctx.translate(-tx, -ty);\n  }\n  unapply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(1.0 / x, 1.0 / y || x);\n    ctx.translate(-tx, -ty);\n  }\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.scale;\n    point.applyTransform([x || 0.0, 0, 0, y || 0.0, 0, 0]);\n  }\n}\nclass Matrix {\n  constructor(_, matrix, transformOrigin) {\n    this.type = 'matrix';\n    this.matrix = [];\n    this.originX = null;\n    this.originY = null;\n    this.matrix = toNumbers(matrix);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n  apply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    ctx.translate(-tx, -ty);\n  }\n  unapply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var a = matrix[0];\n    var b = matrix[2];\n    var c = matrix[4];\n    var d = matrix[1];\n    var e = matrix[3];\n    var f = matrix[5];\n    var g = 0.0;\n    var h = 0.0;\n    var i = 1.0;\n    var det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n    ctx.translate(-tx, -ty);\n  }\n  applyToPoint(point) {\n    point.applyTransform(this.matrix);\n  }\n}\nclass Skew extends Matrix {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skew';\n    this.angle = null;\n    this.angle = new Property(document, 'angle', skew);\n  }\n}\nclass SkewX extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewX';\n    this.matrix = [1, 0, Math.tan(this.angle.getRadians()), 1, 0, 0];\n  }\n}\nclass SkewY extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewY';\n    this.matrix = [1, Math.tan(this.angle.getRadians()), 0, 1, 0, 0];\n  }\n}\nfunction parseTransforms(transform) {\n  return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\nfunction parseTransform(transform) {\n  var [type, value] = transform.split('(');\n  return [type.trim(), value.trim().replace(')', '')];\n}\nclass Transform {\n  constructor(document, transform, transformOrigin) {\n    this.document = document;\n    this.transforms = [];\n    var data = parseTransforms(transform);\n    data.forEach(transform => {\n      if (transform === 'none') {\n        return;\n      }\n      var [type, value] = parseTransform(transform);\n      var TransformType = Transform.transformTypes[type];\n      if (typeof TransformType !== 'undefined') {\n        this.transforms.push(new TransformType(this.document, value, transformOrigin));\n      }\n    });\n  }\n  static fromElement(document, element) {\n    var transformStyle = element.getStyle('transform', false, true);\n    var [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle('transform-origin', false, true).split();\n    var transformOrigin = [transformOriginXProperty, transformOriginYProperty];\n    if (transformStyle.hasValue()) {\n      return new Transform(document, transformStyle.getString(), transformOrigin);\n    }\n    return null;\n  }\n  apply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n    for (var i = 0; i < len; i++) {\n      transforms[i].apply(ctx);\n    }\n  }\n  unapply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n    for (var i = len - 1; i >= 0; i--) {\n      transforms[i].unapply(ctx);\n    }\n  } // TODO: applyToPoint unused ... remove?\n\n  applyToPoint(point) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n    for (var i = 0; i < len; i++) {\n      transforms[i].applyToPoint(point);\n    }\n  }\n}\nTransform.transformTypes = {\n  translate: Translate,\n  rotate: Rotate,\n  scale: Scale,\n  matrix: Matrix,\n  skewX: SkewX,\n  skewY: SkewY\n};\nclass Element {\n  constructor(document, node) {\n    var captureTextNodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.document = document;\n    this.node = node;\n    this.captureTextNodes = captureTextNodes;\n    this.attributes = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.animationFrozen = false;\n    this.animationFrozenValue = '';\n    this.parent = null;\n    this.children = [];\n    if (!node || node.nodeType !== 1) {\n      // ELEMENT_NODE\n      return;\n    } // add attributes\n\n    Array.from(node.attributes).forEach(attribute => {\n      var nodeName = normalizeAttributeName(attribute.nodeName);\n      this.attributes[nodeName] = new Property(document, nodeName, attribute.value);\n    });\n    this.addStylesFromStyleDefinition(); // add inline styles\n\n    if (this.getAttribute('style').hasValue()) {\n      var styles = this.getAttribute('style').getString().split(';').map(_ => _.trim());\n      styles.forEach(style => {\n        if (!style) {\n          return;\n        }\n        var [name, value] = style.split(':').map(_ => _.trim());\n        this.styles[name] = new Property(document, name, value);\n      });\n    }\n    var {\n      definitions\n    } = document;\n    var id = this.getAttribute('id'); // add id\n\n    if (id.hasValue()) {\n      if (!definitions[id.getString()]) {\n        definitions[id.getString()] = this;\n      }\n    }\n    Array.from(node.childNodes).forEach(childNode => {\n      if (childNode.nodeType === 1) {\n        this.addChild(childNode); // ELEMENT_NODE\n      } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n        var textNode = document.createTextNode(childNode);\n        if (textNode.getText().length > 0) {\n          this.addChild(textNode); // TEXT_NODE\n        }\n      }\n    });\n  }\n  getAttribute(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var attr = this.attributes[name];\n    if (!attr && createIfNotExists) {\n      var _attr = new Property(this.document, name, '');\n      this.attributes[name] = _attr;\n      return _attr;\n    }\n    return attr || Property.empty(this.document);\n  }\n  getHrefAttribute() {\n    for (var key in this.attributes) {\n      if (key === 'href' || key.endsWith(':href')) {\n        return this.attributes[key];\n      }\n    }\n    return Property.empty(this.document);\n  }\n  getStyle(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var skipAncestors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var style = this.styles[name];\n    if (style) {\n      return style;\n    }\n    var attr = this.getAttribute(name);\n    if (attr !== null && attr !== void 0 && attr.hasValue()) {\n      this.styles[name] = attr; // move up to me to cache\n\n      return attr;\n    }\n    if (!skipAncestors) {\n      var {\n        parent\n      } = this;\n      if (parent) {\n        var parentStyle = parent.getStyle(name);\n        if (parentStyle !== null && parentStyle !== void 0 && parentStyle.hasValue()) {\n          return parentStyle;\n        }\n      }\n    }\n    if (createIfNotExists) {\n      var _style = new Property(this.document, name, '');\n      this.styles[name] = _style;\n      return _style;\n    }\n    return style || Property.empty(this.document);\n  }\n  render(ctx) {\n    // don't render display=none\n    // don't render visibility=hidden\n    if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n      return;\n    }\n    ctx.save();\n    if (this.getStyle('mask').hasValue()) {\n      // mask\n      var mask = this.getStyle('mask').getDefinition();\n      if (mask) {\n        this.applyEffects(ctx);\n        mask.apply(ctx, this);\n      }\n    } else if (this.getStyle('filter').getValue('none') !== 'none') {\n      // filter\n      var filter = this.getStyle('filter').getDefinition();\n      if (filter) {\n        this.applyEffects(ctx);\n        filter.apply(ctx, this);\n      }\n    } else {\n      this.setContext(ctx);\n      this.renderChildren(ctx);\n      this.clearContext(ctx);\n    }\n    ctx.restore();\n  }\n  setContext(_) {// NO RENDER\n  }\n  applyEffects(ctx) {\n    // transform\n    var transform = Transform.fromElement(this.document, this);\n    if (transform) {\n      transform.apply(ctx);\n    } // clip\n\n    var clipPathStyleProp = this.getStyle('clip-path', false, true);\n    if (clipPathStyleProp.hasValue()) {\n      var clip = clipPathStyleProp.getDefinition();\n      if (clip) {\n        clip.apply(ctx);\n      }\n    }\n  }\n  clearContext(_) {// NO RENDER\n  }\n  renderChildren(ctx) {\n    this.children.forEach(child => {\n      child.render(ctx);\n    });\n  }\n  addChild(childNode) {\n    var child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n    child.parent = this;\n    if (!Element.ignoreChildTypes.includes(child.type)) {\n      this.children.push(child);\n    }\n  }\n  matchesSelector(selector) {\n    var _node$getAttribute;\n    var {\n      node\n    } = this;\n    if (typeof node.matches === 'function') {\n      return node.matches(selector);\n    }\n    var styleClasses = (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, 'class');\n    if (!styleClasses || styleClasses === '') {\n      return false;\n    }\n    return styleClasses.split(' ').some(styleClass => \".\".concat(styleClass) === selector);\n  }\n  addStylesFromStyleDefinition() {\n    var {\n      styles,\n      stylesSpecificity\n    } = this.document;\n    for (var selector in styles) {\n      if (!selector.startsWith('@') && this.matchesSelector(selector)) {\n        var style = styles[selector];\n        var specificity = stylesSpecificity[selector];\n        if (style) {\n          for (var name in style) {\n            var existingSpecificity = this.stylesSpecificity[name];\n            if (typeof existingSpecificity === 'undefined') {\n              existingSpecificity = '000';\n            }\n            if (specificity >= existingSpecificity) {\n              this.styles[name] = style[name];\n              this.stylesSpecificity[name] = specificity;\n            }\n          }\n        }\n      }\n    }\n  }\n  removeStyles(element, ignoreStyles) {\n    var toRestore = ignoreStyles.reduce((toRestore, name) => {\n      var styleProp = element.getStyle(name);\n      if (!styleProp.hasValue()) {\n        return toRestore;\n      }\n      var value = styleProp.getString();\n      styleProp.setValue('');\n      return [...toRestore, [name, value]];\n    }, []);\n    return toRestore;\n  }\n  restoreStyles(element, styles) {\n    styles.forEach(_ref => {\n      var [name, value] = _ref;\n      element.getStyle(name, true).setValue(value);\n    });\n  }\n  isFirstChild() {\n    var _this$parent;\n    return ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.children.indexOf(this)) === 0;\n  }\n}\nElement.ignoreChildTypes = ['title'];\nclass UnknownElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n  }\n}\nfunction wrapFontFamily(fontFamily) {\n  var trimmed = fontFamily.trim();\n  return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\nfunction prepareFontFamily(fontFamily) {\n  return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\r\n * @param fontStyle\r\n * @returns CSS font style.\r\n */\n\nfunction prepareFontStyle(fontStyle) {\n  if (!fontStyle) {\n    return '';\n  }\n  var targetFontStyle = fontStyle.trim().toLowerCase();\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle;\n    default:\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle;\n      }\n      return '';\n  }\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\r\n * @param fontWeight\r\n * @returns CSS font weight.\r\n */\n\nfunction prepareFontWeight(fontWeight) {\n  if (!fontWeight) {\n    return '';\n  }\n  var targetFontWeight = fontWeight.trim().toLowerCase();\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight;\n    default:\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight;\n      }\n      return '';\n  }\n}\nclass Font {\n  constructor(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n    var inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n    this.fontFamily = fontFamily || inheritFont.fontFamily;\n    this.fontSize = fontSize || inheritFont.fontSize;\n    this.fontStyle = fontStyle || inheritFont.fontStyle;\n    this.fontWeight = fontWeight || inheritFont.fontWeight;\n    this.fontVariant = fontVariant || inheritFont.fontVariant;\n  }\n  static parse() {\n    var font = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var inherit = arguments.length > 1 ? arguments[1] : undefined;\n    var fontStyle = '';\n    var fontVariant = '';\n    var fontWeight = '';\n    var fontSize = '';\n    var fontFamily = '';\n    var parts = compressSpaces(font).trim().split(' ');\n    var set = {\n      fontSize: false,\n      fontStyle: false,\n      fontWeight: false,\n      fontVariant: false\n    };\n    parts.forEach(part => {\n      switch (true) {\n        case !set.fontStyle && Font.styles.includes(part):\n          if (part !== 'inherit') {\n            fontStyle = part;\n          }\n          set.fontStyle = true;\n          break;\n        case !set.fontVariant && Font.variants.includes(part):\n          if (part !== 'inherit') {\n            fontVariant = part;\n          }\n          set.fontStyle = true;\n          set.fontVariant = true;\n          break;\n        case !set.fontWeight && Font.weights.includes(part):\n          if (part !== 'inherit') {\n            fontWeight = part;\n          }\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          break;\n        case !set.fontSize:\n          if (part !== 'inherit') {\n            [fontSize] = part.split('/');\n          }\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          set.fontSize = true;\n          break;\n        default:\n          if (part !== 'inherit') {\n            fontFamily += part;\n          }\n      }\n    });\n    return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n  }\n  toString() {\n    return [prepareFontStyle(this.fontStyle), this.fontVariant, prepareFontWeight(this.fontWeight), this.fontSize,\n    // Wrap fontFamily only on nodejs and only for canvas.ctx\n    prepareFontFamily(this.fontFamily)].join(' ').trim();\n  }\n}\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\nclass BoundingBox {\n  constructor() {\n    var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NaN;\n    var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.NaN;\n    var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.NaN;\n    var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Number.NaN;\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n  get x() {\n    return this.x1;\n  }\n  get y() {\n    return this.y1;\n  }\n  get width() {\n    return this.x2 - this.x1;\n  }\n  get height() {\n    return this.y2 - this.y1;\n  }\n  addPoint(x, y) {\n    if (typeof x !== 'undefined') {\n      if (isNaN(this.x1) || isNaN(this.x2)) {\n        this.x1 = x;\n        this.x2 = x;\n      }\n      if (x < this.x1) {\n        this.x1 = x;\n      }\n      if (x > this.x2) {\n        this.x2 = x;\n      }\n    }\n    if (typeof y !== 'undefined') {\n      if (isNaN(this.y1) || isNaN(this.y2)) {\n        this.y1 = y;\n        this.y2 = y;\n      }\n      if (y < this.y1) {\n        this.y1 = y;\n      }\n      if (y > this.y2) {\n        this.y2 = y;\n      }\n    }\n  }\n  addX(x) {\n    this.addPoint(x, null);\n  }\n  addY(y) {\n    this.addPoint(null, y);\n  }\n  addBoundingBox(boundingBox) {\n    if (!boundingBox) {\n      return;\n    }\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = boundingBox;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n  sumCubic(t, p0, p1, p2, p3) {\n    return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n  }\n  bezierCurveAdd(forX, p0, p1, p2, p3) {\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var c = 3 * p1 - 3 * p0;\n    if (a === 0) {\n      if (b === 0) {\n        return;\n      }\n      var t = -c / b;\n      if (0 < t && t < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t, p0, p1, p2, p3));\n        }\n      }\n      return;\n    }\n    var b2ac = Math.pow(b, 2) - 4 * c * a;\n    if (b2ac < 0) {\n      return;\n    }\n    var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n    if (0 < t1 && t1 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n      }\n    }\n    var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n    if (0 < t2 && t2 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n      }\n    }\n  } // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n\n  addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n    this.addPoint(p0x, p0y);\n    this.addPoint(p3x, p3y);\n    this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n    this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n  }\n  addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n    var cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    var cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n  }\n  isPointInBox(x, y) {\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = this;\n    return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n  }\n}\nclass PathParser extends SVGPathData {\n  constructor(path) {\n    super(path // Fix spaces after signs.\n    .replace(/([+\\-.])\\s+/gm, '$1') // Remove invalid part.\n    .replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g, ''));\n    this.control = null;\n    this.start = null;\n    this.current = null;\n    this.command = null;\n    this.commands = this.commands;\n    this.i = -1;\n    this.previousCommand = null;\n    this.points = [];\n    this.angles = [];\n  }\n  reset() {\n    this.i = -1;\n    this.command = null;\n    this.previousCommand = null;\n    this.start = new Point(0, 0);\n    this.control = new Point(0, 0);\n    this.current = new Point(0, 0);\n    this.points = [];\n    this.angles = [];\n  }\n  isEnd() {\n    var {\n      i,\n      commands\n    } = this;\n    return i >= commands.length - 1;\n  }\n  next() {\n    var command = this.commands[++this.i];\n    this.previousCommand = this.command;\n    this.command = command;\n    return command;\n  }\n  getPoint() {\n    var xProp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'x';\n    var yProp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'y';\n    var point = new Point(this.command[xProp], this.command[yProp]);\n    return this.makeAbsolute(point);\n  }\n  getAsControlPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.control = point;\n    return point;\n  }\n  getAsCurrentPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.current = point;\n    return point;\n  }\n  getReflectedControlPoint() {\n    var previousCommand = this.previousCommand.type;\n    if (previousCommand !== SVGPathData.CURVE_TO && previousCommand !== SVGPathData.SMOOTH_CURVE_TO && previousCommand !== SVGPathData.QUAD_TO && previousCommand !== SVGPathData.SMOOTH_QUAD_TO) {\n      return this.current;\n    } // reflect point\n\n    var {\n      current: {\n        x: cx,\n        y: cy\n      },\n      control: {\n        x: ox,\n        y: oy\n      }\n    } = this;\n    var point = new Point(2 * cx - ox, 2 * cy - oy);\n    return point;\n  }\n  makeAbsolute(point) {\n    if (this.command.relative) {\n      var {\n        x,\n        y\n      } = this.current;\n      point.x += x;\n      point.y += y;\n    }\n    return point;\n  }\n  addMarker(point, from, priorTo) {\n    var {\n      points,\n      angles\n    } = this; // if the last angle isn't filled in because we didn't have this point yet ...\n\n    if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n      angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n    }\n    this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n  }\n  addMarkerAngle(point, angle) {\n    this.points.push(point);\n    this.angles.push(angle);\n  }\n  getMarkerPoints() {\n    return this.points;\n  }\n  getMarkerAngles() {\n    var {\n      angles\n    } = this;\n    var len = angles.length;\n    for (var i = 0; i < len; i++) {\n      if (!angles[i]) {\n        for (var j = i + 1; j < len; j++) {\n          if (angles[j]) {\n            angles[i] = angles[j];\n            break;\n          }\n        }\n      }\n    }\n    return angles;\n  }\n}\nclass RenderedElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.modifiedEmSizeStack = false;\n  }\n  calculateOpacity() {\n    var opacity = 1.0; // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n\n    var element = this;\n    while (element) {\n      var opacityStyle = element.getStyle('opacity', false, true); // no ancestors on style call\n\n      if (opacityStyle.hasValue(true)) {\n        opacity *= opacityStyle.getNumber();\n      }\n      element = element.parent;\n    }\n    return opacity;\n  }\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!fromMeasure) {\n      // causes stack overflow when measuring text with gradients\n      // fill\n      var fillStyleProp = this.getStyle('fill');\n      var fillOpacityStyleProp = this.getStyle('fill-opacity');\n      var strokeStyleProp = this.getStyle('stroke');\n      var strokeOpacityProp = this.getStyle('stroke-opacity');\n      if (fillStyleProp.isUrlDefinition()) {\n        var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n        if (fillStyle) {\n          ctx.fillStyle = fillStyle;\n        }\n      } else if (fillStyleProp.hasValue()) {\n        if (fillStyleProp.getString() === 'currentColor') {\n          fillStyleProp.setValue(this.getStyle('color').getColor());\n        }\n        var _fillStyle = fillStyleProp.getColor();\n        if (_fillStyle !== 'inherit') {\n          ctx.fillStyle = _fillStyle === 'none' ? 'rgba(0,0,0,0)' : _fillStyle;\n        }\n      }\n      if (fillOpacityStyleProp.hasValue()) {\n        var _fillStyle2 = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n        ctx.fillStyle = _fillStyle2;\n      } // stroke\n\n      if (strokeStyleProp.isUrlDefinition()) {\n        var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n        if (strokeStyle) {\n          ctx.strokeStyle = strokeStyle;\n        }\n      } else if (strokeStyleProp.hasValue()) {\n        if (strokeStyleProp.getString() === 'currentColor') {\n          strokeStyleProp.setValue(this.getStyle('color').getColor());\n        }\n        var _strokeStyle = strokeStyleProp.getString();\n        if (_strokeStyle !== 'inherit') {\n          ctx.strokeStyle = _strokeStyle === 'none' ? 'rgba(0,0,0,0)' : _strokeStyle;\n        }\n      }\n      if (strokeOpacityProp.hasValue()) {\n        var _strokeStyle2 = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n        ctx.strokeStyle = _strokeStyle2;\n      }\n      var strokeWidthStyleProp = this.getStyle('stroke-width');\n      if (strokeWidthStyleProp.hasValue()) {\n        var newLineWidth = strokeWidthStyleProp.getPixels();\n        ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n        : newLineWidth;\n      }\n      var strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n      var strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n      var strokeMiterlimitProp = this.getStyle('stroke-miterlimit'); // NEED TEST\n      // const pointOrderStyleProp = this.getStyle('paint-order');\n\n      var strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n      var strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n      if (strokeLinecapStyleProp.hasValue()) {\n        ctx.lineCap = strokeLinecapStyleProp.getString();\n      }\n      if (strokeLinejoinStyleProp.hasValue()) {\n        ctx.lineJoin = strokeLinejoinStyleProp.getString();\n      }\n      if (strokeMiterlimitProp.hasValue()) {\n        ctx.miterLimit = strokeMiterlimitProp.getNumber();\n      } // NEED TEST\n      // if (pointOrderStyleProp.hasValue()) {\n      // \t// ?\n      // \tctx.paintOrder = pointOrderStyleProp.getValue();\n      // }\n\n      if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n        var gaps = toNumbers(strokeDasharrayStyleProp.getString());\n        if (typeof ctx.setLineDash !== 'undefined') {\n          ctx.setLineDash(gaps);\n        } else\n          // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDash !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDash = gaps;\n          } else\n            // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDash = gaps;\n            }\n        var offset = strokeDashoffsetProp.getPixels();\n        if (typeof ctx.lineDashOffset !== 'undefined') {\n          ctx.lineDashOffset = offset;\n        } else\n          // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDashOffset = offset;\n          } else\n            // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDashOffset !== 'undefined') {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDashOffset = offset;\n            }\n      }\n    } // font\n\n    this.modifiedEmSizeStack = false;\n    if (typeof ctx.font !== 'undefined') {\n      var fontStyleProp = this.getStyle('font');\n      var fontStyleStyleProp = this.getStyle('font-style');\n      var fontVariantStyleProp = this.getStyle('font-variant');\n      var fontWeightStyleProp = this.getStyle('font-weight');\n      var fontSizeStyleProp = this.getStyle('font-size');\n      var fontFamilyStyleProp = this.getStyle('font-family');\n      var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n      fontStyleStyleProp.setValue(font.fontStyle);\n      fontVariantStyleProp.setValue(font.fontVariant);\n      fontWeightStyleProp.setValue(font.fontWeight);\n      fontSizeStyleProp.setValue(font.fontSize);\n      fontFamilyStyleProp.setValue(font.fontFamily);\n      ctx.font = font.toString();\n      if (fontSizeStyleProp.isPixels()) {\n        this.document.emSize = fontSizeStyleProp.getPixels();\n        this.modifiedEmSizeStack = true;\n      }\n    }\n    if (!fromMeasure) {\n      // effects\n      this.applyEffects(ctx); // opacity\n\n      ctx.globalAlpha = this.calculateOpacity();\n    }\n  }\n  clearContext(ctx) {\n    super.clearContext(ctx);\n    if (this.modifiedEmSizeStack) {\n      this.document.popEmSize();\n    }\n  }\n}\nclass PathElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'path';\n    this.pathParser = null;\n    this.pathParser = new PathParser(this.getAttribute('d').getString());\n  }\n  path(ctx) {\n    var {\n      pathParser\n    } = this;\n    var boundingBox = new BoundingBox();\n    pathParser.reset();\n    if (ctx) {\n      ctx.beginPath();\n    }\n    while (!pathParser.isEnd()) {\n      switch (pathParser.next().type) {\n        case PathParser.MOVE_TO:\n          this.pathM(ctx, boundingBox);\n          break;\n        case PathParser.LINE_TO:\n          this.pathL(ctx, boundingBox);\n          break;\n        case PathParser.HORIZ_LINE_TO:\n          this.pathH(ctx, boundingBox);\n          break;\n        case PathParser.VERT_LINE_TO:\n          this.pathV(ctx, boundingBox);\n          break;\n        case PathParser.CURVE_TO:\n          this.pathC(ctx, boundingBox);\n          break;\n        case PathParser.SMOOTH_CURVE_TO:\n          this.pathS(ctx, boundingBox);\n          break;\n        case PathParser.QUAD_TO:\n          this.pathQ(ctx, boundingBox);\n          break;\n        case PathParser.SMOOTH_QUAD_TO:\n          this.pathT(ctx, boundingBox);\n          break;\n        case PathParser.ARC:\n          this.pathA(ctx, boundingBox);\n          break;\n        case PathParser.CLOSE_PATH:\n          this.pathZ(ctx, boundingBox);\n          break;\n      }\n    }\n    return boundingBox;\n  }\n  getBoundingBox(_) {\n    return this.path();\n  }\n  getMarkers() {\n    var {\n      pathParser\n    } = this;\n    var points = pathParser.getMarkerPoints();\n    var angles = pathParser.getMarkerAngles();\n    var markers = points.map((point, i) => [point, angles[i]]);\n    return markers;\n  }\n  renderChildren(ctx) {\n    this.path(ctx);\n    this.document.screen.mouse.checkPath(this, ctx);\n    var fillRuleStyleProp = this.getStyle('fill-rule');\n    if (ctx.fillStyle !== '') {\n      if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n        ctx.fill(fillRuleStyleProp.getString());\n      } else {\n        ctx.fill();\n      }\n    }\n    if (ctx.strokeStyle !== '') {\n      if (this.getAttribute('vector-effect').getString() === 'non-scaling-stroke') {\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.stroke();\n      }\n    }\n    var markers = this.getMarkers();\n    if (markers) {\n      var markersLastIndex = markers.length - 1;\n      var markerStartStyleProp = this.getStyle('marker-start');\n      var markerMidStyleProp = this.getStyle('marker-mid');\n      var markerEndStyleProp = this.getStyle('marker-end');\n      if (markerStartStyleProp.isUrlDefinition()) {\n        var marker = markerStartStyleProp.getDefinition();\n        var [point, angle] = markers[0];\n        marker.render(ctx, point, angle);\n      }\n      if (markerMidStyleProp.isUrlDefinition()) {\n        var _marker = markerMidStyleProp.getDefinition();\n        for (var i = 1; i < markersLastIndex; i++) {\n          var [_point, _angle] = markers[i];\n          _marker.render(ctx, _point, _angle);\n        }\n      }\n      if (markerEndStyleProp.isUrlDefinition()) {\n        var _marker2 = markerEndStyleProp.getDefinition();\n        var [_point2, _angle2] = markers[markersLastIndex];\n        _marker2.render(ctx, _point2, _angle2);\n      }\n    }\n  }\n  static pathM(pathParser) {\n    var point = pathParser.getAsCurrentPoint();\n    pathParser.start = pathParser.current;\n    return {\n      point\n    };\n  }\n  pathM(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      point\n    } = PathElement.pathM(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point);\n    boundingBox.addPoint(x, y);\n    if (ctx) {\n      ctx.moveTo(x, y);\n    }\n  }\n  static pathL(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point\n    };\n  }\n  pathL(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathL(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n  static pathH(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point((command.relative ? current.x : 0) + command.x, current.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n  pathH(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathH(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n  static pathV(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point(current.x, (command.relative ? current.y : 0) + command.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n  pathV(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathV(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n  static pathC(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getPoint('x1', 'y1');\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n  pathC(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n  static pathS(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getReflectedControlPoint();\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n  pathS(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n  static pathQ(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getAsControlPoint('x1', 'y1');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n  pathQ(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n  static pathT(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getReflectedControlPoint();\n    pathParser.control = controlPoint;\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n  pathT(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n  static pathA(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var {\n      rX,\n      rY,\n      xRot,\n      lArcFlag,\n      sweepFlag\n    } = command;\n    var xAxisRotation = xRot * (Math.PI / 180.0);\n    var currentPoint = pathParser.getAsCurrentPoint(); // Conversion from endpoint to center parameterization\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    // x1', y1'\n\n    var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n    var l = Math.pow(currp.x, 2) / Math.pow(rX, 2) + Math.pow(currp.y, 2) / Math.pow(rY, 2);\n    if (l > 1) {\n      rX *= Math.sqrt(l);\n      rY *= Math.sqrt(l);\n    } // cx', cy'\n\n    var s = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rX, 2) * Math.pow(rY, 2) - Math.pow(rX, 2) * Math.pow(currp.y, 2) - Math.pow(rY, 2) * Math.pow(currp.x, 2)) / (Math.pow(rX, 2) * Math.pow(currp.y, 2) + Math.pow(rY, 2) * Math.pow(currp.x, 2)));\n    if (isNaN(s)) {\n      s = 0;\n    }\n    var cpp = new Point(s * rX * currp.y / rY, s * -rY * currp.x / rX); // cx, cy\n\n    var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n    var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY]); // θ1\n    // angle delta\n\n    var u = [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY];\n    var v = [(-currp.x - cpp.x) / rX, (-currp.y - cpp.y) / rY];\n    var ad = vectorsAngle(u, v); // Δθ\n\n    if (vectorsRatio(u, v) <= -1) {\n      ad = Math.PI;\n    }\n    if (vectorsRatio(u, v) >= 1) {\n      ad = 0;\n    }\n    return {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    };\n  }\n  pathA(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser); // for markers\n\n    var dir = 1 - sweepFlag ? 1.0 : -1.0;\n    var ah = a1 + dir * (ad / 2.0);\n    var halfWay = new Point(centp.x + rX * Math.cos(ah), centp.y + rY * Math.sin(ah));\n    pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n    pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n    boundingBox.addPoint(currentPoint.x, currentPoint.y); // TODO: this is too naive, make it better\n\n    if (ctx && !isNaN(a1) && !isNaN(ad)) {\n      var r = rX > rY ? rX : rY;\n      var sx = rX > rY ? 1 : rX / rY;\n      var sy = rX > rY ? rY / rX : 1;\n      ctx.translate(centp.x, centp.y);\n      ctx.rotate(xAxisRotation);\n      ctx.scale(sx, sy);\n      ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n      ctx.scale(1 / sx, 1 / sy);\n      ctx.rotate(-xAxisRotation);\n      ctx.translate(-centp.x, -centp.y);\n    }\n  }\n  static pathZ(pathParser) {\n    pathParser.current = pathParser.start;\n  }\n  pathZ(ctx, boundingBox) {\n    PathElement.pathZ(this.pathParser);\n    if (ctx) {\n      // only close path if it is not a straight line\n      if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n        ctx.closePath();\n      }\n    }\n  }\n}\nclass GlyphElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'glyph';\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    this.unicode = this.getAttribute('unicode').getString();\n    this.arabicForm = this.getAttribute('arabic-form').getString();\n  }\n}\nclass TextElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TextElement ? true : captureTextNodes);\n    this.type = 'text';\n    this.x = 0;\n    this.y = 0;\n    this.measureCache = -1;\n  }\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    super.setContext(ctx, fromMeasure);\n    var textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n    if (textBaseline) {\n      ctx.textBaseline = textBaseline;\n    }\n  }\n  initializeCoordinates() {\n    this.x = 0;\n    this.y = 0;\n    this.leafTexts = [];\n    this.textChunkStart = 0;\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n  }\n  getBoundingBox(ctx) {\n    if (this.type !== 'text') {\n      return this.getTElementBoundingBox(ctx);\n    } // first, calculate child positions\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx);\n    var boundingBox = null; // then calculate bounding box\n\n    this.children.forEach((_, i) => {\n      var childBoundingBox = this.getChildBoundingBox(ctx, this, this, i);\n      if (!boundingBox) {\n        boundingBox = childBoundingBox;\n      } else {\n        boundingBox.addBoundingBox(childBoundingBox);\n      }\n    });\n    return boundingBox;\n  }\n  getFontSize() {\n    var {\n      document,\n      parent\n    } = this;\n    var inheritFontSize = Font.parse(document.ctx.font).fontSize;\n    var fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n    return fontSize;\n  }\n  getTElementBoundingBox(ctx) {\n    var fontSize = this.getFontSize();\n    return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n  }\n  getGlyph(font, text, i) {\n    var char = text[i];\n    var glyph = null;\n    if (font.isArabic) {\n      var len = text.length;\n      var prevChar = text[i - 1];\n      var nextChar = text[i + 1];\n      var arabicForm = 'isolated';\n      if ((i === 0 || prevChar === ' ') && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'terminal';\n      }\n      if (i > 0 && prevChar !== ' ' && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'medial';\n      }\n      if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n        arabicForm = 'initial';\n      }\n      if (typeof font.glyphs[char] !== 'undefined') {\n        // NEED TEST\n        var maybeGlyph = font.glyphs[char];\n        glyph = maybeGlyph instanceof GlyphElement ? maybeGlyph : maybeGlyph[arabicForm];\n      }\n    } else {\n      glyph = font.glyphs[char];\n    }\n    if (!glyph) {\n      glyph = font.missingGlyph;\n    }\n    return glyph;\n  }\n  getText() {\n    return '';\n  }\n  getTextFromNode(node) {\n    var textNode = node || this.node;\n    var childNodes = Array.from(textNode.parentNode.childNodes);\n    var index = childNodes.indexOf(textNode);\n    var lastIndex = childNodes.length - 1;\n    var text = compressSpaces(\n    // textNode.value\n    // || textNode.text\n    textNode.textContent || '');\n    if (index === 0) {\n      text = trimLeft(text);\n    }\n    if (index === lastIndex) {\n      text = trimRight(text);\n    }\n    return text;\n  }\n  renderChildren(ctx) {\n    if (this.type !== 'text') {\n      this.renderTElementChildren(ctx);\n      return;\n    } // first, calculate child positions\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx); // then render\n\n    this.children.forEach((_, i) => {\n      this.renderChild(ctx, this, this, i);\n    });\n    var {\n      mouse\n    } = this.document.screen; // Do not calc bounding box if mouse is not working.\n\n    if (mouse.isWorking()) {\n      mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n    }\n  }\n  renderTElementChildren(ctx) {\n    var {\n      document,\n      parent\n    } = this;\n    var renderText = this.getText();\n    var customFont = parent.getStyle('font-family').getDefinition();\n    if (customFont) {\n      var {\n        unitsPerEm\n      } = customFont.fontFace;\n      var ctxFont = Font.parse(document.ctx.font);\n      var fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n      var fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n      var scale = fontSize / unitsPerEm;\n      var text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        ctx.translate(this.x, this.y);\n        ctx.scale(scale, -scale);\n        var lw = ctx.lineWidth;\n        ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, .4, 1, 0, 0);\n        }\n        glyph.render(ctx);\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, -.4, 1, 0, 0);\n        }\n        ctx.lineWidth = lw;\n        ctx.scale(1 / scale, -1 / scale);\n        ctx.translate(-this.x, -this.y);\n        this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          this.x += dx[i];\n        }\n      }\n      return;\n    }\n    var {\n      x,\n      y\n    } = this; // NEED TEST\n    // if (ctx.paintOrder === 'stroke') {\n    // \tif (ctx.strokeStyle) {\n    // \t\tctx.strokeText(renderText, x, y);\n    // \t}\n    // \tif (ctx.fillStyle) {\n    // \t\tctx.fillText(renderText, x, y);\n    // \t}\n    // } else {\n\n    if (ctx.fillStyle) {\n      ctx.fillText(renderText, x, y);\n    }\n    if (ctx.strokeStyle) {\n      ctx.strokeText(renderText, x, y);\n    } // }\n  }\n  applyAnchoring() {\n    if (this.textChunkStart >= this.leafTexts.length) {\n      return;\n    } // This is basically the \"Apply anchoring\" part of https://www.w3.org/TR/SVG2/text.html#TextLayoutAlgorithm.\n    // The difference is that we apply the anchoring as soon as a chunk is finished. This saves some extra looping.\n    // Vertical text is not supported.\n\n    var firstElement = this.leafTexts[this.textChunkStart];\n    var textAnchor = firstElement.getStyle('text-anchor').getString('start');\n    var isRTL = false; // we treat RTL like LTR\n\n    var shift = 0;\n    if (textAnchor === 'start' && !isRTL || textAnchor === 'end' && isRTL) {\n      shift = firstElement.x - this.minX;\n    } else if (textAnchor === 'end' && !isRTL || textAnchor === 'start' && isRTL) {\n      shift = firstElement.x - this.maxX;\n    } else {\n      shift = firstElement.x - (this.minX + this.maxX) / 2;\n    }\n    for (var i = this.textChunkStart; i < this.leafTexts.length; i++) {\n      this.leafTexts[i].x += shift;\n    } // start new chunk\n\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.textChunkStart = this.leafTexts.length;\n  }\n  adjustChildCoordinatesRecursive(ctx) {\n    this.children.forEach((_, i) => {\n      this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i);\n    });\n    this.applyAnchoring();\n  }\n  adjustChildCoordinatesRecursiveCore(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n    if (child.children.length > 0) {\n      child.children.forEach((_, i) => {\n        textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i);\n      });\n    } else {\n      // only leafs are relevant\n      this.adjustChildCoordinates(ctx, textParent, parent, i);\n    }\n  }\n  adjustChildCoordinates(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n    if (typeof child.measureText !== 'function') {\n      return child;\n    }\n    ctx.save();\n    child.setContext(ctx, true);\n    var xAttr = child.getAttribute('x');\n    var yAttr = child.getAttribute('y');\n    var dxAttr = child.getAttribute('dx');\n    var dyAttr = child.getAttribute('dy');\n    var customFont = child.getStyle('font-family').getDefinition();\n    var isRTL = Boolean(customFont) && customFont.isRTL;\n    if (i === 0) {\n      // First children inherit attributes from parent(s). Positional attributes\n      // are only inherited from a parent to it's first child.\n      if (!xAttr.hasValue()) {\n        xAttr.setValue(child.getInheritedAttribute('x'));\n      }\n      if (!yAttr.hasValue()) {\n        yAttr.setValue(child.getInheritedAttribute('y'));\n      }\n      if (!dxAttr.hasValue()) {\n        dxAttr.setValue(child.getInheritedAttribute('dx'));\n      }\n      if (!dyAttr.hasValue()) {\n        dyAttr.setValue(child.getInheritedAttribute('dy'));\n      }\n    }\n    var width = child.measureText(ctx);\n    if (isRTL) {\n      textParent.x -= width;\n    }\n    if (xAttr.hasValue()) {\n      // an \"x\" attribute marks the start of a new chunk\n      textParent.applyAnchoring();\n      child.x = xAttr.getPixels('x');\n      if (dxAttr.hasValue()) {\n        child.x += dxAttr.getPixels('x');\n      }\n    } else {\n      if (dxAttr.hasValue()) {\n        textParent.x += dxAttr.getPixels('x');\n      }\n      child.x = textParent.x;\n    }\n    textParent.x = child.x;\n    if (!isRTL) {\n      textParent.x += width;\n    }\n    if (yAttr.hasValue()) {\n      child.y = yAttr.getPixels('y');\n      if (dyAttr.hasValue()) {\n        child.y += dyAttr.getPixels('y');\n      }\n    } else {\n      if (dyAttr.hasValue()) {\n        textParent.y += dyAttr.getPixels('y');\n      }\n      child.y = textParent.y;\n    }\n    textParent.y = child.y; // update the current chunk and it's bounds\n\n    textParent.leafTexts.push(child);\n    textParent.minX = Math.min(textParent.minX, child.x, child.x + width);\n    textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width);\n    child.clearContext(ctx);\n    ctx.restore();\n    return child;\n  }\n  getChildBoundingBox(ctx, textParent, parent, i) {\n    var child = parent.children[i]; // not a text node?\n\n    if (typeof child.getBoundingBox !== 'function') {\n      return null;\n    }\n    var boundingBox = child.getBoundingBox(ctx);\n    if (!boundingBox) {\n      return null;\n    }\n    child.children.forEach((_, i) => {\n      var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n      boundingBox.addBoundingBox(childBoundingBox);\n    });\n    return boundingBox;\n  }\n  renderChild(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n    child.render(ctx);\n    child.children.forEach((_, i) => {\n      textParent.renderChild(ctx, textParent, child, i);\n    });\n  }\n  measureText(ctx) {\n    var {\n      measureCache\n    } = this;\n    if (~measureCache) {\n      return measureCache;\n    }\n    var renderText = this.getText();\n    var measure = this.measureTargetText(ctx, renderText);\n    this.measureCache = measure;\n    return measure;\n  }\n  measureTargetText(ctx, targetText) {\n    if (!targetText.length) {\n      return 0;\n    }\n    var {\n      parent\n    } = this;\n    var customFont = parent.getStyle('font-family').getDefinition();\n    if (customFont) {\n      var fontSize = this.getFontSize();\n      var text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n      var _measure = 0;\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          _measure += dx[i];\n        }\n      }\n      return _measure;\n    }\n    if (!ctx.measureText) {\n      return targetText.length * 10;\n    }\n    ctx.save();\n    this.setContext(ctx, true);\n    var {\n      width: measure\n    } = ctx.measureText(targetText);\n    this.clearContext(ctx);\n    ctx.restore();\n    return measure;\n  }\n  /**\r\n   * Inherits positional attributes from {@link TextElement} parent(s). Attributes\r\n   * are only inherited from a parent to its first child.\r\n   * @param name - The attribute name.\r\n   * @returns The attribute value or null.\r\n   */\n\n  getInheritedAttribute(name) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias,consistent-this\n    var current = this;\n    while (current instanceof TextElement && current.isFirstChild()) {\n      var parentAttr = current.parent.getAttribute(name);\n      if (parentAttr.hasValue(true)) {\n        return parentAttr.getValue('0');\n      }\n      current = current.parent;\n    }\n    return null;\n  }\n}\nclass TSpanElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TSpanElement ? true : captureTextNodes);\n    this.type = 'tspan'; // if this node has children, then they own the text\n\n    this.text = this.children.length > 0 ? '' : this.getTextFromNode();\n  }\n  getText() {\n    return this.text;\n  }\n}\nclass TextNode extends TSpanElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'textNode';\n  }\n}\nclass SVGElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'svg';\n    this.root = false;\n  }\n  setContext(ctx) {\n    var _this$node$parentNode;\n    var {\n      document\n    } = this;\n    var {\n      screen,\n      window\n    } = document;\n    var canvas = ctx.canvas;\n    screen.setDefaults(ctx);\n    if (canvas.style && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n      ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n      var fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n      if (fontSizeProp.hasValue()) {\n        document.rootEmSize = fontSizeProp.getPixels('y');\n        document.emSize = document.rootEmSize;\n      }\n    } // create new view port\n\n    if (!this.getAttribute('x').hasValue()) {\n      this.getAttribute('x', true).setValue(0);\n    }\n    if (!this.getAttribute('y').hasValue()) {\n      this.getAttribute('y', true).setValue(0);\n    }\n    var {\n      width,\n      height\n    } = screen.viewPort;\n    if (!this.getStyle('width').hasValue()) {\n      this.getStyle('width', true).setValue('100%');\n    }\n    if (!this.getStyle('height').hasValue()) {\n      this.getStyle('height', true).setValue('100%');\n    }\n    if (!this.getStyle('color').hasValue()) {\n      this.getStyle('color', true).setValue('black');\n    }\n    var refXAttr = this.getAttribute('refX');\n    var refYAttr = this.getAttribute('refY');\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n    var clip = !this.root && this.getStyle('overflow').getValue('hidden') !== 'visible';\n    var minX = 0;\n    var minY = 0;\n    var clipX = 0;\n    var clipY = 0;\n    if (viewBox) {\n      minX = viewBox[0];\n      minY = viewBox[1];\n    }\n    if (!this.root) {\n      width = this.getStyle('width').getPixels('x');\n      height = this.getStyle('height').getPixels('y');\n      if (this.type === 'marker') {\n        clipX = minX;\n        clipY = minY;\n        minX = 0;\n        minY = 0;\n      }\n    }\n    screen.viewPort.setCurrent(width, height); // Default value of transform-origin is center only for root SVG elements\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform-origin\n\n    if (this.node // is not temporary SVGElement\n    && (!this.parent || ((_this$node$parentNode = this.node.parentNode) === null || _this$node$parentNode === void 0 ? void 0 : _this$node$parentNode.nodeName) === 'foreignObject') && this.getStyle('transform', false, true).hasValue() && !this.getStyle('transform-origin', false, true).hasValue()) {\n      this.getStyle('transform-origin', true, true).setValue('50% 50%');\n    }\n    super.setContext(ctx);\n    ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n    if (viewBox) {\n      width = viewBox[2];\n      height = viewBox[3];\n    }\n    document.setViewBox({\n      ctx,\n      aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n      width: screen.viewPort.width,\n      desiredWidth: width,\n      height: screen.viewPort.height,\n      desiredHeight: height,\n      minX,\n      minY,\n      refX: refXAttr.getValue(),\n      refY: refYAttr.getValue(),\n      clip,\n      clipX,\n      clipY\n    });\n    if (viewBox) {\n      screen.viewPort.removeCurrent();\n      screen.viewPort.setCurrent(width, height);\n    }\n  }\n  clearContext(ctx) {\n    super.clearContext(ctx);\n    this.document.screen.viewPort.removeCurrent();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var widthAttr = this.getAttribute('width', true);\n    var heightAttr = this.getAttribute('height', true);\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var styleAttr = this.getAttribute('style');\n    var originWidth = widthAttr.getNumber(0);\n    var originHeight = heightAttr.getNumber(0);\n    if (preserveAspectRatio) {\n      if (typeof preserveAspectRatio === 'string') {\n        this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n      } else {\n        var preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n        if (preserveAspectRatioAttr.hasValue()) {\n          preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n        }\n      }\n    }\n    widthAttr.setValue(width);\n    heightAttr.setValue(height);\n    if (!viewBoxAttr.hasValue()) {\n      viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n    }\n    if (styleAttr.hasValue()) {\n      var widthStyle = this.getStyle('width');\n      var heightStyle = this.getStyle('height');\n      if (widthStyle.hasValue()) {\n        widthStyle.setValue(\"\".concat(width, \"px\"));\n      }\n      if (heightStyle.hasValue()) {\n        heightStyle.setValue(\"\".concat(height, \"px\"));\n      }\n    }\n  }\n}\nclass RectElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'rect';\n  }\n  path(ctx) {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width', false, true).getPixels('x');\n    var height = this.getStyle('height', false, true).getPixels('y');\n    var rxAttr = this.getAttribute('rx');\n    var ryAttr = this.getAttribute('ry');\n    var rx = rxAttr.getPixels('x');\n    var ry = ryAttr.getPixels('y');\n    if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n      ry = rx;\n    }\n    if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n      rx = ry;\n    }\n    rx = Math.min(rx, width / 2.0);\n    ry = Math.min(ry, height / 2.0);\n    if (ctx) {\n      var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n      ctx.beginPath(); // always start the path so we don't fill prior paths\n\n      if (height > 0 && width > 0) {\n        ctx.moveTo(x + rx, y);\n        ctx.lineTo(x + width - rx, y);\n        ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n        ctx.lineTo(x + width, y + height - ry);\n        ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n        ctx.lineTo(x + rx, y + height);\n        ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n        ctx.lineTo(x, y + ry);\n        ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n        ctx.closePath();\n      }\n    }\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n  getMarkers() {\n    return null;\n  }\n}\nclass CircleElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'circle';\n  }\n  path(ctx) {\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n    var r = this.getAttribute('r').getPixels();\n    if (ctx && r > 0) {\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n      ctx.closePath();\n    }\n    return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n  }\n  getMarkers() {\n    return null;\n  }\n}\nclass EllipseElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'ellipse';\n  }\n  path(ctx) {\n    var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n    var rx = this.getAttribute('rx').getPixels('x');\n    var ry = this.getAttribute('ry').getPixels('y');\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n    if (ctx && rx > 0 && ry > 0) {\n      ctx.beginPath();\n      ctx.moveTo(cx + rx, cy);\n      ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n      ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n      ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n      ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n      ctx.closePath();\n    }\n    return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n  }\n  getMarkers() {\n    return null;\n  }\n}\nclass LineElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'line';\n  }\n  getPoints() {\n    return [new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')), new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))];\n  }\n  path(ctx) {\n    var [{\n      x: x0,\n      y: y0\n    }, {\n      x: x1,\n      y: y1\n    }] = this.getPoints();\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n      ctx.lineTo(x1, y1);\n    }\n    return new BoundingBox(x0, y0, x1, y1);\n  }\n  getMarkers() {\n    var [p0, p1] = this.getPoints();\n    var a = p0.angleTo(p1);\n    return [[p0, a], [p1, a]];\n  }\n}\nclass PolylineElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'polyline';\n    this.points = [];\n    this.points = Point.parsePath(this.getAttribute('points').getString());\n  }\n  path(ctx) {\n    var {\n      points\n    } = this;\n    var [{\n      x: x0,\n      y: y0\n    }] = points;\n    var boundingBox = new BoundingBox(x0, y0);\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n    }\n    points.forEach(_ref => {\n      var {\n        x,\n        y\n      } = _ref;\n      boundingBox.addPoint(x, y);\n      if (ctx) {\n        ctx.lineTo(x, y);\n      }\n    });\n    return boundingBox;\n  }\n  getMarkers() {\n    var {\n      points\n    } = this;\n    var lastIndex = points.length - 1;\n    var markers = [];\n    points.forEach((point, i) => {\n      if (i === lastIndex) {\n        return;\n      }\n      markers.push([point, point.angleTo(points[i + 1])]);\n    });\n    if (markers.length > 0) {\n      markers.push([points[points.length - 1], markers[markers.length - 1][1]]);\n    }\n    return markers;\n  }\n}\nclass PolygonElement extends PolylineElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'polygon';\n  }\n  path(ctx) {\n    var boundingBox = super.path(ctx);\n    var [{\n      x,\n      y\n    }] = this.points;\n    if (ctx) {\n      ctx.lineTo(x, y);\n      ctx.closePath();\n    }\n    return boundingBox;\n  }\n}\nclass PatternElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'pattern';\n  }\n  createPattern(ctx, _, parentOpacityProp) {\n    var width = this.getStyle('width').getPixels('x', true);\n    var height = this.getStyle('height').getPixels('y', true); // render me using a temporary svg element\n\n    var patternSvg = new SVGElement(this.document, null);\n    patternSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    patternSvg.attributes.width = new Property(this.document, 'width', \"\".concat(width, \"px\"));\n    patternSvg.attributes.height = new Property(this.document, 'height', \"\".concat(height, \"px\"));\n    patternSvg.attributes.transform = new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue());\n    patternSvg.children = this.children;\n    var patternCanvas = this.document.createCanvas(width, height);\n    var patternCtx = patternCanvas.getContext('2d');\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n    if (xAttr.hasValue() && yAttr.hasValue()) {\n      patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n    }\n    if (parentOpacityProp.hasValue()) {\n      this.styles['fill-opacity'] = parentOpacityProp;\n    } else {\n      Reflect.deleteProperty(this.styles, 'fill-opacity');\n    } // render 3x3 grid so when we transform there's no white space on edges\n\n    for (var x = -1; x <= 1; x++) {\n      for (var y = -1; y <= 1; y++) {\n        patternCtx.save();\n        patternSvg.attributes.x = new Property(this.document, 'x', x * patternCanvas.width);\n        patternSvg.attributes.y = new Property(this.document, 'y', y * patternCanvas.height);\n        patternSvg.render(patternCtx);\n        patternCtx.restore();\n      }\n    }\n    var pattern = ctx.createPattern(patternCanvas, 'repeat');\n    return pattern;\n  }\n}\nclass MarkerElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'marker';\n  }\n  render(ctx, point, angle) {\n    if (!point) {\n      return;\n    }\n    var {\n      x,\n      y\n    } = point;\n    var orient = this.getAttribute('orient').getString('auto');\n    var markerUnits = this.getAttribute('markerUnits').getString('strokeWidth');\n    ctx.translate(x, y);\n    if (orient === 'auto') {\n      ctx.rotate(angle);\n    }\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(ctx.lineWidth, ctx.lineWidth);\n    }\n    ctx.save(); // render me using a temporary svg element\n\n    var markerSvg = new SVGElement(this.document, null);\n    markerSvg.type = this.type;\n    markerSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    markerSvg.attributes.refX = new Property(this.document, 'refX', this.getAttribute('refX').getValue());\n    markerSvg.attributes.refY = new Property(this.document, 'refY', this.getAttribute('refY').getValue());\n    markerSvg.attributes.width = new Property(this.document, 'width', this.getAttribute('markerWidth').getValue());\n    markerSvg.attributes.height = new Property(this.document, 'height', this.getAttribute('markerHeight').getValue());\n    markerSvg.attributes.overflow = new Property(this.document, 'overflow', this.getAttribute('overflow').getValue());\n    markerSvg.attributes.fill = new Property(this.document, 'fill', this.getAttribute('fill').getColor('black'));\n    markerSvg.attributes.stroke = new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none'));\n    markerSvg.children = this.children;\n    markerSvg.render(ctx);\n    ctx.restore();\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n    }\n    if (orient === 'auto') {\n      ctx.rotate(-angle);\n    }\n    ctx.translate(-x, -y);\n  }\n}\nclass DefsElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'defs';\n  }\n  render() {// NOOP\n  }\n}\nclass GElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'g';\n  }\n  getBoundingBox(ctx) {\n    var boundingBox = new BoundingBox();\n    this.children.forEach(child => {\n      boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n    });\n    return boundingBox;\n  }\n}\nclass GradientElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.attributesToInherit = ['gradientUnits'];\n    this.stops = [];\n    var {\n      stops,\n      children\n    } = this;\n    children.forEach(child => {\n      if (child.type === 'stop') {\n        stops.push(child);\n      }\n    });\n  }\n  getGradientUnits() {\n    return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n  }\n  createGradient(ctx, element, parentOpacityProp) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n    var stopsContainer = this;\n    if (this.getHrefAttribute().hasValue()) {\n      stopsContainer = this.getHrefAttribute().getDefinition();\n      this.inheritStopContainer(stopsContainer);\n    }\n    var {\n      stops\n    } = stopsContainer;\n    var gradient = this.getGradient(ctx, element);\n    if (!gradient) {\n      return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n    }\n    stops.forEach(stop => {\n      gradient.addColorStop(stop.offset, this.addParentOpacity(parentOpacityProp, stop.color));\n    });\n    if (this.getAttribute('gradientTransform').hasValue()) {\n      // render as transformed pattern on temporary canvas\n      var {\n        document\n      } = this;\n      var {\n        MAX_VIRTUAL_PIXELS,\n        viewPort\n      } = document.screen;\n      var [rootView] = viewPort.viewPorts;\n      var rect = new RectElement(document, null);\n      rect.attributes.x = new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.y = new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.width = new Property(document, 'width', MAX_VIRTUAL_PIXELS);\n      rect.attributes.height = new Property(document, 'height', MAX_VIRTUAL_PIXELS);\n      var group = new GElement(document, null);\n      group.attributes.transform = new Property(document, 'transform', this.getAttribute('gradientTransform').getValue());\n      group.children = [rect];\n      var patternSvg = new SVGElement(document, null);\n      patternSvg.attributes.x = new Property(document, 'x', 0);\n      patternSvg.attributes.y = new Property(document, 'y', 0);\n      patternSvg.attributes.width = new Property(document, 'width', rootView.width);\n      patternSvg.attributes.height = new Property(document, 'height', rootView.height);\n      patternSvg.children = [group];\n      var patternCanvas = document.createCanvas(rootView.width, rootView.height);\n      var patternCtx = patternCanvas.getContext('2d');\n      patternCtx.fillStyle = gradient;\n      patternSvg.render(patternCtx);\n      return patternCtx.createPattern(patternCanvas, 'no-repeat');\n    }\n    return gradient;\n  }\n  inheritStopContainer(stopsContainer) {\n    this.attributesToInherit.forEach(attributeToInherit => {\n      if (!this.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n        this.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n      }\n    });\n  }\n  addParentOpacity(parentOpacityProp, color) {\n    if (parentOpacityProp.hasValue()) {\n      var colorProp = new Property(this.document, 'color', color);\n      return colorProp.addOpacity(parentOpacityProp).getColor();\n    }\n    return color;\n  }\n}\nclass LinearGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'linearGradient';\n    this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n  }\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n    if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n      this.getAttribute('x1', true).setValue(0);\n      this.getAttribute('y1', true).setValue(0);\n      this.getAttribute('x2', true).setValue(1);\n      this.getAttribute('y2', true).setValue(0);\n    }\n    var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n    var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n    var x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n    var y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n    if (x1 === x2 && y1 === y2) {\n      return null;\n    }\n    return ctx.createLinearGradient(x1, y1, x2, y2);\n  }\n}\nclass RadialGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'radialGradient';\n    this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n  }\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = element.getBoundingBox(ctx);\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n    if (!this.getAttribute('cx').hasValue()) {\n      this.getAttribute('cx', true).setValue('50%');\n    }\n    if (!this.getAttribute('cy').hasValue()) {\n      this.getAttribute('cy', true).setValue('50%');\n    }\n    if (!this.getAttribute('r').hasValue()) {\n      this.getAttribute('r', true).setValue('50%');\n    }\n    var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n    var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n    var fx = cx;\n    var fy = cy;\n    if (this.getAttribute('fx').hasValue()) {\n      fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n    }\n    if (this.getAttribute('fy').hasValue()) {\n      fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n    }\n    var r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n    var fr = this.getAttribute('fr').getPixels();\n    return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n  }\n}\nclass StopElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'stop';\n    var offset = Math.max(0, Math.min(1, this.getAttribute('offset').getNumber()));\n    var stopOpacity = this.getStyle('stop-opacity');\n    var stopColor = this.getStyle('stop-color', true);\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000');\n    }\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity);\n    }\n    this.offset = offset;\n    this.color = stopColor.getColor();\n  }\n}\nclass AnimateElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'animate';\n    this.duration = 0;\n    this.initialValue = null;\n    this.initialUnits = '';\n    this.removed = false;\n    this.frozen = false;\n    document.screen.animations.push(this);\n    this.begin = this.getAttribute('begin').getMilliseconds();\n    this.maxDuration = this.begin + this.getAttribute('dur').getMilliseconds();\n    this.from = this.getAttribute('from');\n    this.to = this.getAttribute('to');\n    this.values = new Property(document, 'values', null);\n    var valuesAttr = this.getAttribute('values');\n    if (valuesAttr.hasValue()) {\n      this.values.setValue(valuesAttr.getString().split(';'));\n    }\n  }\n  getProperty() {\n    var attributeType = this.getAttribute('attributeType').getString();\n    var attributeName = this.getAttribute('attributeName').getString();\n    if (attributeType === 'CSS') {\n      return this.parent.getStyle(attributeName, true);\n    }\n    return this.parent.getAttribute(attributeName, true);\n  }\n  calcValue() {\n    var {\n      initialUnits\n    } = this;\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n    if (initialUnits === '%') {\n      newValue *= 100.0; // numValue() returns 0-1 whereas properties are 0-100\n    }\n    return \"\".concat(newValue).concat(initialUnits);\n  }\n  update(delta) {\n    var {\n      parent\n    } = this;\n    var prop = this.getProperty(); // set initial value\n\n    if (!this.initialValue) {\n      this.initialValue = prop.getString();\n      this.initialUnits = prop.getUnits();\n    } // if we're past the end time\n\n    if (this.duration > this.maxDuration) {\n      var fill = this.getAttribute('fill').getString('remove'); // loop for indefinitely repeating animations\n\n      if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n        this.duration = 0;\n      } else if (fill === 'freeze' && !this.frozen) {\n        this.frozen = true;\n        parent.animationFrozen = true;\n        parent.animationFrozenValue = prop.getString();\n      } else if (fill === 'remove' && !this.removed) {\n        this.removed = true;\n        prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n        return true;\n      }\n      return false;\n    }\n    this.duration += delta; // if we're past the begin time\n\n    var updated = false;\n    if (this.begin < this.duration) {\n      var newValue = this.calcValue(); // tween\n\n      var typeAttr = this.getAttribute('type');\n      if (typeAttr.hasValue()) {\n        // for transform, etc.\n        var type = typeAttr.getString();\n        newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n      }\n      prop.setValue(newValue);\n      updated = true;\n    }\n    return updated;\n  }\n  getProgress() {\n    var {\n      document,\n      values\n    } = this;\n    var result = {\n      progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n    };\n    if (values.hasValue()) {\n      var p = result.progress * (values.getValue().length - 1);\n      var lb = Math.floor(p);\n      var ub = Math.ceil(p);\n      result.from = new Property(document, 'from', parseFloat(values.getValue()[lb]));\n      result.to = new Property(document, 'to', parseFloat(values.getValue()[ub]));\n      result.progress = (p - lb) / (ub - lb);\n    } else {\n      result.from = this.from;\n      result.to = this.to;\n    }\n    return result;\n  }\n}\nclass AnimateColorElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateColor';\n  }\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress();\n    var colorFrom = new RGBColor(from.getColor());\n    var colorTo = new RGBColor(to.getColor());\n    if (colorFrom.ok && colorTo.ok) {\n      // tween color linearly\n      var r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n      var g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n      var b = colorFrom.b + (colorTo.b - colorFrom.b) * progress; // ? alpha\n\n      return \"rgb(\".concat(Math.floor(r), \", \").concat(Math.floor(g), \", \").concat(Math.floor(b), \")\");\n    }\n    return this.getAttribute('from').getColor();\n  }\n}\nclass AnimateTransformElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateTransform';\n  }\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var transformFrom = toNumbers(from.getString());\n    var transformTo = toNumbers(to.getString());\n    var newValue = transformFrom.map((from, i) => {\n      var to = transformTo[i];\n      return from + (to - from) * progress;\n    }).join(' ');\n    return newValue;\n  }\n}\nclass FontElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font';\n    this.glyphs = {};\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    var {\n      definitions\n    } = document;\n    var {\n      children\n    } = this;\n    for (var child of children) {\n      switch (child.type) {\n        case 'font-face':\n          {\n            this.fontFace = child;\n            var fontFamilyStyle = child.getStyle('font-family');\n            if (fontFamilyStyle.hasValue()) {\n              definitions[fontFamilyStyle.getString()] = this;\n            }\n            break;\n          }\n        case 'missing-glyph':\n          this.missingGlyph = child;\n          break;\n        case 'glyph':\n          {\n            var glyph = child;\n            if (glyph.arabicForm) {\n              this.isRTL = true;\n              this.isArabic = true;\n              if (typeof this.glyphs[glyph.unicode] === 'undefined') {\n                this.glyphs[glyph.unicode] = {};\n              }\n              this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;\n            } else {\n              this.glyphs[glyph.unicode] = glyph;\n            }\n            break;\n          }\n      }\n    }\n  }\n  render() {// NO RENDER\n  }\n}\nclass FontFaceElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font-face';\n    this.ascent = this.getAttribute('ascent').getNumber();\n    this.descent = this.getAttribute('descent').getNumber();\n    this.unitsPerEm = this.getAttribute('units-per-em').getNumber();\n  }\n}\nclass MissingGlyphElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'missing-glyph';\n    this.horizAdvX = 0;\n  }\n}\nclass TRefElement extends TextElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'tref';\n  }\n  getText() {\n    var element = this.getHrefAttribute().getDefinition();\n    if (element) {\n      var firstChild = element.children[0];\n      if (firstChild) {\n        return firstChild.getText();\n      }\n    }\n    return '';\n  }\n}\nclass AElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'a';\n    var {\n      childNodes\n    } = node;\n    var firstChild = childNodes[0];\n    var hasText = childNodes.length > 0 && Array.from(childNodes).every(node => node.nodeType === 3);\n    this.hasText = hasText;\n    this.text = hasText ? this.getTextFromNode(firstChild) : '';\n  }\n  getText() {\n    return this.text;\n  }\n  renderChildren(ctx) {\n    if (this.hasText) {\n      // render as text element\n      super.renderChildren(ctx);\n      var {\n        document,\n        x,\n        y\n      } = this;\n      var {\n        mouse\n      } = document.screen;\n      var fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize); // Do not calc bounding box if mouse is not working.\n\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n      }\n    } else if (this.children.length > 0) {\n      // render as temporary group\n      var g = new GElement(this.document, null);\n      g.children = this.children;\n      g.parent = this;\n      g.render(ctx);\n    }\n  }\n  onClick() {\n    var {\n      window\n    } = this.document;\n    if (window) {\n      window.open(this.getHrefAttribute().getString());\n    }\n  }\n  onMouseMove() {\n    var ctx = this.document.ctx;\n    ctx.canvas.style.cursor = 'pointer';\n  }\n}\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nclass TextPathElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'textPath';\n    this.textWidth = 0;\n    this.textHeight = 0;\n    this.pathLength = -1;\n    this.glyphInfo = null;\n    this.letterSpacingCache = [];\n    this.measuresCache = new Map([['', 0]]);\n    var pathElement = this.getHrefAttribute().getDefinition();\n    this.text = this.getTextFromNode();\n    this.dataArray = this.parsePathData(pathElement);\n  }\n  getText() {\n    return this.text;\n  }\n  path(ctx) {\n    var {\n      dataArray\n    } = this;\n    if (ctx) {\n      ctx.beginPath();\n    }\n    dataArray.forEach(_ref => {\n      var {\n        type,\n        points\n      } = _ref;\n      switch (type) {\n        case PathParser.LINE_TO:\n          if (ctx) {\n            ctx.lineTo(points[0], points[1]);\n          }\n          break;\n        case PathParser.MOVE_TO:\n          if (ctx) {\n            ctx.moveTo(points[0], points[1]);\n          }\n          break;\n        case PathParser.CURVE_TO:\n          if (ctx) {\n            ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n          }\n          break;\n        case PathParser.QUAD_TO:\n          if (ctx) {\n            ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n          }\n          break;\n        case PathParser.ARC:\n          {\n            var [cx, cy, rx, ry, theta, dTheta, psi, fs] = points;\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n            if (ctx) {\n              ctx.translate(cx, cy);\n              ctx.rotate(psi);\n              ctx.scale(scaleX, scaleY);\n              ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n              ctx.scale(1 / scaleX, 1 / scaleY);\n              ctx.rotate(-psi);\n              ctx.translate(-cx, -cy);\n            }\n            break;\n          }\n        case PathParser.CLOSE_PATH:\n          if (ctx) {\n            ctx.closePath();\n          }\n          break;\n      }\n    });\n  }\n  renderChildren(ctx) {\n    this.setTextData(ctx);\n    ctx.save();\n    var textDecoration = this.parent.getStyle('text-decoration').getString();\n    var fontSize = this.getFontSize();\n    var {\n      glyphInfo\n    } = this;\n    var fill = ctx.fillStyle;\n    if (textDecoration === 'underline') {\n      ctx.beginPath();\n    }\n    glyphInfo.forEach((glyph, i) => {\n      var {\n        p0,\n        p1,\n        rotation,\n        text: partialText\n      } = glyph;\n      ctx.save();\n      ctx.translate(p0.x, p0.y);\n      ctx.rotate(rotation);\n      if (ctx.fillStyle) {\n        ctx.fillText(partialText, 0, 0);\n      }\n      if (ctx.strokeStyle) {\n        ctx.strokeText(partialText, 0, 0);\n      }\n      ctx.restore();\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          ctx.moveTo(p0.x, p0.y + fontSize / 8);\n        }\n        ctx.lineTo(p1.x, p1.y + fontSize / 5);\n      } // // To assist with debugging visually, uncomment following\n      //\n      // ctx.beginPath();\n      // if (i % 2)\n      // \tctx.strokeStyle = 'red';\n      // else\n      // \tctx.strokeStyle = 'green';\n      // ctx.moveTo(p0.x, p0.y);\n      // ctx.lineTo(p1.x, p1.y);\n      // ctx.stroke();\n      // ctx.closePath();\n    });\n    if (textDecoration === 'underline') {\n      ctx.lineWidth = fontSize / 20;\n      ctx.strokeStyle = fill;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    ctx.restore();\n  }\n  getLetterSpacingAt() {\n    var idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return this.letterSpacingCache[idx] || 0;\n  }\n  findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, dy, c, charI) {\n    var offset = inputOffset;\n    var glyphWidth = this.measureText(ctx, c);\n    if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n      glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n    }\n    if (charI > -1) {\n      offset += this.getLetterSpacingAt(charI);\n    }\n    var splineStep = this.textHeight / 20;\n    var p0 = this.getEquidistantPointOnPath(offset, splineStep, 0);\n    var p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0);\n    var segment = {\n      p0,\n      p1\n    };\n    var rotation = p0 && p1 ? Math.atan2(p1.y - p0.y, p1.x - p0.x) : 0;\n    if (dy) {\n      var dyX = Math.cos(Math.PI / 2 + rotation) * dy;\n      var dyY = Math.cos(-rotation) * dy;\n      segment.p0 = _objectSpread$2(_objectSpread$2({}, p0), {}, {\n        x: p0.x + dyX,\n        y: p0.y + dyY\n      });\n      segment.p1 = _objectSpread$2(_objectSpread$2({}, p1), {}, {\n        x: p1.x + dyX,\n        y: p1.y + dyY\n      });\n    }\n    offset += glyphWidth;\n    return {\n      offset,\n      segment,\n      rotation\n    };\n  }\n  measureText(ctx, text) {\n    var {\n      measuresCache\n    } = this;\n    var targetText = text || this.getText();\n    if (measuresCache.has(targetText)) {\n      return measuresCache.get(targetText);\n    }\n    var measure = this.measureTargetText(ctx, targetText);\n    measuresCache.set(targetText, measure);\n    return measure;\n  } // This method supposes what all custom fonts already loaded.\n  // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n  // You need to call this method manually to update glyphs cache.\n\n  setTextData(ctx) {\n    if (this.glyphInfo) {\n      return;\n    }\n    var renderText = this.getText();\n    var chars = renderText.split('');\n    var spacesNumber = renderText.split(' ').length - 1;\n    var dx = this.parent.getAttribute('dx').split().map(_ => _.getPixels('x'));\n    var dy = this.parent.getAttribute('dy').getPixels('y');\n    var anchor = this.parent.getStyle('text-anchor').getString('start');\n    var thisSpacing = this.getStyle('letter-spacing');\n    var parentSpacing = this.parent.getStyle('letter-spacing');\n    var letterSpacing = 0;\n    if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n      letterSpacing = parentSpacing.getPixels();\n    } else if (thisSpacing.hasValue()) {\n      if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n        letterSpacing = thisSpacing.getPixels();\n      }\n    } // fill letter-spacing cache\n\n    var letterSpacingCache = [];\n    var textLen = renderText.length;\n    this.letterSpacingCache = letterSpacingCache;\n    for (var i = 0; i < textLen; i++) {\n      letterSpacingCache.push(typeof dx[i] !== 'undefined' ? dx[i] : letterSpacing);\n    }\n    var dxSum = letterSpacingCache.reduce((acc, cur, i) => i === 0 ? 0 : acc + cur || 0, 0);\n    var textWidth = this.measureText(ctx);\n    var textFullWidth = Math.max(textWidth + dxSum, 0);\n    this.textWidth = textWidth;\n    this.textHeight = this.getFontSize();\n    this.glyphInfo = [];\n    var fullPathWidth = this.getPathLength();\n    var startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n    var offset = 0;\n    if (anchor === 'middle' || anchor === 'center') {\n      offset = -textFullWidth / 2;\n    }\n    if (anchor === 'end' || anchor === 'right') {\n      offset = -textFullWidth;\n    }\n    offset += startOffset;\n    chars.forEach((char, i) => {\n      // Find such segment what distance between p0 and p1 is approx. width of glyph\n      var {\n        offset: nextOffset,\n        segment,\n        rotation\n      } = this.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, dy, char, i);\n      offset = nextOffset;\n      if (!segment.p0 || !segment.p1) {\n        return;\n      } // const width = this.getLineLength(\n      // \tsegment.p0.x,\n      // \tsegment.p0.y,\n      // \tsegment.p1.x,\n      // \tsegment.p1.y\n      // );\n      // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n      // Can foresee having a rough pair table built in that the developer can override as needed.\n      // Or use \"dx\" attribute of the <text> node as a naive replacement\n      // const kern = 0;\n      // placeholder for future implementation\n      // const midpoint = this.getPointOnLine(\n      // \tkern + width / 2.0,\n      // \tsegment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y\n      // );\n\n      this.glyphInfo.push({\n        // transposeX: midpoint.x,\n        // transposeY: midpoint.y,\n        text: chars[i],\n        p0: segment.p0,\n        p1: segment.p1,\n        rotation\n      });\n    });\n  }\n  parsePathData(path) {\n    this.pathLength = -1; // reset path length\n\n    if (!path) {\n      return [];\n    }\n    var pathCommands = [];\n    var {\n      pathParser\n    } = path;\n    pathParser.reset(); // convert l, H, h, V, and v to L\n\n    while (!pathParser.isEnd()) {\n      var {\n        current\n      } = pathParser;\n      var startX = current ? current.x : 0;\n      var startY = current ? current.y : 0;\n      var command = pathParser.next();\n      var nextCommandType = command.type;\n      var points = [];\n      switch (command.type) {\n        case PathParser.MOVE_TO:\n          this.pathM(pathParser, points);\n          break;\n        case PathParser.LINE_TO:\n          nextCommandType = this.pathL(pathParser, points);\n          break;\n        case PathParser.HORIZ_LINE_TO:\n          nextCommandType = this.pathH(pathParser, points);\n          break;\n        case PathParser.VERT_LINE_TO:\n          nextCommandType = this.pathV(pathParser, points);\n          break;\n        case PathParser.CURVE_TO:\n          this.pathC(pathParser, points);\n          break;\n        case PathParser.SMOOTH_CURVE_TO:\n          nextCommandType = this.pathS(pathParser, points);\n          break;\n        case PathParser.QUAD_TO:\n          this.pathQ(pathParser, points);\n          break;\n        case PathParser.SMOOTH_QUAD_TO:\n          nextCommandType = this.pathT(pathParser, points);\n          break;\n        case PathParser.ARC:\n          points = this.pathA(pathParser);\n          break;\n        case PathParser.CLOSE_PATH:\n          PathElement.pathZ(pathParser);\n          break;\n      }\n      if (command.type !== PathParser.CLOSE_PATH) {\n        pathCommands.push({\n          type: nextCommandType,\n          points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, nextCommandType, points)\n        });\n      } else {\n        pathCommands.push({\n          type: PathParser.CLOSE_PATH,\n          points: [],\n          pathLength: 0\n        });\n      }\n    }\n    return pathCommands;\n  }\n  pathM(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathM(pathParser).point;\n    points.push(x, y);\n  }\n  pathL(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathL(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n  pathH(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathH(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n  pathV(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathV(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n  pathC(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n  pathS(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.CURVE_TO;\n  }\n  pathQ(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n  pathT(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.QUAD_TO;\n  }\n  pathA(pathParser) {\n    var {\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser);\n    if (sweepFlag === 0 && ad > 0) {\n      ad -= 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && ad < 0) {\n      ad += 2 * Math.PI;\n    }\n    return [centp.x, centp.y, rX, rY, a1, ad, xAxisRotation, sweepFlag];\n  }\n  calcLength(x, y, commandType, points) {\n    var len = 0;\n    var p1 = null;\n    var p2 = null;\n    var t = 0;\n    switch (commandType) {\n      case PathParser.LINE_TO:\n        return this.getLineLength(x, y, points[0], points[1]);\n      case PathParser.CURVE_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n        return len;\n      case PathParser.QUAD_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n        return len;\n      case PathParser.ARC:\n        {\n          // Approximates by breaking curve into line segments\n          len = 0.0;\n          var start = points[4]; // 4 = theta\n\n          var dTheta = points[5]; // 5 = dTheta\n\n          var end = points[4] + dTheta;\n          var inc = Math.PI / 180.0; // 1 degree resolution\n\n          if (Math.abs(start - end) < inc) {\n            inc = Math.abs(start - end);\n          } // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n\n          p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n          if (dTheta < 0) {\n            // clockwise\n            for (t = start - inc; t > end; t -= inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          } else {\n            // counter-clockwise\n            for (t = start + inc; t < end; t += inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          }\n          p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          return len;\n        }\n    }\n    return 0;\n  }\n  getPointOnLine(dist, p1x, p1y, p2x, p2y) {\n    var fromX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : p1x;\n    var fromY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : p1y;\n    var m = (p2y - p1y) / (p2x - p1x + PSEUDO_ZERO);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n    if (p2x < p1x) {\n      run *= -1;\n    }\n    var rise = m * run;\n    var pt = null;\n    if (p2x === p1x) {\n      // vertical line\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - p1y) / (fromX - p1x + PSEUDO_ZERO) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix = 0;\n      var iy = 0;\n      var len = this.getLineLength(p1x, p1y, p2x, p2y);\n      if (len < PSEUDO_ZERO) {\n        return null;\n      }\n      var u = (fromX - p1x) * (p2x - p1x) + (fromY - p1y) * (p2y - p1y);\n      u /= len * len;\n      ix = p1x + u * (p2x - p1x);\n      iy = p1y + u * (p2y - p1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n      if (p2x < p1x) {\n        run *= -1;\n      }\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n    return pt;\n  }\n  getPointOnPath(distance) {\n    var fullLen = this.getPathLength();\n    var cumulativePathLength = 0;\n    var p = null;\n    if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n      return null;\n    }\n    var {\n      dataArray\n    } = this;\n    for (var command of dataArray) {\n      if (command && (command.pathLength < 0.00005 || cumulativePathLength + command.pathLength + 0.00005 < distance)) {\n        cumulativePathLength += command.pathLength;\n        continue;\n      }\n      var delta = distance - cumulativePathLength;\n      var currentT = 0;\n      switch (command.type) {\n        case PathParser.LINE_TO:\n          p = this.getPointOnLine(delta, command.start.x, command.start.y, command.points[0], command.points[1], command.start.x, command.start.y);\n          break;\n        case PathParser.ARC:\n          {\n            var start = command.points[4]; // 4 = theta\n\n            var dTheta = command.points[5]; // 5 = dTheta\n\n            var end = command.points[4] + dTheta;\n            currentT = start + delta / command.pathLength * dTheta;\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              break;\n            }\n            p = this.getPointOnEllipticalArc(command.points[0], command.points[1], command.points[2], command.points[3], currentT, command.points[6]);\n            break;\n          }\n        case PathParser.CURVE_TO:\n          currentT = delta / command.pathLength;\n          if (currentT > 1) {\n            currentT = 1;\n          }\n          p = this.getPointOnCubicBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3], command.points[4], command.points[5]);\n          break;\n        case PathParser.QUAD_TO:\n          currentT = delta / command.pathLength;\n          if (currentT > 1) {\n            currentT = 1;\n          }\n          p = this.getPointOnQuadraticBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3]);\n          break;\n      }\n      if (p) {\n        return p;\n      }\n      break;\n    }\n    return null;\n  }\n  getLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n  getPathLength() {\n    if (this.pathLength === -1) {\n      this.pathLength = this.dataArray.reduce((length, command) => command.pathLength > 0 ? length + command.pathLength : length, 0);\n    }\n    return this.pathLength;\n  }\n  getPointOnCubicBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    var x = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct);\n    var y = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct);\n    return {\n      x,\n      y\n    };\n  }\n  getPointOnQuadraticBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y) {\n    var x = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct);\n    var y = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct);\n    return {\n      x,\n      y\n    };\n  }\n  getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi);\n    var sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  } // TODO need some optimisations. possibly build cache only for curved segments?\n\n  buildEquidistantCache(inputStep, inputPrecision) {\n    var fullLen = this.getPathLength();\n    var precision = inputPrecision || 0.25; // accuracy vs performance\n\n    var step = inputStep || fullLen / 100;\n    if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n      // Prepare cache\n      this.equidistantCache = {\n        step,\n        precision,\n        points: []\n      }; // Calculate points\n\n      var s = 0;\n      for (var l = 0; l <= fullLen; l += precision) {\n        var p0 = this.getPointOnPath(l);\n        var p1 = this.getPointOnPath(l + precision);\n        if (!p0 || !p1) {\n          continue;\n        }\n        s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n        if (s >= step) {\n          this.equidistantCache.points.push({\n            x: p0.x,\n            y: p0.y,\n            distance: l\n          });\n          s -= step;\n        }\n      }\n    }\n  }\n  getEquidistantPointOnPath(targetDistance, step, precision) {\n    this.buildEquidistantCache(step, precision);\n    if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n      return null;\n    }\n    var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n    return this.equidistantCache.points[idx] || null;\n  }\n}\nvar dataUriRegex = /^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;\nclass ImageElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'image';\n    this.loaded = false;\n    var href = this.getHrefAttribute().getString();\n    if (!href) {\n      return;\n    }\n    var isSvg = href.endsWith('.svg') || /^\\s*data:image\\/svg\\+xml/i.test(href);\n    document.images.push(this);\n    if (!isSvg) {\n      void this.loadImage(href);\n    } else {\n      void this.loadSvg(href);\n    }\n    this.isSvg = isSvg;\n  }\n  loadImage(href) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        var image = yield _this.document.createImage(href);\n        _this.image = image;\n      } catch (err) {\n        console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n      }\n      _this.loaded = true;\n    })();\n  }\n  loadSvg(href) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var match = dataUriRegex.exec(href);\n      if (match) {\n        var data = match[5];\n        if (match[4] === 'base64') {\n          _this2.image = atob(data);\n        } else {\n          _this2.image = decodeURIComponent(data);\n        }\n      } else {\n        try {\n          var response = yield _this2.document.fetch(href);\n          var svg = yield response.text();\n          _this2.image = svg;\n        } catch (err) {\n          console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n        }\n      }\n      _this2.loaded = true;\n    })();\n  }\n  renderChildren(ctx) {\n    var {\n      document,\n      image,\n      loaded\n    } = this;\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n    if (!loaded || !image || !width || !height) {\n      return;\n    }\n    ctx.save();\n    ctx.translate(x, y);\n    if (this.isSvg) {\n      var subDocument = document.canvg.forkString(ctx, this.image, {\n        ignoreMouse: true,\n        ignoreAnimation: true,\n        ignoreDimensions: true,\n        ignoreClear: true,\n        offsetX: 0,\n        offsetY: 0,\n        scaleWidth: width,\n        scaleHeight: height\n      });\n      subDocument.document.documentElement.parent = this;\n      void subDocument.render();\n    } else {\n      var _image = this.image;\n      document.setViewBox({\n        ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width,\n        desiredWidth: _image.width,\n        height,\n        desiredHeight: _image.height\n      });\n      if (this.loaded) {\n        if (typeof _image.complete === 'undefined' || _image.complete) {\n          ctx.drawImage(_image, 0, 0);\n        }\n      }\n    }\n    ctx.restore();\n  }\n  getBoundingBox() {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n}\nclass SymbolElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'symbol';\n  }\n  render(_) {// NO RENDER\n  }\n}\nclass SVGFontLoader {\n  constructor(document) {\n    this.document = document;\n    this.loaded = false;\n    document.fonts.push(this);\n  }\n  load(fontFamily, url) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        var {\n          document\n        } = _this;\n        var svgDocument = yield document.canvg.parser.load(url);\n        var fonts = svgDocument.getElementsByTagName('font');\n        Array.from(fonts).forEach(fontNode => {\n          var font = document.createElement(fontNode);\n          document.definitions[fontFamily] = font;\n        });\n      } catch (err) {\n        console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), err);\n      }\n      _this.loaded = true;\n    })();\n  }\n}\nclass StyleElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'style';\n    var css = compressSpaces(Array.from(node.childNodes) // NEED TEST\n    .map(_ => _.textContent).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n    .replace(/@import.*;/g, '') // remove imports\n    );\n    var cssDefs = css.split('}');\n    cssDefs.forEach(_ => {\n      var def = _.trim();\n      if (!def) {\n        return;\n      }\n      var cssParts = def.split('{');\n      var cssClasses = cssParts[0].split(',');\n      var cssProps = cssParts[1].split(';');\n      cssClasses.forEach(_ => {\n        var cssClass = _.trim();\n        if (!cssClass) {\n          return;\n        }\n        var props = document.styles[cssClass] || {};\n        cssProps.forEach(cssProp => {\n          var prop = cssProp.indexOf(':');\n          var name = cssProp.substr(0, prop).trim();\n          var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n          if (name && value) {\n            props[name] = new Property(document, name, value);\n          }\n        });\n        document.styles[cssClass] = props;\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\n        if (cssClass === '@font-face') {\n          //  && !nodeEnv\n          var fontFamily = props['font-family'].getString().replace(/\"|'/g, '');\n          var srcs = props.src.getString().split(',');\n          srcs.forEach(src => {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              var url = parseExternalUrl(src);\n              if (url) {\n                void new SVGFontLoader(document).load(fontFamily, url);\n              }\n            }\n          });\n        }\n      });\n    });\n  }\n}\nStyleElement.parseExternalUrl = parseExternalUrl;\nclass UseElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'use';\n  }\n  setContext(ctx) {\n    super.setContext(ctx);\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n    if (xAttr.hasValue()) {\n      ctx.translate(xAttr.getPixels('x'), 0);\n    }\n    if (yAttr.hasValue()) {\n      ctx.translate(0, yAttr.getPixels('y'));\n    }\n  }\n  path(ctx) {\n    var {\n      element\n    } = this;\n    if (element) {\n      element.path(ctx);\n    }\n  }\n  renderChildren(ctx) {\n    var {\n      document,\n      element\n    } = this;\n    if (element) {\n      var tempSvg = element;\n      if (element.type === 'symbol') {\n        // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n        tempSvg = new SVGElement(document, null);\n        tempSvg.attributes.viewBox = new Property(document, 'viewBox', element.getAttribute('viewBox').getString());\n        tempSvg.attributes.preserveAspectRatio = new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString());\n        tempSvg.attributes.overflow = new Property(document, 'overflow', element.getAttribute('overflow').getString());\n        tempSvg.children = element.children; // element is still the parent of the children\n\n        element.styles.opacity = new Property(document, 'opacity', this.calculateOpacity());\n      }\n      if (tempSvg.type === 'svg') {\n        var widthStyle = this.getStyle('width', false, true);\n        var heightStyle = this.getStyle('height', false, true); // if symbol or svg, inherit width/height from me\n\n        if (widthStyle.hasValue()) {\n          tempSvg.attributes.width = new Property(document, 'width', widthStyle.getString());\n        }\n        if (heightStyle.hasValue()) {\n          tempSvg.attributes.height = new Property(document, 'height', heightStyle.getString());\n        }\n      }\n      var oldParent = tempSvg.parent;\n      tempSvg.parent = this;\n      tempSvg.render(ctx);\n      tempSvg.parent = oldParent;\n    }\n  }\n  getBoundingBox(ctx) {\n    var {\n      element\n    } = this;\n    if (element) {\n      return element.getBoundingBox(ctx);\n    }\n    return null;\n  }\n  elementTransform() {\n    var {\n      document,\n      element\n    } = this;\n    return Transform.fromElement(document, element);\n  }\n  get element() {\n    if (!this.cachedElement) {\n      this.cachedElement = this.getHrefAttribute().getDefinition();\n    }\n    return this.cachedElement;\n  }\n}\nfunction imGet(img, x, y, width, _height, rgba) {\n  return img[y * width * 4 + x * 4 + rgba];\n}\nfunction imSet(img, x, y, width, _height, rgba, val) {\n  img[y * width * 4 + x * 4 + rgba] = val;\n}\nfunction m(matrix, i, v) {\n  var mi = matrix[i];\n  return mi * v;\n}\nfunction c(a, m1, m2, m3) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\nclass FeColorMatrixElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feColorMatrix';\n    var matrix = toNumbers(this.getAttribute('values').getString());\n    switch (this.getAttribute('type').getString('matrix')) {\n      // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate':\n        {\n          var s = matrix[0];\n          /* eslint-disable array-element-newline */\n\n          matrix = [0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n      case 'hueRotate':\n        {\n          var a = matrix[0] * Math.PI / 180.0;\n          /* eslint-disable array-element-newline */\n\n          matrix = [c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0, c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0, c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n      case 'luminanceToAlpha':\n        /* eslint-disable array-element-newline */\n        matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];\n        /* eslint-enable array-element-newline */\n\n        break;\n    }\n    this.matrix = matrix;\n    this.includeOpacity = this.getAttribute('includeOpacity').hasValue();\n  }\n  apply(ctx, _x, _y, width, height) {\n    // assuming x==0 && y==0 for now\n    var {\n      includeOpacity,\n      matrix\n    } = this;\n    var srcData = ctx.getImageData(0, 0, width, height);\n    for (var y = 0; y < height; y++) {\n      for (var x = 0; x < width; x++) {\n        var r = imGet(srcData.data, x, y, width, height, 0);\n        var g = imGet(srcData.data, x, y, width, height, 1);\n        var b = imGet(srcData.data, x, y, width, height, 2);\n        var a = imGet(srcData.data, x, y, width, height, 3);\n        var nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n        var ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n        var nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n        var na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n        if (includeOpacity) {\n          nr = 0;\n          ng = 0;\n          nb = 0;\n          na *= a / 255;\n        }\n        imSet(srcData.data, x, y, width, height, 0, nr);\n        imSet(srcData.data, x, y, width, height, 1, ng);\n        imSet(srcData.data, x, y, width, height, 2, nb);\n        imSet(srcData.data, x, y, width, height, 3, na);\n      }\n    }\n    ctx.clearRect(0, 0, width, height);\n    ctx.putImageData(srcData, 0, 0);\n  }\n}\nclass MaskElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'mask';\n  }\n  apply(ctx, element) {\n    var {\n      document\n    } = this; // render as temp svg\n\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n    if (!width && !height) {\n      var boundingBox = new BoundingBox();\n      this.children.forEach(child => {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n      });\n      x = Math.floor(boundingBox.x1);\n      y = Math.floor(boundingBox.y1);\n      width = Math.floor(boundingBox.width);\n      height = Math.floor(boundingBox.height);\n    }\n    var ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n    var maskCanvas = document.createCanvas(x + width, y + height);\n    var maskCtx = maskCanvas.getContext('2d');\n    document.screen.setDefaults(maskCtx);\n    this.renderChildren(maskCtx); // convert mask to alpha with a fake node\n    // TODO: refactor out apply from feColorMatrix\n\n    new FeColorMatrixElement(document, {\n      nodeType: 1,\n      childNodes: [],\n      attributes: [{\n        nodeName: 'type',\n        value: 'luminanceToAlpha'\n      }, {\n        nodeName: 'includeOpacity',\n        value: 'true'\n      }]\n    }).apply(maskCtx, 0, 0, x + width, y + height);\n    var tmpCanvas = document.createCanvas(x + width, y + height);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    element.render(tmpCtx);\n    tmpCtx.globalCompositeOperation = 'destination-in';\n    tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n    tmpCtx.fillRect(0, 0, x + width, y + height);\n    ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n    ctx.fillRect(0, 0, x + width, y + height); // reassign mask\n\n    this.restoreStyles(element, ignoredStyles);\n  }\n  render(_) {// NO RENDER\n  }\n}\nMaskElement.ignoreStyles = ['mask', 'transform', 'clip-path'];\nvar noop = () => {// NOOP\n};\nclass ClipPathElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'clipPath';\n  }\n  apply(ctx) {\n    var {\n      document\n    } = this;\n    var contextProto = Reflect.getPrototypeOf(ctx);\n    var {\n      beginPath,\n      closePath\n    } = ctx;\n    if (contextProto) {\n      contextProto.beginPath = noop;\n      contextProto.closePath = noop;\n    }\n    Reflect.apply(beginPath, ctx, []);\n    this.children.forEach(child => {\n      if (typeof child.path === 'undefined') {\n        return;\n      }\n      var transform = typeof child.elementTransform !== 'undefined' ? child.elementTransform() : null; // handle <use />\n\n      if (!transform) {\n        transform = Transform.fromElement(document, child);\n      }\n      if (transform) {\n        transform.apply(ctx);\n      }\n      child.path(ctx);\n      if (contextProto) {\n        contextProto.closePath = closePath;\n      }\n      if (transform) {\n        transform.unapply(ctx);\n      }\n    });\n    Reflect.apply(closePath, ctx, []);\n    ctx.clip();\n    if (contextProto) {\n      contextProto.beginPath = beginPath;\n      contextProto.closePath = closePath;\n    }\n  }\n  render(_) {// NO RENDER\n  }\n}\nclass FilterElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'filter';\n  }\n  apply(ctx, element) {\n    // render as temp svg\n    var {\n      document,\n      children\n    } = this;\n    var boundingBox = element.getBoundingBox(ctx);\n    if (!boundingBox) {\n      return;\n    }\n    var px = 0;\n    var py = 0;\n    children.forEach(child => {\n      var efd = child.extraFilterDistance || 0;\n      px = Math.max(px, efd);\n      py = Math.max(py, efd);\n    });\n    var width = Math.floor(boundingBox.width);\n    var height = Math.floor(boundingBox.height);\n    var tmpCanvasWidth = width + 2 * px;\n    var tmpCanvasHeight = height + 2 * py;\n    if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n      return;\n    }\n    var x = Math.floor(boundingBox.x);\n    var y = Math.floor(boundingBox.y);\n    var ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n    var tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    tmpCtx.translate(-x + px, -y + py);\n    element.render(tmpCtx); // apply filters\n\n    children.forEach(child => {\n      if (typeof child.apply === 'function') {\n        child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n      }\n    }); // render on me\n\n    ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n    this.restoreStyles(element, ignoredStyles);\n  }\n  render(_) {// NO RENDER\n  }\n}\nFilterElement.ignoreStyles = ['filter', 'transform', 'clip-path'];\nclass FeDropShadowElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feDropShadow';\n    this.addStylesFromStyleDefinition();\n  }\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n}\nclass FeMorphologyElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feMorphology';\n  }\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n}\nclass FeCompositeElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feComposite';\n  }\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n}\nclass FeGaussianBlurElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feGaussianBlur';\n    this.blurRadius = Math.floor(this.getAttribute('stdDeviation').getNumber());\n    this.extraFilterDistance = this.blurRadius;\n  }\n  apply(ctx, x, y, width, height) {\n    var {\n      document,\n      blurRadius\n    } = this;\n    var body = document.window ? document.window.document.body : null;\n    var canvas = ctx.canvas; // StackBlur requires canvas be on document\n\n    canvas.id = document.getUniqueId();\n    if (body) {\n      canvas.style.display = 'none';\n      body.appendChild(canvas);\n    }\n    canvasRGBA(canvas, x, y, width, height, blurRadius);\n    if (body) {\n      body.removeChild(canvas);\n    }\n  }\n}\nclass TitleElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'title';\n  }\n}\nclass DescElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'desc';\n  }\n}\nvar elements = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n};\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction createCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\nfunction createImage(_x) {\n  return _createImage.apply(this, arguments);\n}\nfunction _createImage() {\n  _createImage = _asyncToGenerator(function* (src) {\n    var anonymousCrossOrigin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var image = document.createElement('img');\n    if (anonymousCrossOrigin) {\n      image.crossOrigin = 'Anonymous';\n    }\n    return new Promise((resolve, reject) => {\n      image.onload = () => {\n        resolve(image);\n      };\n      image.onerror = (_event, _source, _lineno, _colno, error) => {\n        reject(error);\n      };\n      image.src = src;\n    });\n  });\n  return _createImage.apply(this, arguments);\n}\nclass Document {\n  constructor(canvg) {\n    var {\n      rootEmSize = 12,\n      emSize = 12,\n      createCanvas = Document.createCanvas,\n      createImage = Document.createImage,\n      anonymousCrossOrigin\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.canvg = canvg;\n    this.definitions = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.images = [];\n    this.fonts = [];\n    this.emSizeStack = [];\n    this.uniqueId = 0;\n    this.screen = canvg.screen;\n    this.rootEmSize = rootEmSize;\n    this.emSize = emSize;\n    this.createCanvas = createCanvas;\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin);\n    this.screen.wait(this.isImagesLoaded.bind(this));\n    this.screen.wait(this.isFontsLoaded.bind(this));\n  }\n  bindCreateImage(createImage, anonymousCrossOrigin) {\n    if (typeof anonymousCrossOrigin === 'boolean') {\n      return (source, forceAnonymousCrossOrigin) => createImage(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin);\n    }\n    return createImage;\n  }\n  get window() {\n    return this.screen.window;\n  }\n  get fetch() {\n    return this.screen.fetch;\n  }\n  get ctx() {\n    return this.screen.ctx;\n  }\n  get emSize() {\n    var {\n      emSizeStack\n    } = this;\n    return emSizeStack[emSizeStack.length - 1];\n  }\n  set emSize(value) {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.push(value);\n  }\n  popEmSize() {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.pop();\n  }\n  getUniqueId() {\n    return \"canvg\".concat(++this.uniqueId);\n  }\n  isImagesLoaded() {\n    return this.images.every(_ => _.loaded);\n  }\n  isFontsLoaded() {\n    return this.fonts.every(_ => _.loaded);\n  }\n  createDocumentElement(document) {\n    var documentElement = this.createElement(document.documentElement);\n    documentElement.root = true;\n    documentElement.addStylesFromStyleDefinition();\n    this.documentElement = documentElement;\n    return documentElement;\n  }\n  createElement(node) {\n    var elementType = node.nodeName.replace(/^[^:]+:/, '');\n    var ElementType = Document.elementTypes[elementType];\n    if (typeof ElementType !== 'undefined') {\n      return new ElementType(this, node);\n    }\n    return new UnknownElement(this, node);\n  }\n  createTextNode(node) {\n    return new TextNode(this, node);\n  }\n  setViewBox(config) {\n    this.screen.setViewBox(_objectSpread$1({\n      document: this\n    }, config));\n  }\n}\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elements;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\n/**\r\n * SVG renderer on canvas.\r\n */\n\nclass Canvg {\n  /**\r\n   * Main constructor.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG Document.\r\n   * @param options - Rendering options.\r\n   */\n  constructor(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.parser = new Parser(options);\n    this.screen = new Screen(ctx, options);\n    this.options = options;\n    var document = new Document(this, options);\n    var documentElement = document.createDocumentElement(svg);\n    this.document = document;\n    this.documentElement = documentElement;\n  }\n  /**\r\n   * Create Canvg instance from SVG source string or URL.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n  static from(ctx, svg) {\n    var _arguments = arguments;\n    return _asyncToGenerator(function* () {\n      var options = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : {};\n      var parser = new Parser(options);\n      var svgDocument = yield parser.parse(svg);\n      return new Canvg(ctx, svgDocument, options);\n    })();\n  }\n  /**\r\n   * Create Canvg instance from SVG source string.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n  static fromString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var parser = new Parser(options);\n    var svgDocument = parser.parseFromString(svg);\n    return new Canvg(ctx, svgDocument, options);\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n  fork(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.from(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n  forkString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.fromString(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Document is ready promise.\r\n   * @returns Ready promise.\r\n   */\n\n  ready() {\n    return this.screen.ready();\n  }\n  /**\r\n   * Document is ready value.\r\n   * @returns Is ready or not.\r\n   */\n\n  isReady() {\n    return this.screen.isReady();\n  }\n  /**\r\n   * Render only first frame, ignoring animations and mouse.\r\n   * @param options - Rendering options.\r\n   */\n\n  render() {\n    var _arguments2 = arguments,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      var options = _arguments2.length > 0 && _arguments2[0] !== undefined ? _arguments2[0] : {};\n      _this.start(_objectSpread({\n        enableRedraw: true,\n        ignoreAnimation: true,\n        ignoreMouse: true\n      }, options));\n      yield _this.ready();\n      _this.stop();\n    })();\n  }\n  /**\r\n   * Start rendering.\r\n   * @param options - Render options.\r\n   */\n\n  start() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var {\n      documentElement,\n      screen,\n      options: baseOptions\n    } = this;\n    screen.start(documentElement, _objectSpread(_objectSpread({\n      enableRedraw: true\n    }, baseOptions), options));\n  }\n  /**\r\n   * Stop rendering.\r\n   */\n\n  stop() {\n    this.screen.stop();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.documentElement.resize(width, height, preserveAspectRatio);\n  }\n}\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, Canvg as default, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };","/*\n\tBased on rgbcolor.js by Stoyan Stefanov <sstoo@gmail.com>\n\thttp://www.phpied.com/rgb-color-parser-in-javascript/\n*/\n\nmodule.exports = function (color_string) {\n  this.ok = false;\n  this.alpha = 1.0;\n\n  // strip any leading #\n  if (color_string.charAt(0) == '#') {\n    // remove # if any\n    color_string = color_string.substr(1, 6);\n  }\n  color_string = color_string.replace(/ /g, '');\n  color_string = color_string.toLowerCase();\n\n  // before getting into regexps, try simple matches\n  // and overwrite the input\n  var simple_colors = {\n    aliceblue: 'f0f8ff',\n    antiquewhite: 'faebd7',\n    aqua: '00ffff',\n    aquamarine: '7fffd4',\n    azure: 'f0ffff',\n    beige: 'f5f5dc',\n    bisque: 'ffe4c4',\n    black: '000000',\n    blanchedalmond: 'ffebcd',\n    blue: '0000ff',\n    blueviolet: '8a2be2',\n    brown: 'a52a2a',\n    burlywood: 'deb887',\n    cadetblue: '5f9ea0',\n    chartreuse: '7fff00',\n    chocolate: 'd2691e',\n    coral: 'ff7f50',\n    cornflowerblue: '6495ed',\n    cornsilk: 'fff8dc',\n    crimson: 'dc143c',\n    cyan: '00ffff',\n    darkblue: '00008b',\n    darkcyan: '008b8b',\n    darkgoldenrod: 'b8860b',\n    darkgray: 'a9a9a9',\n    darkgreen: '006400',\n    darkkhaki: 'bdb76b',\n    darkmagenta: '8b008b',\n    darkolivegreen: '556b2f',\n    darkorange: 'ff8c00',\n    darkorchid: '9932cc',\n    darkred: '8b0000',\n    darksalmon: 'e9967a',\n    darkseagreen: '8fbc8f',\n    darkslateblue: '483d8b',\n    darkslategray: '2f4f4f',\n    darkturquoise: '00ced1',\n    darkviolet: '9400d3',\n    deeppink: 'ff1493',\n    deepskyblue: '00bfff',\n    dimgray: '696969',\n    dodgerblue: '1e90ff',\n    feldspar: 'd19275',\n    firebrick: 'b22222',\n    floralwhite: 'fffaf0',\n    forestgreen: '228b22',\n    fuchsia: 'ff00ff',\n    gainsboro: 'dcdcdc',\n    ghostwhite: 'f8f8ff',\n    gold: 'ffd700',\n    goldenrod: 'daa520',\n    gray: '808080',\n    green: '008000',\n    greenyellow: 'adff2f',\n    honeydew: 'f0fff0',\n    hotpink: 'ff69b4',\n    indianred: 'cd5c5c',\n    indigo: '4b0082',\n    ivory: 'fffff0',\n    khaki: 'f0e68c',\n    lavender: 'e6e6fa',\n    lavenderblush: 'fff0f5',\n    lawngreen: '7cfc00',\n    lemonchiffon: 'fffacd',\n    lightblue: 'add8e6',\n    lightcoral: 'f08080',\n    lightcyan: 'e0ffff',\n    lightgoldenrodyellow: 'fafad2',\n    lightgrey: 'd3d3d3',\n    lightgreen: '90ee90',\n    lightpink: 'ffb6c1',\n    lightsalmon: 'ffa07a',\n    lightseagreen: '20b2aa',\n    lightskyblue: '87cefa',\n    lightslateblue: '8470ff',\n    lightslategray: '778899',\n    lightsteelblue: 'b0c4de',\n    lightyellow: 'ffffe0',\n    lime: '00ff00',\n    limegreen: '32cd32',\n    linen: 'faf0e6',\n    magenta: 'ff00ff',\n    maroon: '800000',\n    mediumaquamarine: '66cdaa',\n    mediumblue: '0000cd',\n    mediumorchid: 'ba55d3',\n    mediumpurple: '9370d8',\n    mediumseagreen: '3cb371',\n    mediumslateblue: '7b68ee',\n    mediumspringgreen: '00fa9a',\n    mediumturquoise: '48d1cc',\n    mediumvioletred: 'c71585',\n    midnightblue: '191970',\n    mintcream: 'f5fffa',\n    mistyrose: 'ffe4e1',\n    moccasin: 'ffe4b5',\n    navajowhite: 'ffdead',\n    navy: '000080',\n    oldlace: 'fdf5e6',\n    olive: '808000',\n    olivedrab: '6b8e23',\n    orange: 'ffa500',\n    orangered: 'ff4500',\n    orchid: 'da70d6',\n    palegoldenrod: 'eee8aa',\n    palegreen: '98fb98',\n    paleturquoise: 'afeeee',\n    palevioletred: 'd87093',\n    papayawhip: 'ffefd5',\n    peachpuff: 'ffdab9',\n    peru: 'cd853f',\n    pink: 'ffc0cb',\n    plum: 'dda0dd',\n    powderblue: 'b0e0e6',\n    purple: '800080',\n    rebeccapurple: '663399',\n    red: 'ff0000',\n    rosybrown: 'bc8f8f',\n    royalblue: '4169e1',\n    saddlebrown: '8b4513',\n    salmon: 'fa8072',\n    sandybrown: 'f4a460',\n    seagreen: '2e8b57',\n    seashell: 'fff5ee',\n    sienna: 'a0522d',\n    silver: 'c0c0c0',\n    skyblue: '87ceeb',\n    slateblue: '6a5acd',\n    slategray: '708090',\n    snow: 'fffafa',\n    springgreen: '00ff7f',\n    steelblue: '4682b4',\n    tan: 'd2b48c',\n    teal: '008080',\n    thistle: 'd8bfd8',\n    tomato: 'ff6347',\n    turquoise: '40e0d0',\n    violet: 'ee82ee',\n    violetred: 'd02090',\n    wheat: 'f5deb3',\n    white: 'ffffff',\n    whitesmoke: 'f5f5f5',\n    yellow: 'ffff00',\n    yellowgreen: '9acd32'\n  };\n  color_string = simple_colors[color_string] || color_string;\n  // emd of simple type-in colors\n\n  // array of color definition objects\n  var color_defs = [{\n    re: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*((?:\\d?\\.)?\\d)\\)$/,\n    example: ['rgba(123, 234, 45, 0.8)', 'rgba(255,234,245,1.0)'],\n    process: function (bits) {\n      return [parseInt(bits[1]), parseInt(bits[2]), parseInt(bits[3]), parseFloat(bits[4])];\n    }\n  }, {\n    re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n    example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\n    process: function (bits) {\n      return [parseInt(bits[1]), parseInt(bits[2]), parseInt(bits[3])];\n    }\n  }, {\n    re: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    example: ['#00ff00', '336699'],\n    process: function (bits) {\n      return [parseInt(bits[1], 16), parseInt(bits[2], 16), parseInt(bits[3], 16)];\n    }\n  }, {\n    re: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    example: ['#fb0', 'f0f'],\n    process: function (bits) {\n      return [parseInt(bits[1] + bits[1], 16), parseInt(bits[2] + bits[2], 16), parseInt(bits[3] + bits[3], 16)];\n    }\n  }];\n\n  // search through the definitions to find a match\n  for (var i = 0; i < color_defs.length; i++) {\n    var re = color_defs[i].re;\n    var processor = color_defs[i].process;\n    var bits = re.exec(color_string);\n    if (bits) {\n      var channels = processor(bits);\n      this.r = channels[0];\n      this.g = channels[1];\n      this.b = channels[2];\n      if (channels.length > 3) {\n        this.alpha = channels[3];\n      }\n      this.ok = true;\n    }\n  }\n\n  // validate/cleanup values\n  this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r;\n  this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g;\n  this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b;\n  this.alpha = this.alpha < 0 ? 0 : this.alpha > 1.0 || isNaN(this.alpha) ? 1.0 : this.alpha;\n\n  // some getters\n  this.toRGB = function () {\n    return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\n  };\n  this.toRGBA = function () {\n    return 'rgba(' + this.r + ', ' + this.g + ', ' + this.b + ', ' + this.alpha + ')';\n  };\n  this.toHex = function () {\n    var r = this.r.toString(16);\n    var g = this.g.toString(16);\n    var b = this.b.toString(16);\n    if (r.length == 1) r = '0' + r;\n    if (g.length == 1) g = '0' + g;\n    if (b.length == 1) b = '0' + b;\n    return '#' + r + g + b;\n  };\n\n  // help\n  this.getHelpXML = function () {\n    var examples = new Array();\n    // add regexps\n    for (var i = 0; i < color_defs.length; i++) {\n      var example = color_defs[i].example;\n      for (var j = 0; j < example.length; j++) {\n        examples[examples.length] = example[j];\n      }\n    }\n    // add type-in colors\n    for (var sc in simple_colors) {\n      examples[examples.length] = sc;\n    }\n    var xml = document.createElement('ul');\n    xml.setAttribute('id', 'rgbcolor-examples');\n    for (var i = 0; i < examples.length; i++) {\n      try {\n        var list_item = document.createElement('li');\n        var list_color = new RGBColor(examples[i]);\n        var example_div = document.createElement('div');\n        example_div.style.cssText = 'margin: 3px; ' + 'border: 1px solid black; ' + 'background:' + list_color.toHex() + '; ' + 'color:' + list_color.toHex();\n        example_div.appendChild(document.createTextNode('test'));\n        var list_item_value = document.createTextNode(' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex());\n        list_item.appendChild(example_div);\n        list_item.appendChild(list_item_value);\n        xml.appendChild(list_item);\n      } catch (e) {}\n    }\n    return xml;\n  };\n};","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar t = function (r, e) {\n  return (t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, r) {\n    t.__proto__ = r;\n  } || function (t, r) {\n    for (var e in r) Object.prototype.hasOwnProperty.call(r, e) && (t[e] = r[e]);\n  })(r, e);\n};\nfunction r(r, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Class extends value \" + String(e) + \" is not a constructor or null\");\n  function i() {\n    this.constructor = r;\n  }\n  t(r, e), r.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());\n}\nfunction e(t) {\n  var r = \"\";\n  Array.isArray(t) || (t = [t]);\n  for (var e = 0; e < t.length; e++) {\n    var i = t[e];\n    if (i.type === _.CLOSE_PATH) r += \"z\";else if (i.type === _.HORIZ_LINE_TO) r += (i.relative ? \"h\" : \"H\") + i.x;else if (i.type === _.VERT_LINE_TO) r += (i.relative ? \"v\" : \"V\") + i.y;else if (i.type === _.MOVE_TO) r += (i.relative ? \"m\" : \"M\") + i.x + \" \" + i.y;else if (i.type === _.LINE_TO) r += (i.relative ? \"l\" : \"L\") + i.x + \" \" + i.y;else if (i.type === _.CURVE_TO) r += (i.relative ? \"c\" : \"C\") + i.x1 + \" \" + i.y1 + \" \" + i.x2 + \" \" + i.y2 + \" \" + i.x + \" \" + i.y;else if (i.type === _.SMOOTH_CURVE_TO) r += (i.relative ? \"s\" : \"S\") + i.x2 + \" \" + i.y2 + \" \" + i.x + \" \" + i.y;else if (i.type === _.QUAD_TO) r += (i.relative ? \"q\" : \"Q\") + i.x1 + \" \" + i.y1 + \" \" + i.x + \" \" + i.y;else if (i.type === _.SMOOTH_QUAD_TO) r += (i.relative ? \"t\" : \"T\") + i.x + \" \" + i.y;else {\n      if (i.type !== _.ARC) throw new Error('Unexpected command type \"' + i.type + '\" at index ' + e + \".\");\n      r += (i.relative ? \"a\" : \"A\") + i.rX + \" \" + i.rY + \" \" + i.xRot + \" \" + +i.lArcFlag + \" \" + +i.sweepFlag + \" \" + i.x + \" \" + i.y;\n    }\n  }\n  return r;\n}\nfunction i(t, r) {\n  var e = t[0],\n    i = t[1];\n  return [e * Math.cos(r) - i * Math.sin(r), e * Math.sin(r) + i * Math.cos(r)];\n}\nfunction a() {\n  for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];\n  for (var e = 0; e < t.length; e++) if (\"number\" != typeof t[e]) throw new Error(\"assertNumbers arguments[\" + e + \"] is not a number. \" + typeof t[e] + \" == typeof \" + t[e]);\n  return !0;\n}\nvar n = Math.PI;\nfunction o(t, r, e) {\n  t.lArcFlag = 0 === t.lArcFlag ? 0 : 1, t.sweepFlag = 0 === t.sweepFlag ? 0 : 1;\n  var a = t.rX,\n    o = t.rY,\n    s = t.x,\n    u = t.y;\n  a = Math.abs(t.rX), o = Math.abs(t.rY);\n  var h = i([(r - s) / 2, (e - u) / 2], -t.xRot / 180 * n),\n    c = h[0],\n    y = h[1],\n    p = Math.pow(c, 2) / Math.pow(a, 2) + Math.pow(y, 2) / Math.pow(o, 2);\n  1 < p && (a *= Math.sqrt(p), o *= Math.sqrt(p)), t.rX = a, t.rY = o;\n  var m = Math.pow(a, 2) * Math.pow(y, 2) + Math.pow(o, 2) * Math.pow(c, 2),\n    O = (t.lArcFlag !== t.sweepFlag ? 1 : -1) * Math.sqrt(Math.max(0, (Math.pow(a, 2) * Math.pow(o, 2) - m) / m)),\n    l = a * y / o * O,\n    T = -o * c / a * O,\n    v = i([l, T], t.xRot / 180 * n);\n  t.cX = v[0] + (r + s) / 2, t.cY = v[1] + (e + u) / 2, t.phi1 = Math.atan2((y - T) / o, (c - l) / a), t.phi2 = Math.atan2((-y - T) / o, (-c - l) / a), 0 === t.sweepFlag && t.phi2 > t.phi1 && (t.phi2 -= 2 * n), 1 === t.sweepFlag && t.phi2 < t.phi1 && (t.phi2 += 2 * n), t.phi1 *= 180 / n, t.phi2 *= 180 / n;\n}\nfunction s(t, r, e) {\n  a(t, r, e);\n  var i = t * t + r * r - e * e;\n  if (0 > i) return [];\n  if (0 === i) return [[t * e / (t * t + r * r), r * e / (t * t + r * r)]];\n  var n = Math.sqrt(i);\n  return [[(t * e + r * n) / (t * t + r * r), (r * e - t * n) / (t * t + r * r)], [(t * e - r * n) / (t * t + r * r), (r * e + t * n) / (t * t + r * r)]];\n}\nvar u,\n  h = Math.PI / 180;\nfunction c(t, r, e) {\n  return (1 - e) * t + e * r;\n}\nfunction y(t, r, e, i) {\n  return t + Math.cos(i / 180 * n) * r + Math.sin(i / 180 * n) * e;\n}\nfunction p(t, r, e, i) {\n  var a = 1e-6,\n    n = r - t,\n    o = e - r,\n    s = 3 * n + 3 * (i - e) - 6 * o,\n    u = 6 * (o - n),\n    h = 3 * n;\n  return Math.abs(s) < a ? [-h / u] : function (t, r, e) {\n    void 0 === e && (e = 1e-6);\n    var i = t * t / 4 - r;\n    if (i < -e) return [];\n    if (i <= e) return [-t / 2];\n    var a = Math.sqrt(i);\n    return [-t / 2 - a, -t / 2 + a];\n  }(u / s, h / s, a);\n}\nfunction m(t, r, e, i, a) {\n  var n = 1 - a;\n  return t * (n * n * n) + r * (3 * n * n * a) + e * (3 * n * a * a) + i * (a * a * a);\n}\n!function (t) {\n  function r() {\n    return u(function (t, r, e) {\n      return t.relative && (void 0 !== t.x1 && (t.x1 += r), void 0 !== t.y1 && (t.y1 += e), void 0 !== t.x2 && (t.x2 += r), void 0 !== t.y2 && (t.y2 += e), void 0 !== t.x && (t.x += r), void 0 !== t.y && (t.y += e), t.relative = !1), t;\n    });\n  }\n  function e() {\n    var t = NaN,\n      r = NaN,\n      e = NaN,\n      i = NaN;\n    return u(function (a, n, o) {\n      return a.type & _.SMOOTH_CURVE_TO && (a.type = _.CURVE_TO, t = isNaN(t) ? n : t, r = isNaN(r) ? o : r, a.x1 = a.relative ? n - t : 2 * n - t, a.y1 = a.relative ? o - r : 2 * o - r), a.type & _.CURVE_TO ? (t = a.relative ? n + a.x2 : a.x2, r = a.relative ? o + a.y2 : a.y2) : (t = NaN, r = NaN), a.type & _.SMOOTH_QUAD_TO && (a.type = _.QUAD_TO, e = isNaN(e) ? n : e, i = isNaN(i) ? o : i, a.x1 = a.relative ? n - e : 2 * n - e, a.y1 = a.relative ? o - i : 2 * o - i), a.type & _.QUAD_TO ? (e = a.relative ? n + a.x1 : a.x1, i = a.relative ? o + a.y1 : a.y1) : (e = NaN, i = NaN), a;\n    });\n  }\n  function n() {\n    var t = NaN,\n      r = NaN;\n    return u(function (e, i, a) {\n      if (e.type & _.SMOOTH_QUAD_TO && (e.type = _.QUAD_TO, t = isNaN(t) ? i : t, r = isNaN(r) ? a : r, e.x1 = e.relative ? i - t : 2 * i - t, e.y1 = e.relative ? a - r : 2 * a - r), e.type & _.QUAD_TO) {\n        t = e.relative ? i + e.x1 : e.x1, r = e.relative ? a + e.y1 : e.y1;\n        var n = e.x1,\n          o = e.y1;\n        e.type = _.CURVE_TO, e.x1 = ((e.relative ? 0 : i) + 2 * n) / 3, e.y1 = ((e.relative ? 0 : a) + 2 * o) / 3, e.x2 = (e.x + 2 * n) / 3, e.y2 = (e.y + 2 * o) / 3;\n      } else t = NaN, r = NaN;\n      return e;\n    });\n  }\n  function u(t) {\n    var r = 0,\n      e = 0,\n      i = NaN,\n      a = NaN;\n    return function (n) {\n      if (isNaN(i) && !(n.type & _.MOVE_TO)) throw new Error(\"path must start with moveto\");\n      var o = t(n, r, e, i, a);\n      return n.type & _.CLOSE_PATH && (r = i, e = a), void 0 !== n.x && (r = n.relative ? r + n.x : n.x), void 0 !== n.y && (e = n.relative ? e + n.y : n.y), n.type & _.MOVE_TO && (i = r, a = e), o;\n    };\n  }\n  function O(t, r, e, i, n, o) {\n    return a(t, r, e, i, n, o), u(function (a, s, u, h) {\n      var c = a.x1,\n        y = a.x2,\n        p = a.relative && !isNaN(h),\n        m = void 0 !== a.x ? a.x : p ? 0 : s,\n        O = void 0 !== a.y ? a.y : p ? 0 : u;\n      function l(t) {\n        return t * t;\n      }\n      a.type & _.HORIZ_LINE_TO && 0 !== r && (a.type = _.LINE_TO, a.y = a.relative ? 0 : u), a.type & _.VERT_LINE_TO && 0 !== e && (a.type = _.LINE_TO, a.x = a.relative ? 0 : s), void 0 !== a.x && (a.x = a.x * t + O * e + (p ? 0 : n)), void 0 !== a.y && (a.y = m * r + a.y * i + (p ? 0 : o)), void 0 !== a.x1 && (a.x1 = a.x1 * t + a.y1 * e + (p ? 0 : n)), void 0 !== a.y1 && (a.y1 = c * r + a.y1 * i + (p ? 0 : o)), void 0 !== a.x2 && (a.x2 = a.x2 * t + a.y2 * e + (p ? 0 : n)), void 0 !== a.y2 && (a.y2 = y * r + a.y2 * i + (p ? 0 : o));\n      var T = t * i - r * e;\n      if (void 0 !== a.xRot && (1 !== t || 0 !== r || 0 !== e || 1 !== i)) if (0 === T) delete a.rX, delete a.rY, delete a.xRot, delete a.lArcFlag, delete a.sweepFlag, a.type = _.LINE_TO;else {\n        var v = a.xRot * Math.PI / 180,\n          f = Math.sin(v),\n          N = Math.cos(v),\n          x = 1 / l(a.rX),\n          d = 1 / l(a.rY),\n          E = l(N) * x + l(f) * d,\n          A = 2 * f * N * (x - d),\n          C = l(f) * x + l(N) * d,\n          M = E * i * i - A * r * i + C * r * r,\n          R = A * (t * i + r * e) - 2 * (E * e * i + C * t * r),\n          g = E * e * e - A * t * e + C * t * t,\n          I = (Math.atan2(R, M - g) + Math.PI) % Math.PI / 2,\n          S = Math.sin(I),\n          L = Math.cos(I);\n        a.rX = Math.abs(T) / Math.sqrt(M * l(L) + R * S * L + g * l(S)), a.rY = Math.abs(T) / Math.sqrt(M * l(S) - R * S * L + g * l(L)), a.xRot = 180 * I / Math.PI;\n      }\n      return void 0 !== a.sweepFlag && 0 > T && (a.sweepFlag = +!a.sweepFlag), a;\n    });\n  }\n  function l() {\n    return function (t) {\n      var r = {};\n      for (var e in t) r[e] = t[e];\n      return r;\n    };\n  }\n  t.ROUND = function (t) {\n    function r(r) {\n      return Math.round(r * t) / t;\n    }\n    return void 0 === t && (t = 1e13), a(t), function (t) {\n      return void 0 !== t.x1 && (t.x1 = r(t.x1)), void 0 !== t.y1 && (t.y1 = r(t.y1)), void 0 !== t.x2 && (t.x2 = r(t.x2)), void 0 !== t.y2 && (t.y2 = r(t.y2)), void 0 !== t.x && (t.x = r(t.x)), void 0 !== t.y && (t.y = r(t.y)), void 0 !== t.rX && (t.rX = r(t.rX)), void 0 !== t.rY && (t.rY = r(t.rY)), t;\n    };\n  }, t.TO_ABS = r, t.TO_REL = function () {\n    return u(function (t, r, e) {\n      return t.relative || (void 0 !== t.x1 && (t.x1 -= r), void 0 !== t.y1 && (t.y1 -= e), void 0 !== t.x2 && (t.x2 -= r), void 0 !== t.y2 && (t.y2 -= e), void 0 !== t.x && (t.x -= r), void 0 !== t.y && (t.y -= e), t.relative = !0), t;\n    });\n  }, t.NORMALIZE_HVZ = function (t, r, e) {\n    return void 0 === t && (t = !0), void 0 === r && (r = !0), void 0 === e && (e = !0), u(function (i, a, n, o, s) {\n      if (isNaN(o) && !(i.type & _.MOVE_TO)) throw new Error(\"path must start with moveto\");\n      return r && i.type & _.HORIZ_LINE_TO && (i.type = _.LINE_TO, i.y = i.relative ? 0 : n), e && i.type & _.VERT_LINE_TO && (i.type = _.LINE_TO, i.x = i.relative ? 0 : a), t && i.type & _.CLOSE_PATH && (i.type = _.LINE_TO, i.x = i.relative ? o - a : o, i.y = i.relative ? s - n : s), i.type & _.ARC && (0 === i.rX || 0 === i.rY) && (i.type = _.LINE_TO, delete i.rX, delete i.rY, delete i.xRot, delete i.lArcFlag, delete i.sweepFlag), i;\n    });\n  }, t.NORMALIZE_ST = e, t.QT_TO_C = n, t.INFO = u, t.SANITIZE = function (t) {\n    void 0 === t && (t = 0), a(t);\n    var r = NaN,\n      e = NaN,\n      i = NaN,\n      n = NaN;\n    return u(function (a, o, s, u, h) {\n      var c = Math.abs,\n        y = !1,\n        p = 0,\n        m = 0;\n      if (a.type & _.SMOOTH_CURVE_TO && (p = isNaN(r) ? 0 : o - r, m = isNaN(e) ? 0 : s - e), a.type & (_.CURVE_TO | _.SMOOTH_CURVE_TO) ? (r = a.relative ? o + a.x2 : a.x2, e = a.relative ? s + a.y2 : a.y2) : (r = NaN, e = NaN), a.type & _.SMOOTH_QUAD_TO ? (i = isNaN(i) ? o : 2 * o - i, n = isNaN(n) ? s : 2 * s - n) : a.type & _.QUAD_TO ? (i = a.relative ? o + a.x1 : a.x1, n = a.relative ? s + a.y1 : a.y2) : (i = NaN, n = NaN), a.type & _.LINE_COMMANDS || a.type & _.ARC && (0 === a.rX || 0 === a.rY || !a.lArcFlag) || a.type & _.CURVE_TO || a.type & _.SMOOTH_CURVE_TO || a.type & _.QUAD_TO || a.type & _.SMOOTH_QUAD_TO) {\n        var O = void 0 === a.x ? 0 : a.relative ? a.x : a.x - o,\n          l = void 0 === a.y ? 0 : a.relative ? a.y : a.y - s;\n        p = isNaN(i) ? void 0 === a.x1 ? p : a.relative ? a.x : a.x1 - o : i - o, m = isNaN(n) ? void 0 === a.y1 ? m : a.relative ? a.y : a.y1 - s : n - s;\n        var T = void 0 === a.x2 ? 0 : a.relative ? a.x : a.x2 - o,\n          v = void 0 === a.y2 ? 0 : a.relative ? a.y : a.y2 - s;\n        c(O) <= t && c(l) <= t && c(p) <= t && c(m) <= t && c(T) <= t && c(v) <= t && (y = !0);\n      }\n      return a.type & _.CLOSE_PATH && c(o - u) <= t && c(s - h) <= t && (y = !0), y ? [] : a;\n    });\n  }, t.MATRIX = O, t.ROTATE = function (t, r, e) {\n    void 0 === r && (r = 0), void 0 === e && (e = 0), a(t, r, e);\n    var i = Math.sin(t),\n      n = Math.cos(t);\n    return O(n, i, -i, n, r - r * n + e * i, e - r * i - e * n);\n  }, t.TRANSLATE = function (t, r) {\n    return void 0 === r && (r = 0), a(t, r), O(1, 0, 0, 1, t, r);\n  }, t.SCALE = function (t, r) {\n    return void 0 === r && (r = t), a(t, r), O(t, 0, 0, r, 0, 0);\n  }, t.SKEW_X = function (t) {\n    return a(t), O(1, 0, Math.atan(t), 1, 0, 0);\n  }, t.SKEW_Y = function (t) {\n    return a(t), O(1, Math.atan(t), 0, 1, 0, 0);\n  }, t.X_AXIS_SYMMETRY = function (t) {\n    return void 0 === t && (t = 0), a(t), O(-1, 0, 0, 1, t, 0);\n  }, t.Y_AXIS_SYMMETRY = function (t) {\n    return void 0 === t && (t = 0), a(t), O(1, 0, 0, -1, 0, t);\n  }, t.A_TO_C = function () {\n    return u(function (t, r, e) {\n      return _.ARC === t.type ? function (t, r, e) {\n        var a, n, s, u;\n        t.cX || o(t, r, e);\n        for (var y = Math.min(t.phi1, t.phi2), p = Math.max(t.phi1, t.phi2) - y, m = Math.ceil(p / 90), O = new Array(m), l = r, T = e, v = 0; v < m; v++) {\n          var f = c(t.phi1, t.phi2, v / m),\n            N = c(t.phi1, t.phi2, (v + 1) / m),\n            x = N - f,\n            d = 4 / 3 * Math.tan(x * h / 4),\n            E = [Math.cos(f * h) - d * Math.sin(f * h), Math.sin(f * h) + d * Math.cos(f * h)],\n            A = E[0],\n            C = E[1],\n            M = [Math.cos(N * h), Math.sin(N * h)],\n            R = M[0],\n            g = M[1],\n            I = [R + d * Math.sin(N * h), g - d * Math.cos(N * h)],\n            S = I[0],\n            L = I[1];\n          O[v] = {\n            relative: t.relative,\n            type: _.CURVE_TO\n          };\n          var H = function (r, e) {\n            var a = i([r * t.rX, e * t.rY], t.xRot),\n              n = a[0],\n              o = a[1];\n            return [t.cX + n, t.cY + o];\n          };\n          a = H(A, C), O[v].x1 = a[0], O[v].y1 = a[1], n = H(S, L), O[v].x2 = n[0], O[v].y2 = n[1], s = H(R, g), O[v].x = s[0], O[v].y = s[1], t.relative && (O[v].x1 -= l, O[v].y1 -= T, O[v].x2 -= l, O[v].y2 -= T, O[v].x -= l, O[v].y -= T), l = (u = [O[v].x, O[v].y])[0], T = u[1];\n        }\n        return O;\n      }(t, t.relative ? 0 : r, t.relative ? 0 : e) : t;\n    });\n  }, t.ANNOTATE_ARCS = function () {\n    return u(function (t, r, e) {\n      return t.relative && (r = 0, e = 0), _.ARC === t.type && o(t, r, e), t;\n    });\n  }, t.CLONE = l, t.CALCULATE_BOUNDS = function () {\n    var t = function (t) {\n        var r = {};\n        for (var e in t) r[e] = t[e];\n        return r;\n      },\n      i = r(),\n      a = n(),\n      h = e(),\n      c = u(function (r, e, n) {\n        var u = h(a(i(t(r))));\n        function O(t) {\n          t > c.maxX && (c.maxX = t), t < c.minX && (c.minX = t);\n        }\n        function l(t) {\n          t > c.maxY && (c.maxY = t), t < c.minY && (c.minY = t);\n        }\n        if (u.type & _.DRAWING_COMMANDS && (O(e), l(n)), u.type & _.HORIZ_LINE_TO && O(u.x), u.type & _.VERT_LINE_TO && l(u.y), u.type & _.LINE_TO && (O(u.x), l(u.y)), u.type & _.CURVE_TO) {\n          O(u.x), l(u.y);\n          for (var T = 0, v = p(e, u.x1, u.x2, u.x); T < v.length; T++) {\n            0 < (w = v[T]) && 1 > w && O(m(e, u.x1, u.x2, u.x, w));\n          }\n          for (var f = 0, N = p(n, u.y1, u.y2, u.y); f < N.length; f++) {\n            0 < (w = N[f]) && 1 > w && l(m(n, u.y1, u.y2, u.y, w));\n          }\n        }\n        if (u.type & _.ARC) {\n          O(u.x), l(u.y), o(u, e, n);\n          for (var x = u.xRot / 180 * Math.PI, d = Math.cos(x) * u.rX, E = Math.sin(x) * u.rX, A = -Math.sin(x) * u.rY, C = Math.cos(x) * u.rY, M = u.phi1 < u.phi2 ? [u.phi1, u.phi2] : -180 > u.phi2 ? [u.phi2 + 360, u.phi1 + 360] : [u.phi2, u.phi1], R = M[0], g = M[1], I = function (t) {\n              var r = t[0],\n                e = t[1],\n                i = 180 * Math.atan2(e, r) / Math.PI;\n              return i < R ? i + 360 : i;\n            }, S = 0, L = s(A, -d, 0).map(I); S < L.length; S++) {\n            (w = L[S]) > R && w < g && O(y(u.cX, d, A, w));\n          }\n          for (var H = 0, U = s(C, -E, 0).map(I); H < U.length; H++) {\n            var w;\n            (w = U[H]) > R && w < g && l(y(u.cY, E, C, w));\n          }\n        }\n        return r;\n      });\n    return c.minX = 1 / 0, c.maxX = -1 / 0, c.minY = 1 / 0, c.maxY = -1 / 0, c;\n  };\n}(u || (u = {}));\nvar O,\n  l = function () {\n    function t() {}\n    return t.prototype.round = function (t) {\n      return this.transform(u.ROUND(t));\n    }, t.prototype.toAbs = function () {\n      return this.transform(u.TO_ABS());\n    }, t.prototype.toRel = function () {\n      return this.transform(u.TO_REL());\n    }, t.prototype.normalizeHVZ = function (t, r, e) {\n      return this.transform(u.NORMALIZE_HVZ(t, r, e));\n    }, t.prototype.normalizeST = function () {\n      return this.transform(u.NORMALIZE_ST());\n    }, t.prototype.qtToC = function () {\n      return this.transform(u.QT_TO_C());\n    }, t.prototype.aToC = function () {\n      return this.transform(u.A_TO_C());\n    }, t.prototype.sanitize = function (t) {\n      return this.transform(u.SANITIZE(t));\n    }, t.prototype.translate = function (t, r) {\n      return this.transform(u.TRANSLATE(t, r));\n    }, t.prototype.scale = function (t, r) {\n      return this.transform(u.SCALE(t, r));\n    }, t.prototype.rotate = function (t, r, e) {\n      return this.transform(u.ROTATE(t, r, e));\n    }, t.prototype.matrix = function (t, r, e, i, a, n) {\n      return this.transform(u.MATRIX(t, r, e, i, a, n));\n    }, t.prototype.skewX = function (t) {\n      return this.transform(u.SKEW_X(t));\n    }, t.prototype.skewY = function (t) {\n      return this.transform(u.SKEW_Y(t));\n    }, t.prototype.xSymmetry = function (t) {\n      return this.transform(u.X_AXIS_SYMMETRY(t));\n    }, t.prototype.ySymmetry = function (t) {\n      return this.transform(u.Y_AXIS_SYMMETRY(t));\n    }, t.prototype.annotateArcs = function () {\n      return this.transform(u.ANNOTATE_ARCS());\n    }, t;\n  }(),\n  T = function (t) {\n    return \" \" === t || \"\\t\" === t || \"\\r\" === t || \"\\n\" === t;\n  },\n  v = function (t) {\n    return \"0\".charCodeAt(0) <= t.charCodeAt(0) && t.charCodeAt(0) <= \"9\".charCodeAt(0);\n  },\n  f = function (t) {\n    function e() {\n      var r = t.call(this) || this;\n      return r.curNumber = \"\", r.curCommandType = -1, r.curCommandRelative = !1, r.canParseCommandOrComma = !0, r.curNumberHasExp = !1, r.curNumberHasExpDigits = !1, r.curNumberHasDecimal = !1, r.curArgs = [], r;\n    }\n    return r(e, t), e.prototype.finish = function (t) {\n      if (void 0 === t && (t = []), this.parse(\" \", t), 0 !== this.curArgs.length || !this.canParseCommandOrComma) throw new SyntaxError(\"Unterminated command at the path end.\");\n      return t;\n    }, e.prototype.parse = function (t, r) {\n      var e = this;\n      void 0 === r && (r = []);\n      for (var i = function (t) {\n          r.push(t), e.curArgs.length = 0, e.canParseCommandOrComma = !0;\n        }, a = 0; a < t.length; a++) {\n        var n = t[a],\n          o = !(this.curCommandType !== _.ARC || 3 !== this.curArgs.length && 4 !== this.curArgs.length || 1 !== this.curNumber.length || \"0\" !== this.curNumber && \"1\" !== this.curNumber),\n          s = v(n) && (\"0\" === this.curNumber && \"0\" === n || o);\n        if (!v(n) || s) {\n          if (\"e\" !== n && \"E\" !== n) {\n            if (\"-\" !== n && \"+\" !== n || !this.curNumberHasExp || this.curNumberHasExpDigits) {\n              if (\".\" !== n || this.curNumberHasExp || this.curNumberHasDecimal || o) {\n                if (this.curNumber && -1 !== this.curCommandType) {\n                  var u = Number(this.curNumber);\n                  if (isNaN(u)) throw new SyntaxError(\"Invalid number ending at \" + a);\n                  if (this.curCommandType === _.ARC) if (0 === this.curArgs.length || 1 === this.curArgs.length) {\n                    if (0 > u) throw new SyntaxError('Expected positive number, got \"' + u + '\" at index \"' + a + '\"');\n                  } else if ((3 === this.curArgs.length || 4 === this.curArgs.length) && \"0\" !== this.curNumber && \"1\" !== this.curNumber) throw new SyntaxError('Expected a flag, got \"' + this.curNumber + '\" at index \"' + a + '\"');\n                  this.curArgs.push(u), this.curArgs.length === N[this.curCommandType] && (_.HORIZ_LINE_TO === this.curCommandType ? i({\n                    type: _.HORIZ_LINE_TO,\n                    relative: this.curCommandRelative,\n                    x: u\n                  }) : _.VERT_LINE_TO === this.curCommandType ? i({\n                    type: _.VERT_LINE_TO,\n                    relative: this.curCommandRelative,\n                    y: u\n                  }) : this.curCommandType === _.MOVE_TO || this.curCommandType === _.LINE_TO || this.curCommandType === _.SMOOTH_QUAD_TO ? (i({\n                    type: this.curCommandType,\n                    relative: this.curCommandRelative,\n                    x: this.curArgs[0],\n                    y: this.curArgs[1]\n                  }), _.MOVE_TO === this.curCommandType && (this.curCommandType = _.LINE_TO)) : this.curCommandType === _.CURVE_TO ? i({\n                    type: _.CURVE_TO,\n                    relative: this.curCommandRelative,\n                    x1: this.curArgs[0],\n                    y1: this.curArgs[1],\n                    x2: this.curArgs[2],\n                    y2: this.curArgs[3],\n                    x: this.curArgs[4],\n                    y: this.curArgs[5]\n                  }) : this.curCommandType === _.SMOOTH_CURVE_TO ? i({\n                    type: _.SMOOTH_CURVE_TO,\n                    relative: this.curCommandRelative,\n                    x2: this.curArgs[0],\n                    y2: this.curArgs[1],\n                    x: this.curArgs[2],\n                    y: this.curArgs[3]\n                  }) : this.curCommandType === _.QUAD_TO ? i({\n                    type: _.QUAD_TO,\n                    relative: this.curCommandRelative,\n                    x1: this.curArgs[0],\n                    y1: this.curArgs[1],\n                    x: this.curArgs[2],\n                    y: this.curArgs[3]\n                  }) : this.curCommandType === _.ARC && i({\n                    type: _.ARC,\n                    relative: this.curCommandRelative,\n                    rX: this.curArgs[0],\n                    rY: this.curArgs[1],\n                    xRot: this.curArgs[2],\n                    lArcFlag: this.curArgs[3],\n                    sweepFlag: this.curArgs[4],\n                    x: this.curArgs[5],\n                    y: this.curArgs[6]\n                  })), this.curNumber = \"\", this.curNumberHasExpDigits = !1, this.curNumberHasExp = !1, this.curNumberHasDecimal = !1, this.canParseCommandOrComma = !0;\n                }\n                if (!T(n)) if (\",\" === n && this.canParseCommandOrComma) this.canParseCommandOrComma = !1;else if (\"+\" !== n && \"-\" !== n && \".\" !== n) {\n                  if (s) this.curNumber = n, this.curNumberHasDecimal = !1;else {\n                    if (0 !== this.curArgs.length) throw new SyntaxError(\"Unterminated command at index \" + a + \".\");\n                    if (!this.canParseCommandOrComma) throw new SyntaxError('Unexpected character \"' + n + '\" at index ' + a + \". Command cannot follow comma\");\n                    if (this.canParseCommandOrComma = !1, \"z\" !== n && \"Z\" !== n) {\n                      if (\"h\" === n || \"H\" === n) this.curCommandType = _.HORIZ_LINE_TO, this.curCommandRelative = \"h\" === n;else if (\"v\" === n || \"V\" === n) this.curCommandType = _.VERT_LINE_TO, this.curCommandRelative = \"v\" === n;else if (\"m\" === n || \"M\" === n) this.curCommandType = _.MOVE_TO, this.curCommandRelative = \"m\" === n;else if (\"l\" === n || \"L\" === n) this.curCommandType = _.LINE_TO, this.curCommandRelative = \"l\" === n;else if (\"c\" === n || \"C\" === n) this.curCommandType = _.CURVE_TO, this.curCommandRelative = \"c\" === n;else if (\"s\" === n || \"S\" === n) this.curCommandType = _.SMOOTH_CURVE_TO, this.curCommandRelative = \"s\" === n;else if (\"q\" === n || \"Q\" === n) this.curCommandType = _.QUAD_TO, this.curCommandRelative = \"q\" === n;else if (\"t\" === n || \"T\" === n) this.curCommandType = _.SMOOTH_QUAD_TO, this.curCommandRelative = \"t\" === n;else {\n                        if (\"a\" !== n && \"A\" !== n) throw new SyntaxError('Unexpected character \"' + n + '\" at index ' + a + \".\");\n                        this.curCommandType = _.ARC, this.curCommandRelative = \"a\" === n;\n                      }\n                    } else r.push({\n                      type: _.CLOSE_PATH\n                    }), this.canParseCommandOrComma = !0, this.curCommandType = -1;\n                  }\n                } else this.curNumber = n, this.curNumberHasDecimal = \".\" === n;\n              } else this.curNumber += n, this.curNumberHasDecimal = !0;\n            } else this.curNumber += n;\n          } else this.curNumber += n, this.curNumberHasExp = !0;\n        } else this.curNumber += n, this.curNumberHasExpDigits = this.curNumberHasExp;\n      }\n      return r;\n    }, e.prototype.transform = function (t) {\n      return Object.create(this, {\n        parse: {\n          value: function (r, e) {\n            void 0 === e && (e = []);\n            for (var i = 0, a = Object.getPrototypeOf(this).parse.call(this, r); i < a.length; i++) {\n              var n = a[i],\n                o = t(n);\n              Array.isArray(o) ? e.push.apply(e, o) : e.push(o);\n            }\n            return e;\n          }\n        }\n      });\n    }, e;\n  }(l),\n  _ = function (t) {\n    function i(r) {\n      var e = t.call(this) || this;\n      return e.commands = \"string\" == typeof r ? i.parse(r) : r, e;\n    }\n    return r(i, t), i.prototype.encode = function () {\n      return i.encode(this.commands);\n    }, i.prototype.getBounds = function () {\n      var t = u.CALCULATE_BOUNDS();\n      return this.transform(t), t;\n    }, i.prototype.transform = function (t) {\n      for (var r = [], e = 0, i = this.commands; e < i.length; e++) {\n        var a = t(i[e]);\n        Array.isArray(a) ? r.push.apply(r, a) : r.push(a);\n      }\n      return this.commands = r, this;\n    }, i.encode = function (t) {\n      return e(t);\n    }, i.parse = function (t) {\n      var r = new f(),\n        e = [];\n      return r.parse(t, e), r.finish(e), e;\n    }, i.CLOSE_PATH = 1, i.MOVE_TO = 2, i.HORIZ_LINE_TO = 4, i.VERT_LINE_TO = 8, i.LINE_TO = 16, i.CURVE_TO = 32, i.SMOOTH_CURVE_TO = 64, i.QUAD_TO = 128, i.SMOOTH_QUAD_TO = 256, i.ARC = 512, i.LINE_COMMANDS = i.LINE_TO | i.HORIZ_LINE_TO | i.VERT_LINE_TO, i.DRAWING_COMMANDS = i.HORIZ_LINE_TO | i.VERT_LINE_TO | i.LINE_TO | i.CURVE_TO | i.SMOOTH_CURVE_TO | i.QUAD_TO | i.SMOOTH_QUAD_TO | i.ARC, i;\n  }(l),\n  N = ((O = {})[_.MOVE_TO] = 2, O[_.LINE_TO] = 2, O[_.HORIZ_LINE_TO] = 1, O[_.VERT_LINE_TO] = 1, O[_.CLOSE_PATH] = 0, O[_.QUAD_TO] = 4, O[_.SMOOTH_QUAD_TO] = 2, O[_.CURVE_TO] = 6, O[_.SMOOTH_CURVE_TO] = 4, O[_.ARC] = 7, O);\nexport { N as COMMAND_ARG_COUNTS, _ as SVGPathData, f as SVGPathDataParser, u as SVGPathDataTransformer, e as encodeSVGPath };","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/* eslint-disable no-bitwise -- used for calculations */\n\n/* eslint-disable unicorn/prefer-query-selector -- aiming at\n  backward-compatibility */\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.\n*\n* @module StackBlur\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @param {boolean} useOffset\n * @param {boolean} skipStyles\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel, useOffset, skipStyles) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n  if (!img || Object.prototype.toString.call(img).slice(8, -1) === 'HTMLImageElement' && !('naturalWidth' in img)) {\n    return;\n  }\n  var dimensionType = useOffset ? 'offset' : 'natural';\n  var w = img[dimensionType + 'Width'];\n  var h = img[dimensionType + 'Height']; // add ImageBitmap support,can blur texture source\n\n  if (Object.prototype.toString.call(img).slice(8, -1) === 'ImageBitmap') {\n    w = img.width;\n    h = img.height;\n  }\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n  if (!skipStyles) {\n    canvas.style.width = w + 'px';\n    canvas.style.height = h + 'px';\n  }\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, w, h);\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method ' + 'in processCanvasRGB(A) calls!');\n  }\n  var context = canvas.getContext('2d');\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n  stack.next = stackStart;\n  var stackIn = null,\n    stackOut = null,\n    yw = 0,\n    yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n  for (var y = 0; y < height; y++) {\n    stack = stackStart;\n    var pr = pixels[yi],\n      pg = pixels[yi + 1],\n      pb = pixels[yi + 2],\n      pa = pixels[yi + 3];\n    for (var _i = 0; _i < radiusPlus1; _i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n    var rInSum = 0,\n      gInSum = 0,\n      bInSum = 0,\n      aInSum = 0,\n      rOutSum = radiusPlus1 * pr,\n      gOutSum = radiusPlus1 * pg,\n      bOutSum = radiusPlus1 * pb,\n      aOutSum = radiusPlus1 * pa,\n      rSum = sumFactor * pr,\n      gSum = sumFactor * pg,\n      bSum = sumFactor * pb,\n      aSum = sumFactor * pa;\n    for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {\n      var p = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);\n      var r = pixels[p],\n        g = pixels[p + 1],\n        b = pixels[p + 2],\n        a = pixels[p + 3];\n      var rbs = radiusPlus1 - _i2;\n      rSum += (stack.r = r) * rbs;\n      gSum += (stack.g = g) * rbs;\n      bSum += (stack.b = b) * rbs;\n      aSum += (stack.a = a) * rbs;\n      rInSum += r;\n      gInSum += g;\n      bInSum += b;\n      aInSum += a;\n      stack = stack.next;\n    }\n    stackIn = stackStart;\n    stackOut = stackEnd;\n    for (var x = 0; x < width; x++) {\n      var paInitial = aSum * mulSum >>> shgSum;\n      pixels[yi + 3] = paInitial;\n      if (paInitial !== 0) {\n        var _a2 = 255 / paInitial;\n        pixels[yi] = (rSum * mulSum >>> shgSum) * _a2;\n        pixels[yi + 1] = (gSum * mulSum >>> shgSum) * _a2;\n        pixels[yi + 2] = (bSum * mulSum >>> shgSum) * _a2;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      var _p = x + radius + 1;\n      _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[_p];\n      gInSum += stackIn.g = pixels[_p + 1];\n      bInSum += stackIn.b = pixels[_p + 2];\n      aInSum += stackIn.a = pixels[_p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      var _stackOut = stackOut,\n        _r = _stackOut.r,\n        _g = _stackOut.g,\n        _b = _stackOut.b,\n        _a = _stackOut.a;\n      rOutSum += _r;\n      gOutSum += _g;\n      bOutSum += _b;\n      aOutSum += _a;\n      rInSum -= _r;\n      gInSum -= _g;\n      bInSum -= _b;\n      aInSum -= _a;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n    yw += width;\n  }\n  for (var _x = 0; _x < width; _x++) {\n    yi = _x << 2;\n    var _pr = pixels[yi],\n      _pg = pixels[yi + 1],\n      _pb = pixels[yi + 2],\n      _pa = pixels[yi + 3],\n      _rOutSum = radiusPlus1 * _pr,\n      _gOutSum = radiusPlus1 * _pg,\n      _bOutSum = radiusPlus1 * _pb,\n      _aOutSum = radiusPlus1 * _pa,\n      _rSum = sumFactor * _pr,\n      _gSum = sumFactor * _pg,\n      _bSum = sumFactor * _pb,\n      _aSum = sumFactor * _pa;\n    stack = stackStart;\n    for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {\n      stack.r = _pr;\n      stack.g = _pg;\n      stack.b = _pb;\n      stack.a = _pa;\n      stack = stack.next;\n    }\n    var yp = width;\n    var _gInSum = 0,\n      _bInSum = 0,\n      _aInSum = 0,\n      _rInSum = 0;\n    for (var _i4 = 1; _i4 <= radius; _i4++) {\n      yi = yp + _x << 2;\n      var _rbs = radiusPlus1 - _i4;\n      _rSum += (stack.r = _pr = pixels[yi]) * _rbs;\n      _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;\n      _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;\n      _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;\n      _rInSum += _pr;\n      _gInSum += _pg;\n      _bInSum += _pb;\n      _aInSum += _pa;\n      stack = stack.next;\n      if (_i4 < heightMinus1) {\n        yp += width;\n      }\n    }\n    yi = _x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n    for (var _y = 0; _y < height; _y++) {\n      var _p2 = yi << 2;\n      pixels[_p2 + 3] = _pa = _aSum * mulSum >>> shgSum;\n      if (_pa > 0) {\n        _pa = 255 / _pa;\n        pixels[_p2] = (_rSum * mulSum >>> shgSum) * _pa;\n        pixels[_p2 + 1] = (_gSum * mulSum >>> shgSum) * _pa;\n        pixels[_p2 + 2] = (_bSum * mulSum >>> shgSum) * _pa;\n      } else {\n        pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;\n      }\n      _rSum -= _rOutSum;\n      _gSum -= _gOutSum;\n      _bSum -= _bOutSum;\n      _aSum -= _aOutSum;\n      _rOutSum -= stackIn.r;\n      _gOutSum -= stackIn.g;\n      _bOutSum -= stackIn.b;\n      _aOutSum -= stackIn.a;\n      _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;\n      _rSum += _rInSum += stackIn.r = pixels[_p2];\n      _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];\n      _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];\n      _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];\n      stackIn = stackIn.next;\n      _rOutSum += _pr = stackOut.r;\n      _gOutSum += _pg = stackOut.g;\n      _bOutSum += _pb = stackOut.b;\n      _aOutSum += _pa = stackOut.a;\n      _rInSum -= _pr;\n      _gInSum -= _pg;\n      _bInSum -= _pb;\n      _aInSum -= _pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n  var p, rbs;\n  var yw = 0,\n    yi = 0;\n  for (var y = 0; y < height; y++) {\n    var pr = pixels[yi],\n      pg = pixels[yi + 1],\n      pb = pixels[yi + 2],\n      rOutSum = radiusPlus1 * pr,\n      gOutSum = radiusPlus1 * pg,\n      bOutSum = radiusPlus1 * pb,\n      rSum = sumFactor * pr,\n      gSum = sumFactor * pg,\n      bSum = sumFactor * pb;\n    stack = stackStart;\n    for (var _i5 = 0; _i5 < radiusPlus1; _i5++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n    var rInSum = 0,\n      gInSum = 0,\n      bInSum = 0;\n    for (var _i6 = 1; _i6 < radiusPlus1; _i6++) {\n      p = yi + ((widthMinus1 < _i6 ? widthMinus1 : _i6) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - _i6);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n    stackIn = stackStart;\n    stackOut = stackEnd;\n    for (var x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >>> shgSum;\n      pixels[yi + 1] = gSum * mulSum >>> shgSum;\n      pixels[yi + 2] = bSum * mulSum >>> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n    yw += width;\n  }\n  for (var _x2 = 0; _x2 < width; _x2++) {\n    yi = _x2 << 2;\n    var _pr2 = pixels[yi],\n      _pg2 = pixels[yi + 1],\n      _pb2 = pixels[yi + 2],\n      _rOutSum2 = radiusPlus1 * _pr2,\n      _gOutSum2 = radiusPlus1 * _pg2,\n      _bOutSum2 = radiusPlus1 * _pb2,\n      _rSum2 = sumFactor * _pr2,\n      _gSum2 = sumFactor * _pg2,\n      _bSum2 = sumFactor * _pb2;\n    stack = stackStart;\n    for (var _i7 = 0; _i7 < radiusPlus1; _i7++) {\n      stack.r = _pr2;\n      stack.g = _pg2;\n      stack.b = _pb2;\n      stack = stack.next;\n    }\n    var _rInSum2 = 0,\n      _gInSum2 = 0,\n      _bInSum2 = 0;\n    for (var _i8 = 1, yp = width; _i8 <= radius; _i8++) {\n      yi = yp + _x2 << 2;\n      _rSum2 += (stack.r = _pr2 = pixels[yi]) * (rbs = radiusPlus1 - _i8);\n      _gSum2 += (stack.g = _pg2 = pixels[yi + 1]) * rbs;\n      _bSum2 += (stack.b = _pb2 = pixels[yi + 2]) * rbs;\n      _rInSum2 += _pr2;\n      _gInSum2 += _pg2;\n      _bInSum2 += _pb2;\n      stack = stack.next;\n      if (_i8 < heightMinus1) {\n        yp += width;\n      }\n    }\n    yi = _x2;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n    for (var _y2 = 0; _y2 < height; _y2++) {\n      p = yi << 2;\n      pixels[p] = _rSum2 * mulSum >>> shgSum;\n      pixels[p + 1] = _gSum2 * mulSum >>> shgSum;\n      pixels[p + 2] = _bSum2 * mulSum >>> shgSum;\n      _rSum2 -= _rOutSum2;\n      _gSum2 -= _gOutSum2;\n      _bSum2 -= _bOutSum2;\n      _rOutSum2 -= stackIn.r;\n      _gOutSum2 -= stackIn.g;\n      _bOutSum2 -= stackIn.b;\n      p = _x2 + ((p = _y2 + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      _rSum2 += _rInSum2 += stackIn.r = pixels[p];\n      _gSum2 += _gInSum2 += stackIn.g = pixels[p + 1];\n      _bSum2 += _bInSum2 += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      _rOutSum2 += _pr2 = stackOut.r;\n      _gOutSum2 += _pg2 = stackOut.g;\n      _bOutSum2 += _pb2 = stackOut.b;\n      _rInSum2 -= _pr2;\n      _gInSum2 -= _pg2;\n      _bInSum2 -= _pb2;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n  return imageData;\n}\n/**\n *\n */\n\nvar BlurStack =\n/**\n * Set properties.\n */\nfunction BlurStack() {\n  _classCallCheck(this, BlurStack);\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\nexport { BlurStack, processCanvasRGB as canvasRGB, processCanvasRGBA as canvasRGBA, processImage as image, processImageDataRGB as imageDataRGB, processImageDataRGBA as imageDataRGBA };"],"sourceRoot":""}