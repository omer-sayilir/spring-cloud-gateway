(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[35],{1332:function(e,t,a){"use strict";var s=a(0),i=a.n(s),n=a(264),l=a(219),o=a(5),r=a(3),c=a(12),d=a(2);class h extends s.Component{constructor(e){super(e),this.state={selectedDepts:{},conditionalList:[],declineList:[]},["onSelectionChange","conditionalListChange","declineListChange"].forEach(e=>this[e]=this[e].bind(this))}componentDidMount(){let e=Object(c.q)(this.props.treeData[0]);this.setState({level:e[0],maxLength:e[1]+20})}onSelectionChange(e,t){let a=this.state.selectedDepts,s=t.target.checked;a[e.key]=s;let i=Object(c.M)(this.props.treeData[0],e.key);i&&i.map(e=>a[e]=s),this.setState({selectedDepts:a}),this.props.onSelect(a)}conditionalListChange(e,t){let a=this,s=t.target.checked,i=[];i.push(e.title);let n={url:"/employee/getEmployeeListForDept",method:"post",data:i};a.props.loading(!0),Object(o.e)(n).then((function(e){let t=a.state.conditionalList;if(s)e.data&&Array.isArray(e.data)?e.data.map(e=>t.push(e)):e.data&&"number"===typeof e.data&&t.push(e.data);else if(e.data&&Array.isArray(e.data))e.data.map(e=>{let a=t.indexOf(e);a>-1&&t.splice(a,1)});else if(e.data&&"number"===typeof e.data){let a=t.indexOf(e.data);a>-1&&t.splice(a,1)}t=Array.from(new Set(t)),a.setState({conditionalList:t}),a.props.changeOnConditionalList(t),a.props.loading(!1)})).catch((function(e){Object(r.v)(e),a.props.loading(!1)}))}declineListChange(e,t){let a=this,s=t.target.checked,i=[];i.push(e.title);let n={url:"/employee/getEmployeeListForDept",method:"post",data:i};a.props.loading(!0),Object(o.e)(n).then((function(e){let t=a.state.declineList;if(s)e.data&&Array.isArray(e.data)?e.data.map(e=>t.push(e)):e.data&&"number"===typeof e.data&&t.push(e.data);else if(e.data&&Array.isArray(e.data))e.data.map(e=>{let a=t.indexOf(e);a>-1&&t.splice(a,1)});else if(e.data&&"number"===typeof e.data){let a=t.indexOf(e.data);a>-1&&t.splice(a,1)}t=Array.from(new Set(t)),a.setState({declineList:t}),a.props.changeOnDeclineList(t),a.props.loading(!1)})).catch((function(e){Object(r.v)(e),a.props.loading(!1)}))}render(){let e=this.state.maxLength?this.state.maxLength:0;const t=(e,s)=>e&&e.length?e.map(e=>i.a.createElement(l.a,{key:e.key,title:a(e,s)},t(e.children,s-18))):null,a=(e,t)=>i.a.createElement("div",{style:{display:"inline-flex"}},i.a.createElement(d.Col,{xs:"10",style:{margin:"0",padding:"0",width:t+"px"},title:e.title},i.a.createElement("label",{style:{overflow:"hidden"}}," ",e.title,"... ")),i.a.createElement("div",{className:"2",style:{display:"inline-flex"}},i.a.createElement(d.Col,{xs:"6"},"|",i.a.createElement("input",{type:"checkbox",style:{width:"40px"},checked:this.state.selectedDepts&&this.state.selectedDepts[e.key],onChange:t=>this.onSelectionChange(e,t)}),"|")));return i.a.createElement("div",{className:"col-xs-12"},i.a.createElement("div",{style:{marginBottom:"-15px"}},i.a.createElement("label",{style:{width:e+135+"px",textAlign:"center"}},this.props.selectedAuthorizationWay===r.c.EXPENDITURE?"Masraf Yeri":"Departman"),i.a.createElement("label",{style:{width:"40px",textAlign:"center"}},"Se\xe7im")),i.a.createElement("div",null,i.a.createElement(n.a,{showLine:!0,icon:e=>{let{}=e;return i.a.createElement("i",{className:"fa fa-university"})},selectable:!1,defaultExpandAll:!0},t(this.props.treeData,e))))}}t.a=h},1515:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(2),l=a(19),o=a(61),r=a(21),c=a(63),d=a(105),h=a(3),m=a(5),p=a(6),u=a.n(p),g=a(9),y=a.n(g),f=a(20),b=a.n(f),E=a(13),D=a.n(E),v=a(54),S=a.n(v),x=a(174),O=(a(92),a(12)),k=a(84),C=a(100),w=a(1332);class j extends s.Component{constructor(e){super(e),this.readDepartmentTreeData=()=>{let e=this;e.setState({treeData:[],selectedDepts:[]});let t={url:"/department/readDepartmentTreeData",method:"post",data:e.state.selectedAuthorizationWay};Object(m.e)(t).then((function(t){e.setState({treeData:t.data}),e.props.reload(!1)})).catch((function(e){Object(h.v)(e)}))},this.createCustomFields=e=>{let t="";if(e.length){let a=e.toString().split("&");e="",a.map(a=>{a.length&&(a.includes("cstmfld")?t=t+(t.length?"#":"")+a.replace("cstmfld",""):e=e+"&"+a)})}return[e,t]},this.arrangeDataSet=e=>{let t={sheetName:"Dok\xfcman_Listesi"};return t.uuid=Object(h.h)(),t.survey=e,t.type="pdf",t},this.detailedDepartment=()=>{this.setState({detailedDepartment:!this.state.detailedDepartment})},this.state={selectionEmployee:[],selectionDoc:[],selectedAll:!1,conditionalSelection:[],loading:!1,manual:!1,btnDisabledEmployee:!0,btnDisabledDoc:!0,content:[],docContent:[],treeData:[],total:0,totalDoc:0,documentExist:!1,searching:!1,searchQuery:void 0,page:0,size:10,pageDoc:0,sizeDoc:5,detailedDepartment:!1,selectedAuthorizationWay:h.c.DEPARTMENT},this.handleSearch=this.handleSearch.bind(this),this.fetchData=this.fetchData.bind(this),this.fetchDataDoc=this.fetchDataDoc.bind(this),this.getTrStyles=this.getTrStyles.bind(this),this.setSelectedDepts=this.setSelectedDepts.bind(this),this.downloadDocumentsMedia=this.downloadDocumentsMedia.bind(this),this.isSelected=this.isSelected.bind(this),this.toggleCheckboxChange=this.toggleCheckboxChange.bind(this),this.onAuthorizationWaysChange=this.onAuthorizationWaysChange.bind(this)}componentDidMount(){this.setState({conditionalSelection:this.props.conditionalList}),this.readDepartmentTreeData()}async onAuthorizationWaysChange(e){await this.setState({selectedAuthorizationWay:e.target.value}),this.readDepartmentTreeData()}setSelectedDepts(e){let t=this,a=t.state.selectedDepts;return a&&Object.keys(a).map(s=>{a[s]&&(e=t.state.selectedAuthorizationWay===h.c.EXPENDITURE?e+"&expenditureDepartment_id="+s:e+"&department_id="+s)}),e}fetchData(e,t,a,s){let i=this,n=void 0!==e?"&sort="+e+","+t:"",l=i.state.searchQuery?"&"+i.state.searchQuery:"",o=i.createCustomFields(l),r="?page="+a+"&size="+s+o[0]+n+"&customFields="+o[1];r=i.setSelectedDepts(r);let c={url:"/employee/readActiveEmployeeAll"+r,method:"get"};i.setState({loading:!0,searching:!0,manual:!0!==i.manual&&i.manual}),Object(m.e)(c).then((function(e){i.setState({page:a,size:s,total:e.data&&e.data.page?e.data.page.totalElements:0,content:e.data&&e.data.page?e.data.page.content:[],totalIdList:e.data?e.data.selectedIdList:[],loading:!1,searching:!1})})).catch((function(e){i.setState({loading:!1,searching:!1}),Object(h.v)(e)}))}fetchDataDoc(e,t,a,s){let i=this,n={url:"/survey/getDocumentsFromSurvey?page="+a+"&size="+s+"&docId="+i.props.selected.id,method:"get"};Object(m.e)(n).then((function(e){e.data.content.length>0?i.setState({sizeDoc:s,pageDoc:a,documentExist:e.data.content,docContent:e.data.content?e.data.content:[],totalDoc:e.data.content?e.data.totalElements:0,loading:!1,searching:!1}):(i.props.close(),u.a.warning("Bu formun i\xe7erisinde indirilebilir dok\xfcman bulunmamaktad\u0131r.",{position:"top-right",effect:"stackslide",timeout:3e3}))})).catch((function(e){Object(h.v)(e)}))}toggleCheckboxChange(e,t,a){let s=this,i=e.target.checked,n="employee"===a?s.state.content:s.state.docContent,l="employee"===a?s.state.selectionEmployee:s.state.selectionDoc;if("all"===t){let e=[];i&&n.forEach(t=>{e.push(t.id)}),s.setState({selection:e,selectedAll:i}),"employee"===a?s.setState({btnDisabledEmployee:0===e.length}):s.setState({btnDisabledDoc:0===e.length})}else{let e=l.indexOf(t.id);e>=0?l=[...l.slice(0,e),...l.slice(e+1)]:l.push(t.id),"employee"===a?s.setState({selectionEmployee:l,selectedAll:l.length>0&&l.length===s.state.content.length,btnDisabledEmployee:0===l.length}):s.setState({selectionDoc:l,btnDisabledDoc:0===l.length})}}isSelected(e){return this.state.selectionEmployee&&-1!==this.state.selectionEmployee.indexOf(e)||this.state.selectionDoc&&-1!==this.state.selectionDoc.indexOf(e)}getTrStyles(e){return{backgroundColor:!this.state.selectionEmployee&&!this.state.selectionDoc||-1===this.state.selectionEmployee.indexOf(e.id)&&-1===this.state.selectionDoc.indexOf(e.id)?"#f9f9f9":"#ffc"}}handleSearch(e){this.setState({searchQuery:e,searching:!0},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}downloadDocumentsMedia(){let e=this.state.selectionDoc,t=this.state.selectionEmployee,a=this.arrangeDataSet(this.props.selected),s={url:"/survey/getDocumentsFromEmployee",method:"post",data:{surveyId:this.props.selected.id,selectionDoc:e,selectionEmployee:t,payload:a}};this.setState({openDocumentModal:!1}),Object(m.e)(s).then((function(e){u.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3})})).catch((function(e){Object(h.v)(e)}))}render(){let e=[],t=[],a=[];this.state.content&&this.state.content instanceof Array&&this.state.content.map(s=>{s.name&&"ACTIVE"!==s.statusType||e.push(s.id),a.includes(s.tckn)?t.includes(s.tckn)||t.push(s.tckn):a.push(s.tckn)});let s=[{Header:i.a.createElement(C.a,{selectionIdList:this.state.selectionEmployee,totalIdList:this.state.totalIdList,pageIdList:e,onChange:e=>this.setState({selectionEmployee:e,btnDisabledEmployee:0===e.length})}),accessor:"id",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.content&&i.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),disabled:this.props.selectedList&&-1!==this.props.selectedList.indexOf(e.id),onChange:a=>this.toggleCheckboxChange(a,e,"employee",t)})},{Header:"Ad",accessor:"name"},{Header:"Soyad",accessor:"surname"},{Header:"TCKN",accessor:"tckn"},{Header:"Durum",accessor:"statusType",Cell:e=>i.a.createElement("div",null,i.a.createElement("span",null,Object(O.R)().map((function(t){if(t.value===e.statusType)return t.label}))))}],r=Object(O.G)(this,s,"accessor");const c=[{label:"Ad\u0131",accessor:"name",type:"text",operator:"="},{label:"Soyad\u0131",accessor:"surname",type:"text",operator:"="},{label:"TCKN",accessor:"tckn",type:"numericText",operator:"="},{label:"e-Posta Adresi",accessor:"email",type:"text",operator:"="},{label:"Telefon Numaras\u0131",accessor:"telephone",type:"text",operator:"="},{label:"Durum",accessor:"statusType",type:"select",operator:"=",selectData:Object(O.R)()}];let d=Object(O.I)(this,c,"accessor",!1);const m=[{Header:"Se\xe7im",accessor:"id",type:"checkbox",sortable:!1,Cell:(e,t)=>this.state.docContent&&i.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),disabled:this.props.selectedList&&-1!==this.props.selectedList.indexOf(e.id),onChange:a=>this.toggleCheckboxChange(a,e,"doc",t)})},{Header:"Dok\xfcman \u0130smi",accessor:"docName",sortable:!1,type:"text"}];return i.a.createElement(k.a,{disabled:this.state.btnDisabledEmployee||this.state.btnDisabledDoc,isOpen:this.props.isOpen,size:"xxl",title:"Dok\xfcman Se\xe7imi",confirmBtnText:"\u0130ndirme Talebi",cancelBtnText:"Kapat",onConfirm:this.downloadDocumentsMedia,onCancel:()=>this.props.close()},i.a.createElement("div",null,i.a.createElement("div",{className:"row",style:{paddingTop:"1%",marginTop:"1%",marginBottom:"1%",paddingLeft:"1.8%",paddingRight:"1.8%"}},this.state.treeData&&this.state.treeData.length>0&&i.a.createElement("div",{className:"col-xs-12 col-md-6",id:"departmentContainer",style:{padding:0,height:"400px"},onClick:()=>this.detailedDepartment()},i.a.createElement(n.Col,{sm:6},i.a.createElement("div",{style:{textAlign:"center"},onChange:this.onAuthorizationWaysChange},i.a.createElement("input",{sm:6,type:"radio",value:h.c.DEPARTMENT,name:"authorizationWay",defaultChecked:this.state.selectedAuthorizationWay===h.c.DEPARTMENT})," Departman",i.a.createElement("input",{sm:6,type:"radio",value:h.c.EXPENDITURE,name:"authorizationWay",defaultChecked:this.state.selectedAuthorizationWay===h.c.EXPENDITURE,style:{marginLeft:20}})," Masraf Yeri")),i.a.createElement(w.a,{treeData:this.state.treeData,selectedDepts:this.state.selectedDepts,loading:e=>this.setState({loading:e}),onSelect:e=>this.setState({selectedDepts:e,manual:!0}),selectedAuthorizationWay:this.state.selectedAuthorizationWay,changeOnConditionalList:e=>this.setState({conditionalSelection:e})})),i.a.createElement("div",{className:"col-xs-12 col-md-6"},i.a.createElement(l.a,{columns:m,content:this.state.docContent,loading:this.state.loading,page:this.state.pageDoc,size:this.state.sizeDoc,total:this.state.totalDoc,manual:this.state.manual,options:["5","10","20"],fetchData:this.fetchDataDoc,getTrStyles:this.getTrStyles}),i.a.createElement(o.a,{fields:d,loading:this.state.searching,onSearch:this.handleSearch}))),i.a.createElement("div",{className:"col-xs-12",style:{marginTop:"20px"}},i.a.createElement(l.a,{columns:r,content:this.state.content,loading:this.state.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData,getTrStyles:this.getTrStyles}))),this.state.alert)}}var A=j,N=a(16),T=a(246),z=a(26),B=a(7),F=a(10),M=a(35),L=a(30),I=a(43),P=a(48),Y=a(25),V=a(251),W=(a(24),a(11),a(42),a(32)),R=(a(134),a(665),a(407),a(331)),H=a(1295),K=function(e){return function(t){t.in,t.onExited,t.appear,t.enter,t.exit;var a=Object(z.a)(t,["in","onExited","appear","enter","exit"]);return i.a.createElement(e,a)}};function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,s=Object(Y.a)(e);if(t){var i=Object(Y.a)(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return Object(P.a)(this,a)}}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(F.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t=e.component,a=e.duration,s=void 0===a?1:a,n=e.in,l=(e.onExited,Object(z.a)(e,["component","duration","in","onExited"])),o={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(s,"ms")},exiting:{opacity:0},exited:{opacity:0}};return i.a.createElement(R.c,{mountOnEnter:!0,unmountOnExit:!0,in:n,timeout:s},(function(e){var a={style:J({},o[e])};return i.a.createElement(t,Object(B.a)({innerProps:a},l))}))},$=function(e){Object(I.a)(a,e);var t=G(a);function a(){var e;Object(M.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).duration=260,e.rafID=void 0,e.state={width:"auto"},e.transition={exiting:{width:0,transition:"width ".concat(e.duration,"ms ease-out")},exited:{width:0}},e.getWidth=function(t){t&&isNaN(e.state.width)&&(e.rafID=window.requestAnimationFrame((function(){var a=t.getBoundingClientRect().width;e.setState({width:a})})))},e.getStyle=function(e){return{overflow:"hidden",whiteSpace:"nowrap",width:e}},e.getTransition=function(t){return e.transition[t]},e}return Object(L.a)(a,[{key:"componentWillUnmount",value:function(){this.rafID&&window.cancelAnimationFrame(this.rafID)}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,s=t.in,n=this.state.width;return i.a.createElement(R.c,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:s,timeout:this.duration},(function(t){var s=J(J({},e.getStyle(n)),e.getTransition(t));return i.a.createElement("div",{ref:e.getWidth,style:s},a)}))}}]),a}(s.Component),_=function(e){return function(t){var a=t.in,s=t.onExited,n=Object(z.a)(t,["in","onExited"]);return i.a.createElement($,{in:a,onExited:s},i.a.createElement(e,Object(B.a)({cropWithEllipsis:a},n)))}},X=function(e){return function(t){return i.a.createElement(Q,Object(B.a)({component:e,duration:t.isMulti?260:1},t))}},q=function(e){return function(t){return i.a.createElement(Q,Object(B.a)({component:e},t))}},Z=function(e){return function(t){return i.a.createElement(H.a,Object(B.a)({component:e},t))}};function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){Object(F.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(W.E)({components:e}),a=t.Input,s=t.MultiValue,i=t.Placeholder,n=t.SingleValue,l=t.ValueContainer,o=Object(z.a)(t,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return te({Input:K(a),MultiValue:_(s),Placeholder:X(i),SingleValue:q(n),ValueContainer:Z(l)},o)},se=ae();se.Input,se.MultiValue,se.Placeholder,se.SingleValue,se.ValueContainer;const ie=Object(V.a)(ae,W.b)();class ne extends s.Component{constructor(e){super(e),this.statesEnum={ACTIVE:"AKT\u0130F",PASSIVE:"PAS\u0130F",APPROVED:"Onayland\u0131",APPROVEWAITING:"Onay Bekliyor",WAITING:"G\xf6nderilmeyi Bekliyor",REJECTED:"Reddedildi",SAVED:"Kaydedildi",REFORMATION:"Yeniden D\xfczenleme",SENT:"G\xf6nderildi"},this.getOptionsFromEnum=e=>Object.keys(e).filter(t=>"AKT\u0130F"!==e[t]&&"PAS\u0130F"!==e[t]).map(t=>({value:t,label:e[t]})),this.handleSelectChange=e=>{let t=null;null!=e?(t=e.map(e=>e.value),console.log("statusFilter:",t)):t=null,console.log("Selected:",e),this.setState({statusFilter:t})},this.downloadDocuments=e=>{this.downloadMedia(e)},this.arrangeDataSet=e=>{let t={sheetName:"Cevap_Listesi"};return t.uuid=Object(h.h)(),t.type="xlsx",t.startDate=this.state.startDate,t.endDate=this.state.endDate,t.statusFilter=this.state.statusFilter,t.survey=e,t},this.downloadMedia=e=>{let t=this,a=t.arrangeDataSet(e);if(y()(t.state.startDate).isValid()&&y()(t.state.endDate).isValid()&&y()(t.state.startDate).startOf("day").isBefore(y()(t.state.endDate).startOf("day"))){let e={url:"/survey/getAnswers",method:"post",data:a};t.setState({openExcelModal:!1}),Object(m.e)(e).then((function(){u.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3})})).catch((function(e){Object(h.v)(e)}))}else u.a.warning("Ba\u015flang\u0131\xe7 ve biti\u015f tarihleri doldurulmal\u0131d\u0131r. Se\xe7ilen ba\u015flang\u0131\xe7 tarihi biti\u015f tarihinden en az 1 (bir) g\xfcn \xf6nce olmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:15e3})},this.showExcelModal=()=>i.a.createElement(D.a,{showCancel:!0,style:{width:"578px",height:"490px"},title:"Cevap Listesi",confirmBtnBsStyle:"info",cancelBtnBsStyle:"default",confirmBtnText:"Cevap Listesi \u0130ndir",disabled:""===this.state.startDate||""===this.state.endDate,cancelBtnText:"Kapat",onCancel:()=>this.setState({openExcelModal:!1,startDate:"",endDate:"",row:""}),onConfirm:()=>this.downloadDocuments(this.state.row)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("span",{style:{fontSize:"small",margin:"-10px 10px 0 10px"}},"Se\xe7ili talep formunun se\xe7ilecek zaman aral\u0131\u011f\u0131ndaki cevap listesinin ge\xe7mi\u015f kay\u0131t belgesini indirebilirsiniz.")),i.a.createElement("div",{className:"col-sm-12",style:{margin:"1em 0 1em 0"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("span",{style:{fontWeight:"bold"}},"Ba\u015flang\u0131\xe7 Tarihi *")),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement(S.a,{locale:"tr",className:"datepicker",style:{fontSize:"12px"},input:!0,inputProps:{id:"startDate"},closeOnSelect:!0,value:y()(this.state.startDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.isBefore(S.a.moment())},onChange:e=>{this.setState({startDate:y()(e).format("YYYY-MM-DD")})}})))),i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("span",{style:{fontWeight:"bold"}},"Biti\u015f Tarihi *")),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement(S.a,{locale:"tr",className:"datepicker",input:!0,inputProps:{id:"startDate"},closeOnSelect:!0,value:y()(this.state.endDate),dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){return e.isBefore(S.a.moment())},onChange:e=>{this.setState({endDate:y()(e).format("YYYY-MM-DD")})}})))),i.a.createElement("div",{className:"col-sm-12",style:{marginTop:"10px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("span",{style:{fontWeight:"bold"}},"Durum *")),i.a.createElement("div",{className:"col-sm-6",style:{fontSize:"15px"}},i.a.createElement(T.a,{isMulti:!0,closeMenuOnSelect:!1,components:ie,options:this.getOptionsFromEnum(this.statesEnum),onChange:this.handleSelectChange,placeholder:"Durum Se\xe7iniz",styles:{menu:e=>({...e,maxHeight:"140px"}),menuList:e=>({...e,maxHeight:"140px",overflow:"auto"})}}))))))),this.showDocumentModal=()=>i.a.createElement(A,{isOpen:this.state.openDocumentModal,selected:this.state.row,close:()=>this.setState({openDocumentModal:!1})}),this.activateJoyride=()=>{this.setState({run:!this.state.run})},this.callback=e=>{"close"!==e.action&&"skip"!==e.action&&"tour:end"!==e.type||this.setState({run:!1})},this.state={pageNumber:0,pageSize:10,loading:!1,manual:!1,list:[],total:0,searching:!1,searchQuery:void 0,page:0,size:10,searchKey:"",locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla"},shouldRun:!0,stop:!1,steps:[{target:".baseBackground",content:'Daha \xf6nceden olu\u015fturmu\u015f oldu\u011funuz "Talep" ve "\xd6zl\xfck" formlar\u0131n\u0131 d\xfczenleyebilece\u011finiz ekran buras\u0131d\u0131r.',placement:"center",disableBeacon:"true"},{target:".zocial",content:'Daha \xf6nceden form olu\u015fturmad\u0131ysan\u0131z "Yeni Olu\u015ftur" butonuna t\u0131klay\u0131p Form Olu\u015fturma Ekran\u0131na gidebilirsiniz.',placement:"auto",disableBeacon:"true"}],run:!1,groupList:[],openExcelModal:!1,openDocumentModal:!1,startDate:"",endDate:"",statusFilter:"",row:"",survey:[]},this.fetchData=this.fetchData.bind(this),this.handleSearch=this.handleSearch.bind(this),this.editClicked=this.editClicked.bind(this),this.editClicked2=this.editClicked2.bind(this),this.saveClicked=this.saveClicked.bind(this),this.createClicked=this.createClicked.bind(this),this.createClicked2=this.createClicked2.bind(this),this.deleteClicked=this.deleteClicked.bind(this),this.searchWithKey=this.searchWithKey.bind(this),this.downloadMedia=this.downloadMedia.bind(this),this.getGroupList=this.getGroupList.bind(this),this.importFile=this.importFile.bind(this),this.exportFile=this.exportFile.bind(this),this.saveImport=this.saveImport.bind(this)}componentDidMount(){this.getGroupList()}getGroupList(){let e=this;Object(m.e)({url:"/employee/getGroups",method:"get"}).then((function(t){let a=[];t.data.map(e=>{a.push({value:e.id,label:e.name,group:e})}),e.setState({groupList:a})})).catch((function(e){Object(h.v)(e)}))}handleSearch(e){this.setState({searchQuery:e,searching:!0},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}searchWithKey(e){this.setState({searchKey:e.target.value,manual:!0})}fetchData(e,t,a,s){let i=this,n=void 0!==e?"&sort="+e+","+t:"",l=i.state.searchQuery?"&"+i.state.searchQuery:"",o={url:"/survey/readSurveyFormsAll?page="+a+"&size="+s+l+n,method:"get"};i.setState({loading:!0,searching:!0,manual:!0!==i.manual&&i.manual}),i.props.reload(!0),Object(m.e)(o).then((function(e){i.setState({page:a,size:s,total:e.data.totalElements,list:e.data.content,loading:!1,searching:!1}),i.props.reload(!1)})).catch((function(e){i.setState({loading:!1,searching:!1}),i.props.reload(!1),Object(h.v)(e)}))}createClicked(){this.props.history.push({pathname:`/${this.props.peykName}/formeditor`,editedForm:!1})}createClicked2(){this.props.history.push({pathname:`/${this.props.peykName}/formbuilder`})}importFile(){let e=document.createElement("input");e.type="file",e.onchange=e=>{let t=e.target.files[0],a=new FileReader;a.readAsText(t),a.addEventListener("load",()=>{this.saveImport(JSON.parse(a.result))},!1)},e.click()}saveImport(e){let t=this;e.id=null,e.customer=t.props.currentUser.customerId,e.formTemplate=null,e.surveyAnswerGroups=[];let a={url:"/survey/saveSurveyForm",method:"post",data:e};Object(m.e)(a).then((function(){b()({title:"Ba\u015far\u0131l\u0131 ! ",text:"Kaydetme i\u015flemi ba\u015far\u0131yla ger\xe7ekle\u015ftirildi.",showCancelButton:!0,html:'Kaydetme i\u015flemi ba\u015far\u0131yla ger\xe7ekle\u015ftirildi.</br></br><span style="color:red;font-size:20px">*</span>Kaydetti\u011finiz formu "Form \u015eablonlar\u0131" sayfas\u0131ndan  bir \u015fablona ba\u011flayarak g\xf6nderime haz\u0131r hale getirebilirsiniz.',type:"success",cancelButtonText:"Kapat",confirmButtonText:"Form \u015eablonlar\u0131na Git"}).then(e=>{"cancel"===e.dismiss||"overlay"===e.dismiss?(t.props.history.push(`/${t.props.peykName}/formbuilderpage`),t.fetchData(void 0,void 0,0,10)):(t.props.history.push(`/${t.props.peykName}/formtemplate`),document.getElementById("formbuilderpageNavigator").classList.remove("active"),document.getElementById("formtemplateNavigator").classList.add("active"))})})).catch((function(e){Object(h.v)(e)}))}exportFile(e){const t="data:text/json;chatset=utf-8,"+encodeURIComponent(JSON.stringify(e)),a=document.createElement("a");a.href=t,a.download=this.props.currentUser.formattedName+" "+e.name+" formu aktar\u0131m dosyas\u0131.json",a.click()}editClicked(e){delete Object.assign({},e)._$visited,this.props.history.push({pathname:`/${this.props.peykName}/formeditor`,selectedSurveyForm:e,editedForm:!0})}editClicked2(e){delete Object.assign({},e)._$visited,this.props.history.push({pathname:`/${this.props.peykName}/formbuilder`,selectedSurveyForm:e})}deleteClicked(e){let t=this,a={url:"/survey/deleteSurveyForm",method:"post",data:e};t.setState({disabledDeleteBtn:!0}),Object(m.e)(a).then((function(){t.setState({selected:null,manual:!0,alert:null,disabledDeleteBtn:!1}),b()({title:"Ba\u015far\u0131l\u0131 ! ",text:"Silme i\u015flemi ba\u015far\u0131yla ger\xe7ekle\u015ftirildi.",type:"success",confirmButtonText:"Tamam"}).then(()=>{})})).catch((function(e){Object(h.v)(e),t.setState({disabledDeleteBtn:!1})}))}saveClicked(){let e=Object.assign({},this.state.selected),t=this,a={url:"/survey/saveFormParameter",method:"post",data:e};t.setState({disabledSaveBtn:!0}),Object(m.e)(a).then((function(e){let a=e.data;t.setState({selected:null,displayCreateUpdateDialog:!1,manual:!0,disabledSaveBtn:!1}),u.a.success(a,{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){Object(h.v)(e),t.setState({disabledSaveBtn:!1})}))}render(){let e=[{Header:"Talep Form Ad\u0131",accessor:"name",Cell:e=>i.a.createElement("div",{style:{margin:0}},i.a.createElement(N.a,{text:e.name,maxLength:60}))},{Header:"\u0130li\u015fkili Form \u015eablonu",accessor:"formTemplate_formName",Cell:e=>{var t;return i.a.createElement("div",{style:{margin:0}},i.a.createElement(N.a,{text:null===(t=e.formTemplate)||void 0===t?void 0:t.formName,maxLength:60}))}},{Header:"Olu\u015fturulma Zaman\u0131",accessor:"createdAt",Cell:e=>i.a.createElement("div",{style:{margin:0}},y()(e.createdAt).isValid()?y()(e.createdAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"G\xfcncellenme Zaman\u0131",accessor:"updatedAt",Cell:e=>i.a.createElement("div",{style:{margin:0}},y()(e.updatedAt).isValid()?y()(e.updatedAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"Durum",accessor:"state",Cell:e=>i.a.createElement("div",null,e.state===this.statesEnum.ACTIVE?i.a.createElement("h6",{className:"text-success"},this.statesEnum.ACTIVE):e.state===this.statesEnum.PASSIVE?i.a.createElement("h6",{className:"text-danger"},this.statesEnum.PASSIVE):"")},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:e=>i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement(c.a,{title:"D\xfczenle",faIcon:"fa-edit",onClick:()=>{e.bulkJson?this.editClicked(e):this.editClicked2(e)},color:"success"}),i.a.createElement(c.a,{title:"Sil",faIcon:"fa-trash",color:"danger",onClick:()=>{this.setState({alert:i.a.createElement(d.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>this.deleteClicked(e),onCancel:()=>this.setState({alert:null}),disabled:this.state.disabledDeleteBtn},e.name+" silinecek.")})}}),(this.props.currentUser.impersonate||this.props.isSystemAccount)&&i.a.createElement(c.a,{title:"D\u0131\u015far\u0131 Aktar",faIcon:"fa-file-export",color:"info",onClick:()=>{this.exportFile(e)}}))},{Header:"Raporlar",accessor:"",sortable:!1,Cell:e=>i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(c.a,{title:"Excel",faIcon:"fa-file-excel-o",onClick:()=>this.setState({openExcelModal:!0,row:e}),color:"success"}),i.a.createElement(c.a,{title:"Dok\xfcman",faIcon:"fa-files-o",onClick:()=>this.setState({openDocumentModal:!0,row:e}),color:"info"}))}];const t=[{label:"Talep Form Ad\u0131",accessor:"name",type:"text",operator:"="},{label:"\u0130lgili Grup",accessor:"surveyAnswerGroups.group.id",type:"select",operator:"=",selectData:this.state.groupList}];return i.a.createElement("div",{className:"row baseBackground"},i.a.createElement(x.a,{run:this.state.run,steps:this.state.steps,locale:this.state.locale,continuous:!0,showProgress:!0,showSkipButton:!0,disableScrollParentFix:!0,disableScrolling:!0,callback:this.callback,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}}),i.a.createElement(n.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},i.a.createElement(r.a,{position:"leftSide",className:"zocial Yeni",label:"Yeni Olu\u015ftur",title:"Yeni Talep Form Olu\u015ftur",disabled:this.state.disabledSaveBtn,style:{fontSize:"x-small"},onClick:this.createClicked}),this.props.isSystemAccount&&i.a.createElement(r.a,{position:"leftSide",className:"zocial Yeni",label:"Yeni Olu\u015ftur2",title:"Yeni Talep Form Olu\u015ftur",disabled:this.state.disabledSaveBtn,style:{fontSize:"x-small"},onClick:this.createClicked2}),(this.props.currentUser.impersonate||this.props.isSystemAccount)&&i.a.createElement(r.a,{position:"leftSide",className:"zocial Import",label:"\u0130\xe7eri Aktar",title:"\u0130\xe7eri aktar",style:{fontSize:"x-small"},onClick:this.importFile}),i.a.createElement("div",{className:"helpButtonContainer",position:"rightSide",style:{position:"inherit",right:"4.4em",marginTop:"1.4em"}},i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon"})))),i.a.createElement("div",{className:"col-sm-12 satirBasi"},i.a.createElement("div",{className:"card-header "},i.a.createElement("h4",{className:"card-title"},"Talep Formlar\u0131")),i.a.createElement("div",{className:"card-body",style:{paddingBottom:"0px"}},i.a.createElement("div",{className:""},i.a.createElement("div",{className:"",style:{marginTop:"10px",marginBottom:"0px"}},i.a.createElement(o.a,{fields:t,loading:this.state.loading,onSearch:this.handleSearch})))),i.a.createElement("div",{className:"card-body"},i.a.createElement(l.a,{columns:e,content:this.state.list,loading:this.state.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData}))),this.state.openExcelModal&&this.showExcelModal(),this.state.openDocumentModal&&this.showDocumentModal(),this.state.alert)}}t.default=ne}}]);
//# sourceMappingURL=35.3a8ecc4a.chunk.js.map