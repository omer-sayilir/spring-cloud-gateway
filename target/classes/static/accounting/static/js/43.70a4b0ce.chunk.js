(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[43],{1478:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(2),o=(a(92),a(13)),r=a.n(o),l=a(62),m=a.n(l),c=(a(218),a(82),a(21)),p=a(5),d=a(3),h=a(6),u=a.n(h),y=a(19),g=a(16),f=a(46),E=a(12);class b extends s.Component{constructor(e){super(e),this.readSmsTemplate=()=>{let e=this,t={url:"/signer/readFormSmsTemplateInfo",method:"get"};Object(p.e)(t).then((function(t){e.setState({smsBody:t.data})})).catch((function(e){Object(d.v)(e)}))},this.readMailTemplate=()=>{let e=this,t={url:"/signer/readFormMailTemplateInfo",method:"get"};Object(p.e)(t).then((function(t){t.data&&e.setState({mimeBody:t.data})})).catch((function(e){Object(d.v)(e)}))},this.state={loading:!1,completed:!1,signedDocumentCount:0,progressLength:1,timeoutList:[],page:0,size:10,total:0,content:[],manual:!1},this.notifyMimeResend=n.a.createRef(),this.resend=this.resend.bind(this),this.fetchData=this.fetchData.bind(this),this.readMimeInfo=this.readMimeInfo.bind(this),this.checkTimeouts=this.checkTimeouts.bind(this),this.showErrorMessage=this.showErrorMessage.bind(this)}showErrorMessage(e){this.notifyMimeResend.current.notificationAlert({place:"tr",message:"Hata: "+e.errorMessage,type:"danger",autoDismiss:10})}componentDidMount(){this.props&&this.props.location&&this.props.location.session?(this.checkTimeouts(),this.readMimeInfo(),this.readSmsTemplate(),this.readMailTemplate()):this.props.history.push({pathname:`/${this.props.peykName}/formsessionlist`})}checkTimeouts(){let e=this,t={url:"/formsession/readTimeouts",method:"post",data:e.props.location.session.id};e.setState({loading:!0}),Object(p.e)(t).then((function(t){t.data&&t.data.length>0?e.setState({timeoutList:t.data}):(u.a.error("Zaman a\u015f\u0131m\u0131na d\xfc\u015fm\xfc\u015f dok\xfcman bulunmamaktad\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}),e.props.history.push({pathname:`/${e.props.peykName}/formsession/`+e.props.location.session.id})),e.setState({loading:!1})})).catch((function(t){Object(d.v)(t),e.setState({loading:!1})}))}readMimeInfo(){let e=this,t={url:"/formsession/readMimeInfo",method:"post",data:e.props.location.session.id};e.setState({loading:!0}),Object(p.e)(t).then((function(t){e.setState({mimeTitle:t.data.mimeTitle,mimeBody:t.data.mimeBody,loading:!1}),e.props.location.isKepOwner&&e.setState({kepAccount:t.data.account})})).catch((function(t){Object(d.v)(t),e.setState({loading:!1})}))}fetchData(e,t,a,s){let n=this,i={url:"/form/readSelectedFormsBySession?page="+a+"&size="+s+(void 0!==e?"&sort="+e+","+t:""),method:"post",data:n.state.timeoutList};n.setState({loading:!0,manual:!0!==n.manual&&n.manual}),Object(p.e)(i).then((function(e){n.setState({page:a,size:s,total:e.data.totalElements,content:e.data.content,loading:!1})})).catch((function(e){n.setState({loading:!1}),Object(d.v)(e)}))}resend(){let e=this;if(e.state.timeoutList&&e.state.timeoutList.length>0){let t={url:"/formsession/resend",method:"post",data:e.state.timeoutList};e.setState({disableSendBtn:!0}),Object(p.e)(t).then((function(t){u.a.success("Dok\xfcmanlar tekrar g\xf6nderim i\xe7in i\u015fleme al\u0131nd\u0131.",{position:"top-right",effect:"stackslide",timeout:2e3}),e.setState({disableSendBtn:!1}),e.props.history.push({pathname:`/${e.props.peykName}/formsession/`+e.props.location.session.id})})).catch((function(t){Object(d.v)({message:"\u015eu an i\u015fleminiz ger\xe7ekle\u015ftirilemiyor."}),e.setState({disableSendBtn:!1})}))}else Object(d.v)({message:"Zaman a\u015f\u0131m\u0131na u\u011fram\u0131\u015f liste alg\u0131lanamad\u0131. L\xfctfen bu sayfadan \xe7\u0131k\u0131p yap\u0131p tekrar deneyiniz."})}renderNavButtons(){return n.a.createElement(i.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},n.a.createElement(c.a,{position:"leftSide",className:"zocial GeriDon",style:{fontSize:"x-small"},label:"Geri",title:"\xd6nceki Sayfaya Git",onClick:()=>this.props.history.push({pathname:`/${this.props.peykName}/formsession/`+this.props.location.session.id})}),n.a.createElement(c.a,{position:"leftSide",className:"zocial Gonder",style:{fontSize:"x-small"},label:"Tekrar G\xf6nder",title:"Zaman A\u015f\u0131m\u0131na U\u011fram\u0131\u015f Dok\xfcmanlar\u0131 Tekrar G\xf6nder",onClick:()=>{this.setState({alert:n.a.createElement(r.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>{this.setState({alert:null}),this.resend()},onCancel:()=>this.setState({alert:null})},"Dok\xfcmanlar tekrar g\xf6nderilecek.")})}}))}renderMimeInputs(){return n.a.createElement(i.Container,null,n.a.createElement("div",{className:"FormRenk"},this.props.location.isKepOwner&&n.a.createElement(i.Row,{sm:6},n.a.createElement(i.Col,{sm:2,style:{top:"7px"}},"Kep Hesab\u0131"),n.a.createElement(i.Col,{sm:6},n.a.createElement(i.Input,{type:"text",style:{marginTop:"2px"},value:this.state.kepAccount,disable:!0}))),n.a.createElement(i.Row,{sm:6},n.a.createElement(i.Col,{sm:2,style:{top:"5px"}},"E-posta Konu"),n.a.createElement(i.Col,{sm:6},n.a.createElement(i.Input,{type:"text",style:{marginTop:"2px"},value:this.state.mimeTitle,disabled:!0}))),n.a.createElement(i.Row,{sm:6},n.a.createElement(i.Col,{sm:2,style:{top:"25px"}},"E-Posta \u0130\xe7erik"),n.a.createElement(i.Col,{sm:6},n.a.createElement(i.Input,{type:"textarea",rows:5,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px"},value:this.state.mimeBody,disabled:!0}))),!this.props.location.isKepOwner&&n.a.createElement(i.Row,{sm:6},n.a.createElement(i.Col,{sm:2,style:{top:"25px"}},"SMS \u0130\xe7erik"),n.a.createElement(i.Col,{sm:6},n.a.createElement(i.Input,{type:"textarea",rows:5,disabled:!0,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},value:this.state.smsBody})))))}renderTableList(){let e=[{accessor:[{Header:"Ad\u0131",accessor:"name"},{Header:"Soyad\u0131",accessor:"surname"}],Cell:e=>n.a.createElement("div",{style:{margin:0}},e.employee&&e.employee.name,n.a.createElement("br",null),e.employee&&e.employee.surname)},{accessor:[{Header:"Departman",accessor:"department"},{Header:"G\xf6rev",accessor:"jobTitle"}],Cell:e=>n.a.createElement("div",{style:{margin:0}},e.employee&&e.employee.department&&n.a.createElement(g.a,{text:e.employee.department.name,maxLength:12}),e.employee&&e.employee.department&&n.a.createElement("br",null),n.a.createElement(g.a,{text:e.employee&&e.employee.jobTitle,maxLength:12}))},{Header:"TCKN",accessor:"tckn",Cell:e=>n.a.createElement("div",{style:{margin:0}},e.employee&&n.a.createElement("span",{className:"text-success"},e.employee.tckn))},{Header:"Form Durumu",accessor:"state",width:"200px",Cell:e=>n.a.createElement("div",null,e.state&&n.a.createElement("span",{className:"text-"+f.a[e.state].messageType},f.a[e.state].message),e.state&&601===f.a[e.state].value&&n.a.createElement("br",null),e.state&&601===f.a[e.state].value&&n.a.createElement("span",{className:"text-"+f.a[e.state].messageType},"L\xfctfen, Onay ak\u0131\u015f\u0131 \u015fablonunuz ile se\xe7ilen \xe7al\u0131\u015fan bilgilerinin uyumlulu\u011funu kontrol ediniz."))}],t=Object(E.I)(this,e,"accessor",this.props.location.isKepOwner);return n.a.createElement(y.a,{columns:t,content:this.state.content,loading:this.state.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData})}render(){return n.a.createElement(i.Row,{className:"baseBackground"},n.a.createElement(m.a,{ref:this.notifyMimeResend,className:"modalAlert"}),this.renderNavButtons(),this.state.alert&&n.a.createElement("div",{className:"row satirBasi"},n.a.createElement(m.a,{ref:this.notify}),this.state.alert),n.a.createElement("div",{className:"row satirBasi"},n.a.createElement(i.Col,{md:"12"},n.a.createElement(i.Card,{className:"card"},n.a.createElement(i.CardHeader,null,n.a.createElement(i.CardTitle,{tag:"h4"},"Dok\xfcman Tekrar G\xf6nder")),n.a.createElement(i.CardBody,null,this.props.location.session&&this.renderMimeInputs()),n.a.createElement(i.CardBody,null,this.state.timeoutList&&this.state.timeoutList.length>0&&this.renderTableList())))))}}t.default=b}}]);
//# sourceMappingURL=43.70a4b0ce.chunk.js.map