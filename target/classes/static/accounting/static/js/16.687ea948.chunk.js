(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[16,5],{1322:function(e,t,a){"use strict";var s=a(0),i=a.n(s),n=a(23);class l extends s.Component{constructor(e){super(e),this.formatCreateLabelCreator=e=>this.props.allowNew?'Ekle "'+e+'"':"L\xfctfen, var olan bir "+this.props.name+" se\xe7imi yap\u0131n\u0131z.",this.state={},this.changeLabel=this.changeLabel.bind(this),this.createLabel=this.createLabel.bind(this),this.checkUpperCase=this.checkUpperCase.bind(this),this.generateOptions=this.generateOptions.bind(this)}changeLabel(e){this.props.onChange(this.checkUpperCase(e))}createLabel(e){if(this.props.allowNew){let t=this.props.list;if(0===t.length){let a;a=this.props.onlyLabel?{value:this.checkUpperCase(e.label),label:this.checkUpperCase(e.label)}:{value:"0",label:this.checkUpperCase(e.label)},t.push(a),this.props.updateList(t),this.changeLabel(a)}else{let a=t.length-1,s=t[a];if(this.props.onlyLabel)if(s.value===this.checkUpperCase(e.label))t[a].label=this.checkUpperCase(e.label),this.props.updateList(t),this.changeLabel(t[a]);else{let a={value:this.checkUpperCase(e.label),label:this.checkUpperCase(e.label)};t.push(a),this.props.updateList(t),this.changeLabel(a)}else if("0"===s.value)t[a].label=this.checkUpperCase(e.label),this.props.updateList(t),this.changeLabel(t[a]);else{let a={value:"0",label:this.checkUpperCase(e.label)};t.push(a),this.props.updateList(t),this.changeLabel(a)}}}}checkUpperCase(e){return e&&this.props.useUpperCase&&(null!=e.value&&e.label?e.label=e.label.toString().replace("i","\u0130").toUpperCase():e=e.toString().replace("i","\u0130").toUpperCase()),e}generateOptions(){let e=[];return this.props.list&&this.props.list.length>0&&this.props.list.map(t=>{e.push({value:t.value,label:this.checkUpperCase(t.label)})}),e}render(){let e=this.generateOptions();return i.a.createElement(n.a.Creatable,{clearable:!1,multi:!1,className:"select-control",name:"autoCompleteList",id:"autoCompleteList",value:this.props.value,placeholder:this.props.placeholder,promptTextCreator:this.formatCreateLabelCreator,noResultsText:"Hen\xfcz kaydedilmi\u015f veri yok",onChange:e=>this.changeLabel(e),onNewOptionClick:e=>this.createLabel(e),options:e})}}l.defaultProps={allowNew:!0,useUpperCase:!1,onlyLabel:!1,updateList:e=>{}},t.a=l},1341:function(e,t,a){"use strict";var s=a(0),i=a.n(s),n=a(262),l=a(221),o=a(5),r=a(3),d=a(12),c=a(2);class m extends s.Component{constructor(e){super(e),this.state={selectedDepts:{},conditionalList:[],declineList:[]},["onSelectionChange","conditionalListChange","declineListChange"].forEach(e=>this[e]=this[e].bind(this))}componentDidMount(){let e=Object(d.q)(this.props.treeData[0]);this.setState({level:e[0],maxLength:e[1]+20})}onSelectionChange(e,t){let a=this.state.selectedDepts,s=t.target.checked;a[e.key]=s;let i=Object(d.M)(this.props.treeData[0],e.key);i&&i.map(e=>a[e]=s),this.setState({selectedDepts:a}),this.props.onSelect(a)}conditionalListChange(e,t){let a=this,s=t.target.checked,i=[];i.push(e.title);let n={url:"/employee/getEmployeeListForDept",method:"post",data:i};a.props.loading(!0),Object(o.e)(n).then((function(e){let t=a.state.conditionalList;if(s)e.data&&Array.isArray(e.data)?e.data.map(e=>t.push(e)):e.data&&"number"===typeof e.data&&t.push(e.data);else if(e.data&&Array.isArray(e.data))e.data.map(e=>{let a=t.indexOf(e);a>-1&&t.splice(a,1)});else if(e.data&&"number"===typeof e.data){let a=t.indexOf(e.data);a>-1&&t.splice(a,1)}t=Array.from(new Set(t)),a.setState({conditionalList:t}),a.props.changeOnConditionalList(t),a.props.loading(!1)})).catch((function(e){Object(r.v)(e),a.props.loading(!1)}))}declineListChange(e,t){let a=this,s=t.target.checked,i=[];i.push(e.title);let n={url:"/employee/getEmployeeListForDept",method:"post",data:i};a.props.loading(!0),Object(o.e)(n).then((function(e){let t=a.state.declineList;if(s)e.data&&Array.isArray(e.data)?e.data.map(e=>t.push(e)):e.data&&"number"===typeof e.data&&t.push(e.data);else if(e.data&&Array.isArray(e.data))e.data.map(e=>{let a=t.indexOf(e);a>-1&&t.splice(a,1)});else if(e.data&&"number"===typeof e.data){let a=t.indexOf(e.data);a>-1&&t.splice(a,1)}t=Array.from(new Set(t)),a.setState({declineList:t}),a.props.changeOnDeclineList(t),a.props.loading(!1)})).catch((function(e){Object(r.v)(e),a.props.loading(!1)}))}render(){let e=this.state.maxLength?this.state.maxLength:0;const t=(e,s)=>e&&e.length?e.map(e=>i.a.createElement(l.a,{key:e.key,title:a(e,s)},t(e.children,s-18))):null,a=(e,t)=>i.a.createElement("div",{style:{display:"inline-flex"}},i.a.createElement(c.Col,{xs:"10",style:{margin:"0",padding:"0",width:t+"px"},title:e.title},i.a.createElement("label",{style:{overflow:"hidden"}}," ",e.title,"... ")),i.a.createElement("div",{className:"2",style:{display:"inline-flex"}},i.a.createElement(c.Col,{xs:"6"},"|",i.a.createElement("input",{type:"checkbox",style:{width:"40px"},checked:this.state.selectedDepts&&this.state.selectedDepts[e.key],onChange:t=>this.onSelectionChange(e,t)}),"|")));return i.a.createElement("div",{className:"col-xs-12"},i.a.createElement("div",{style:{marginBottom:"-15px"}},i.a.createElement("label",{style:{width:e+135+"px",textAlign:"center"}},this.props.selectedAuthorizationWay===r.c.EXPENDITURE?"Masraf Yeri":"Departman"),i.a.createElement("label",{style:{width:"40px",textAlign:"center"}},"Se\xe7im")),i.a.createElement("div",null,i.a.createElement(n.a,{showLine:!0,icon:e=>{let{}=e;return i.a.createElement("i",{className:"fa fa-university"})},selectable:!1,defaultExpandAll:!0},t(this.props.treeData,e))))}}t.a=m},1358:function(e,t,a){"use strict";var s=a(0),i=a.n(s),n=a(3),l=a(5),o=a(85),r=a(6),d=a.n(r),c=a(222),m=a(82),h=a.n(m),p=a(12),u=a(2),g=a(23),b=a(9),y=a.n(b),S=a(55),f=a.n(S),E=a(1322),C=a(13),k=a.n(C),v=a(435),D=a.n(v),x=a(4),w=a(138),B=a.n(w),T=a(18),N=a(38),L=a.n(N);class O extends s.Component{constructor(e){super(e),this.getEmployeeInfo=()=>{let e=this;e.setState({loading:!0}),Object(l.e)({url:"/employee/getList",method:"get"}).then((function(t){let{departmentList:a,expenditureDepList:s,ntfTypeList:i}=t.data;e.setState({departmentList:a,ntfTypeList:i,expenditureDepList:s,loading:!1})})).catch((function(e){Object(n.v)(e)})).finally((function(){e.setState({loading:!1})}))},this.getGroupList=()=>{let e=this;Object(l.e)({url:"/employee/getGroups",method:"get"}).then((function(t){let a=[];t.data.map(e=>{a.push({value:e.id,label:e.name,group:e})}),e.setState({groupList:a}),e.getEmployee()})).catch((function(e){Object(n.v)(e)}))},this.getJobTitles=()=>{let e=this;Object(l.e)({url:"/job/titles",method:"get"}).then((function(t){let a=t.data;e.setState({jobTitles:a})})).catch((function(e){Object(n.v)(e)}))},this.readCustomFields=()=>{let e=this,t={url:"/employeecustom/readCustomFields",method:"post",data:e.props.id};Object(l.e)(t).then((function(t){t.data&&Object.keys(t.data)&&Object.keys(t.data).length&&e.setState({customFields:t.data})})).catch((function(e){}))},this.handleChangeCustomFields=(e,t)=>{let{name:a,value:s}=e.target;if("INTEGER"===t){let e=/^\d+$/;if(s.length>0&&!s.match(e))return}else if("DOUBLE"===t){let e=/^[0-9.]+$/;if(s.length>0&&(!s.match(e)||-1!==s.toString().substring(s.toString().indexOf(".")+1).indexOf(".")))return}let i=this.state.customFields;i[a]=s,this.setState({customFields:i})},this.handleChangeCustomDoubleFields=(e,t,a)=>{let s=e.value,i=this.state.customFields;isNaN(parseFloat(s)||0===s.length)||(s&&1===s.length?(s=s.split(" ").join(""),i[a]=s,this.setState({customFields:i})):(i[a]=s,this.setState({customFields:i})))},this.handleChangeCustomDateTimeFields=(e,t)=>{if(t.length>0&&(!t.match(/^[0-9\s\-:]+$/)||!y()(t,"YYYY-MM-DD HH:mm:ss",!0).isValid()))return void this.setState({dateValidation:!1});t&&t.toString().length&&(t=t.format("YYYY-MM-DD HH:mm:ss").toString());let a=this.state.customFields;a[e]=t,this.setState({customFields:a,dateValidation:!0})},this.handleBooleanFields=(e,t)=>{let a=this.state.customFields;a[e]=t.target.checked,this.setState({customFields:a})},this.generateJobTitle=()=>{let{employee:e,jobTitle:t}=this.state;e.jobTitle=t.label,this.setState({employee:e})},this.handleSaveClick=()=>{let{employee:e}=this.state;if(e=this.setDepartmentInfo({...e}),!this.isPhoneNumberValid(e.telephone))return void d.a.warning("L\xfctfen ge\xe7erli bir telefon numaras\u0131 giriniz.");if(!this.isTCValid(e.tckn))return void d.a.warning("L\xfctfen ge\xe7erli bir T.C. Kimlik numaras\u0131 giriniz.");if(!this.isBildTuruSelected(e.employeeNotificationTypeList))return void d.a.warning("L\xfctfen en az bir bildirim t\xfcr\xfc se\xe7iniz.");!this.isEmailSelected(e.employeeNotificationTypeList)||e.email&&""!==e.email.trim()?this.isDepartmanSelected(e.department)?this.setState({isLoading:!0,isDisabled:!0},()=>{this.saveClicked()}):d.a.warning("L\xfctfen departman bilgisini giriniz."):d.a.warning("E-posta bildirimi se\xe7ili iken e-Posta alan\u0131 bo\u015f b\u0131rak\u0131lamaz.")},this.getEmployeeGroupList=()=>{let e=[];this.state.employee.employeeGroups.map(t=>e.push({value:t.group.id,label:t.group.name,group:t.group}));let t=this.state.employee.employeeGroups;this.setState({selectedGroupList:e,selectedEmpGroupList:t})},this.hasGrant=e=>this.props.hasGrant(e),this.state={employee:{},error:{},departmentList:[],expenditureDepList:[],ntfTypeList:[],customFields:{},dateValidation:!0,groupList:[],selectedGroupList:[],selectedEmpGroupList:[],jobTitles:[],jobTitle:{value:"",label:""},isLoading:!1,isDisabled:!1},this.handleChange=this.handleChange.bind(this),this.saveClicked=this.saveClicked.bind(this),this.validateClass=this.validateClass.bind(this),this.getNtfTypeList=this.getNtfTypeList.bind(this),this.onManagerChange=this.onManagerChange.bind(this),this.onSecondManagerChange=this.onSecondManagerChange.bind(this),this.onThirdManagerChange=this.onThirdManagerChange.bind(this),this.onDepartmentChange=this.onDepartmentChange.bind(this),this.handleChangeDouble=this.handleChangeDouble.bind(this),this.handleChangeInteger=this.handleChangeInteger.bind(this),this.onChangeNtfTypeList=this.onChangeNtfTypeList.bind(this),this.handleSalaryDouble=this.handleSalaryDouble.bind(this),this.getEmployeeGroupList=this.getEmployeeGroupList.bind(this),this.getEmployee=this.getEmployee.bind(this),this.isNumeric=this.isNumeric.bind(this),this.onChangeOnJobTitle=this.onChangeOnJobTitle.bind(this),O.getTelephoneNumber=O.getTelephoneNumber.bind(this),this.validateField=this.validateField.bind(this),this.validateMessage=this.validateMessage.bind(this)}validateField(e){let{name:t,value:a}=e.target,s=e.target.id,i=e.target.dataset.vdata,n=e.target.dataset.vlength;const l=/[\u015f\u015e\u0131\u0130\xe7\xc7\xf6\xd6\xfc\xdc\u011e\u011f]/g;if("email"===t&&a.match(l))return;let o=Object(T.b)(i,n,a),r=this.state.error;r=Object.assign(r,{[s]:o}),this.setState({error:r})}validateMessage(e){let t=this.state.error;return void 0===t[e]?"":t[e].message}static getDepartmentElement(e){return e.department?{value:e.department.id.toString(),label:e.department.name}:null}static getExpenditureElement(e){return e.expenditureDepartment?{value:e.expenditureDepartment.id.toString(),label:e.expenditureDepartment.name+"-("+e.expenditureDepartment.integrationCode+")"}:null}static getTelephoneNumber(e){return Object(m.conformToMask)(e,["0","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],{guide:!1}).conformedValue}componentWillMount(){Object(p.A)(this)&&this.getEmployeeInfo(),this.props.id&&this.readCustomFields()}componentDidMount(){this.getGroupList(),this.getJobTitles()}getEmployee(){let e=this,t={url:"/employee/getEmployeeById",method:"post",data:e.props.id?e.props.id:-1};Object(l.e)(t).then((function(t){!t.data.id&&e.props.tckn&&(t.data.tckn=e.props.tckn);let a=t.data;e.props.id||(a.statusType=e.props.isCandidate?"CANDIDATE":"ACTIVE"),e.setState({employee:a,jobTitle:{value:1,label:a.jobTitle},manager:t.data.manager,secondManager:t.data.secondManager,thirdManager:t.data.thirdManager,department:O.getDepartmentElement(t.data),expenditureDep:O.getExpenditureElement(t.data)}),e.getEmployeeGroupList()})).catch((function(e){Object(n.v)(e)}))}handleChange(e){let{name:t,value:a,type:s}=e.target;if("name"===t||"surname"===t){let e=/^[a-zA-Z\s\xfc\xdc\u0131\u011f\u011e\u0130\u015f\u015e\xe7\xc7\xf6\xd6]+$/;if(a.match(e)||0===a.length){let e=this.state.employee;e[t]=a,this.setState({employee:e})}}else if("email"===t){const e=/[\u015f\u015e\u0131\u0130\xe7\xc7\xf6\xd6\xfc\xdc\u011e\u011f]/g;let s=this.state.employee;s[t]=a,this.setState({employee:s}),a.match(e)?this.setState({btnDisabled:!0}):this.setState({btnDisabled:!1})}else if("statusType"===t){let e=this.state.employee;"PASSIVE"!==a&&(e.passiveEndDate=null,e.reason=null),e[t]=a,this.setState({employee:e})}else{"checkbox"===s&&(a=e.target.checked);let i=this.state.employee;i[t]=a,this.setState({employee:i})}}isNumeric(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}handleChangeDouble(e){let t=this,{name:a,value:s}=e.target;if(s.length>1&&(s=s.toString().replace(",",".")),t.isNumeric(s)||0===s.length){let e=t.state.employee;s&&1===s.length?(s=s.split(" ").join(""),e[a]=s,t.setState({employee:e})):(e[a]=s,t.setState({employee:e}))}}handleSalaryDouble(e){let t=this,a=e.value;if(!isNaN(parseFloat(a)||0===a.length)){let e=t.state.employee;a&&1===a.length?(a=a.split(" ").join(""),e.salary=a,t.setState({employee:e})):(e.salary=a,t.setState({employee:e}))}}handleChangeInteger(e){let{name:t,value:a}=e.target;if("telephone"===t&&a&&a.length>0?(a=a.split(" ").join(""),a=a.replace(/[{()}]/g,"").replace(/-/g,"").replace(/_/g,""),"0"===a[0]&&(a=a.substring(1,a.length))):"telephone"===t&&a&&0===a.length&&(a="0"),"telephone"===t&&a.length>10&&(a=a.substring(0,10)),!isNaN(a)){let e=this.state.employee;a&&1===a.length?(a=a.split(" ").join(""),e[t]=a,this.setState({employee:e})):(e[t]=a,this.setState({employee:e}))}}validateClass(e){let t=this.state.error;return void 0===t[e]?"":t[e].valid?" has-success":" has-danger"}validateEmail(e){let{value:t}=e.target;if(t.match(/[\u015f\u015e\u0131\u0130\xe7\xc7\xf6\xd6\xfc\xdc\u011e\u011f]/g)){let e=this.state.error;e.cEmail={message:"E-posta T\xfcrk\xe7e karakter i\xe7eremez.",valid:!1},this.setState({error:e}),d.a.error("E-posta T\xfcrk\xe7e karakter i\xe7eremez.",{position:"top-right",effect:"stackslide",timeout:5e3,html:!1})}else{let e=this.state.error;delete e.cEmail,this.setState({error:e})}}isEmailSelected(e){return Array.isArray(e)&&e.some(e=>e.ntfType&&"EMAIL"===e.ntfType.longCode)}isDepartmanSelected(e){return e&&e.id}isBildTuruSelected(e){return Array.isArray(e)&&e.length>0}isPhoneNumberValid(e){return e&&10===e.length}isTCValid(e){return e&&11===e.length}saveClicked(){let e=this;this.generateJobTitle();let t=e.setDepartmentInfo(e.state.employee);t.employeeGroups=e.state.selectedEmpGroupList,t=e.setExpenditureDepInfo(t);let a=Object(c.b)(e,t),s=a.error,i=a.valid;if(e.state.dateValidation||(i=!1,a={errorMessage:"Girilen tarih bilgisi formata uygun de\u011fildir."}),i){let a={url:"/employee/saveEmployee",method:"post",data:{employee:t,departmentMandatory:Object(p.A)(e),kepAddressUnique:Object(p.C)(e),customFields:JSON.stringify(e.state.customFields)}};e.setState({btnDisabled:!0,isLoading:!0}),Object(l.e)(a).then((function(a){let s=a.data;e.setState({btnDisabled:!1,isLoading:!1}),d.a.success(s,{position:"top-right",effect:"stackslide",timeout:5e3}),!t.id&&e.props.checkIfRegistryManual&&e.props.checkIfRegistryManual(),e.props.toggleModal(!1,!0)})).catch((function(t){Object(n.v)(t),e.setState({btnDisabled:!1,isLoading:!1,isDisabled:!1})}))}else d.a.error(a.errorMessage,{position:"top-right",effect:"stackslide",timeout:8e3}),e.setState({error:s,isDisabled:!1})}setDepartmentInfo(e){return this.state.department&&(e.department={id:parseInt(this.state.department.value),name:this.state.department.label}),e}setExpenditureDepInfo(e){return this.state.expenditureDep&&(e.expenditureDepartment={id:parseInt(this.state.expenditureDep.value),name:this.state.expenditureDep.label}),e}getNtfTypeList(){return this.state.employee&&this.state.employee.employeeNotificationTypeList?this.state.employee.employeeNotificationTypeList.map(e=>JSON.stringify(e.ntfType)):[]}onChangeNtfTypeList(e){let t=e.map(e=>({recordId:null,ntfType:JSON.parse(e.value)})),a=this.state.employee;a.employeeNotificationTypeList=t,this.setState({employee:a})}onChangeGroupList(e){let t=this.state.employee,a=[],s=[];e.forEach(e=>{var a;let i=null===t||void 0===t||null===(a=t.employeeGroups)||void 0===a?void 0:a.find(t=>t.group.id===e.group.id);i?s.push(i):s.push({id:null,group:e.group})}),s.map(e=>a.push({value:e.group.id,label:e.group.name,group:e.group})),this.setState({selectedGroupList:a,selectedEmpGroupList:s})}onExpenditureDepChange(e){e?this.setState({expenditureDep:e}):this.setState({expenditureDep:{value:null,label:null}})}onDepartmentChange(e){this.state.manager&&this.state.manager.value&&this.setState({alert:i.a.createElement(k.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"error",title:"Uyar\u0131",onConfirm:()=>{this.setState({alert:null})}},"Y\xf6netici bilgisini kontrol edin!")}),e?this.setState({department:e}):this.setState({department:{value:null,label:null}})}onManagerChange(e){this.handleChange({target:{name:"parentUserId",value:e&&e.value}}),this.setState({manager:e})}onSecondManagerChange(e){this.handleChange({target:{name:"secondParentUserId",value:e&&e.value}}),this.setState({secondManager:e})}onThirdManagerChange(e){this.handleChange({target:{name:"thirdParentUserId",value:e&&e.value}}),this.setState({thirdManager:e})}onChangeOnJobTitle(e){e?this.setState({jobTitle:e}):this.setState({jobTitle:{value:0,label:""}})}render(){return i.a.createElement(o.a,{isOpen:this.props.modal,hasGrant:this.props.hasGrant,fade:!1,size:"lg",closeOnEsc:!1,title:"\xc7al\u0131\u015fan Ekle/D\xfczenle Ekran\u0131",confirmBtnText:i.a.createElement("span",null,this.state.isLoading?i.a.createElement(i.a.Fragment,null,"KAYDED\u0130L\u0130YOR",i.a.createElement("span",{className:"spinner"})):"KAYDET"),confirmButtonStyle:{cursor:this.state.isLoading?"not-allowed":"pointer",opacity:this.state.isLoading?.6:1},cancelBtnText:"Kapat",onConfirm:this.state.isLoading?null:this.handleSaveClick,onCancel:()=>this.props.toggleModal(!1,!1)},i.a.createElement("div",{style:{marginTop:"20px"}},i.a.createElement(u.Form,null,i.a.createElement("div",{className:"FormRenk",style:{marginBottom:"10px",paddingLeft:"20px",paddingRight:"20px"}},i.a.createElement("label",{style:{fontWeight:"bold",display:"block"}},"Genel:"),this.renderInput("Ad *","name"),this.renderInput("Soyad *","surname"),this.renderInputInteger("TCKN *","tckn",11,null!==this.props.id),Object(p.A)(this)&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("department")},i.a.createElement(u.Label,{sm:4},"Departman *"),i.a.createElement(u.Col,{sm:8},i.a.createElement(E.a,{name:"Departman",useUpperCase:!1,onlyLabel:!1,allowNew:!1,list:this.state.departmentList,value:this.state.department,onChange:e=>this.onDepartmentChange(e),updateList:e=>this.setState({departmentList:e}),placeholder:"Departman Se\xe7iniz veya Departman Ad\u0131 Yaz\u0131n\u0131z..."}))),Object(p.A)(this)&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("jobTitle")},i.a.createElement(u.Label,{sm:4},"G\xf6rev"),i.a.createElement(u.Col,{sm:8},i.a.createElement(E.a,{name:"G\xf6rev",useUpperCase:!1,onlyLabel:!1,allowNew:!0,list:this.state.jobTitles,value:this.state.jobTitle,onChange:e=>this.onChangeOnJobTitle(e),updateList:e=>this.setState({jobTitles:e}),placeholder:"G\xf6rev Se\xe7iniz veya G\xf6rev Ad\u0131 Yaz\u0131n\u0131z..."}))),Object(p.A)(this)&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("manager")},i.a.createElement(u.Label,{sm:4},"Ba\u011fl\u0131 Oldu\u011fu Y\xf6netici"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a.Async,{multi:!1,ignoreAccents:!1,value:this.state.manager,onChange:e=>this.onManagerChange(e),isLoading:!0,autoload:!1,cache:!1,clearable:!0,filterOptions:e=>e,noResultsText:"Kay\u0131t bulunamad\u0131.",searchPromptText:"Arama i\xe7in en az 2 karakter giriniz.",placeholder:"\u0130sim veya soyisim ile ara...",loadingPlaceholder:"Y\xfckleniyor...",clearValueText:"Se\xe7imi kald\u0131r",loadOptions:p.x,disabled:this.state.isDisabled}))),Object(p.A)(this)&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("manager")},i.a.createElement(u.Label,{sm:4},"Ba\u011fl\u0131 Oldu\u011fu 2. Y\xf6netici"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a.Async,{multi:!1,ignoreAccents:!1,value:this.state.secondManager,onChange:e=>this.onSecondManagerChange(e),isLoading:!0,autoload:!1,cache:!1,clearable:!0,filterOptions:e=>e,noResultsText:"Kay\u0131t bulunamad\u0131.",searchPromptText:"Arama i\xe7in en az 2 karakter giriniz.",placeholder:"\u0130sim veya soyisim ile ara...",loadingPlaceholder:"Y\xfckleniyor...",clearValueText:"Se\xe7imi kald\u0131r",loadOptions:p.x,disabled:this.state.isDisabled}))),Object(p.A)(this)&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("manager")},i.a.createElement(u.Label,{sm:4},"Ba\u011fl\u0131 Oldu\u011fu 3. Y\xf6netici"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a.Async,{multi:!1,ignoreAccents:!1,value:this.state.thirdManager,onChange:e=>this.onThirdManagerChange(e),isLoading:!0,autoload:!1,cache:!1,clearable:!0,filterOptions:e=>e,noResultsText:"Kay\u0131t bulunamad\u0131.",searchPromptText:"Arama i\xe7in en az 2 karakter giriniz.",placeholder:"\u0130sim veya soyisim ile ara...",loadingPlaceholder:"Y\xfckleniyor...",clearValueText:"Se\xe7imi kald\u0131r",loadOptions:p.x,disabled:this.state.isDisabled}))),this.state.loading&&i.a.createElement(L.a,{type:"spinningBubbles",style:{width:"60px",height:"60px",margin:"20px auto 0 auto",fill:"#888"}}),!this.props.isKepOwner&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("employeeNtfResultList")},i.a.createElement(u.Label,{sm:4},"Bildirim T\xfcrleri *"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{className:"select-control",name:"employeeNtfResultList",id:"employeeNtfResultList",multi:!0,placeholder:"Se\xe7iniz...",noResultsText:"Veri yok",value:this.getNtfTypeList(),onChange:e=>e&&this.onChangeNtfTypeList(e),options:this.state.ntfTypeList&&this.state.ntfTypeList.map(e=>({value:JSON.stringify(e),label:e.longCode})),disabled:this.state.isDisabled}))),this.props.isKepOwner&&this.renderInput("KEP Adresi *","kepAddress"),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("telephone")},i.a.createElement(u.Label,{sm:4},"Telefon Numaras\u0131 *"),i.a.createElement(u.Col,{sm:8},i.a.createElement(h.a,{className:"form-control",mask:["0","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],style:{textAlign:"left"},type:"text",placeholder:"(5xx) xxx-xxxx",name:"telephone",value:this.state.employee.telephone,size:"10",onChange:e=>this.handleChangeInteger(e),disabled:this.state.isDisabled}))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("cEmail")},i.a.createElement(u.Label,{sm:4},1===this.getNtfTypeList().filter(e=>e.includes("EMAIL")).length?"e-Posta *":"e-Posta"),i.a.createElement(u.Col,{sm:8},i.a.createElement(h.a,{className:"form-control",mask:B.a,placeholder:"_________@______.___",type:"text",name:"email",inputProps:{vdata:"email",vlength:"1,255"},id:"cEmail",ref:"cEmail",onBlur:e=>this.validateEmail(e),value:this.state.employee.email,onChange:e=>this.handleChange(e),disabled:this.state.isDisabled}),""!==this.validateMessage("cEmail")&&i.a.createElement(u.UncontrolledTooltip,{placement:"right",target:"cEmail",delay:0},this.validateMessage("cEmail")))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("statusType")},i.a.createElement(u.Label,{sm:4},"Durumu"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{placeholder:"Se\xe7iniz...",value:this.state.employee.statusType?this.state.employee.statusType:"ACTIVE",clearable:!1,options:Object(p.T)(),noResultsText:"Veri yok",onChange:e=>{this.handleChange({target:{name:"statusType",value:e&&e.value?e.value:"ACTIVE"},e:e})},disabled:this.state.isDisabled}))),this.renderInput("Entegrasyon Kodu","integrationCode"),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("employmentContract")},i.a.createElement(u.Label,{sm:4},"\u0130\u015f S\xf6zle\u015fmesi T\xfcr\xfc"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{value:this.state.employee.employmentContract,clearable:!1,options:Object(p.o)(),placeholder:"Se\xe7iniz...",noResultsText:"Veri yok",onChange:e=>{this.handleChange({target:{name:"employmentContract",value:e&&e.value?e.value:"UNDECLARED"},e:e})},disabled:this.state.isDisabled}))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("salary")},i.a.createElement(u.Label,{sm:4},"\xdccret"),this.hasGrant(x.M)?i.a.createElement(u.Col,{sm:8},i.a.createElement(D.a,{placeholder:"0,00",isNumericString:!0,value:this.state.employee.salary,onValueChange:e=>this.handleSalaryDouble(e),sm:12,suffix:" \u20ba",style:{textAlign:"right"},thousandSeparator:".",decimalSeparator:",",displayType:"input",allowNegative:!1,decimalScale:2,disabled:this.state.isDisabled})):i.a.createElement(u.Col,{sm:8},i.a.createElement(u.Input,{type:"text",name:"salary",value:"********"}))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("vip")},i.a.createElement(u.Label,{sm:4},"VIP"),i.a.createElement(u.Col,{sm:8},i.a.createElement("input",{type:"checkbox",name:"vip",checked:this.state.employee.vip,onChange:e=>this.handleChange(e),disabled:this.state.isDisabled}))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("expenditure")},i.a.createElement(u.Label,{sm:4},"Masraf Yeri "),i.a.createElement(u.Col,{sm:8},i.a.createElement(E.a,{name:"Masraf Yeri",useUpperCase:!1,onlyLabel:!1,allowNew:!1,list:this.state.expenditureDepList,value:this.state.expenditureDep,onChange:e=>this.onExpenditureDepChange(e),updateList:e=>this.setState({expenditureDepList:e}),placeholder:"Masraf Yeri Se\xe7iniz veya Masraf Yeri Ad\u0131 Yaz\u0131n\u0131z..."}))),i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("groups")},i.a.createElement(u.Label,{sm:4},"Gruplar"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{className:"select-control",name:"groups",id:"groups",multi:!0,placeholder:"Se\xe7iniz...",value:this.state.selectedGroupList,onChange:e=>e&&this.onChangeGroupList(e),options:this.state.groupList,noResultsText:"Hen\xfcz kaydedilmi\u015f veri yok",disabled:this.state.isDisabled}))),"PASSIVE"===this.state.employee.statusType&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("passiveEndDate")},i.a.createElement(u.Label,{sm:4},"Pasif Durumunun Bitece\u011fi Tarih"),i.a.createElement(u.Col,{sm:8},i.a.createElement(f.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,inputProps:{disabled:"PASSIVE"!==this.state.employee.statusType||this.state.isDisabled},value:y()(this.state.employee.passiveEndDate,"YYYY-MM-DD",!0).isValid()?y()(this.state.employee.passiveEndDate).format("DD-MM-YYYY"):this.state.employee.passiveEndDate,isValidDate:function(e){return e.startOf("date").isAfter(f.a.moment().startOf("date"))},dateFormat:"DD-MM-YYYY",timeFormat:!1,onChange:e=>{this.handleChange({target:{name:"passiveEndDate",value:e&&y()(e).isValid()?e.format("YYYY-MM-DD"):null}})}}))),"PASSIVE"===this.state.employee.statusType&&i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("reason")},i.a.createElement(u.Label,{sm:4},"Pasif Durumun Gerek\xe7esi"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{value:this.state.employee.reason,clearable:!1,disabled:"PASSIVE"!==this.state.employee.statusType||this.state.isDisabled,options:Object(p.Q)(),placeholder:"Se\xe7iniz...",onChange:e=>{this.handleChange({target:{name:"reason",value:e&&e.value?e.value:null}})}})))),i.a.createElement("div",{className:"FormRenk",style:{paddingLeft:"20px",paddingRight:"20px"}},i.a.createElement("label",{style:{fontWeight:"bold",display:"block"}},"Detay:"),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("employmentStartDate"),style:{marginTop:"-2px"}},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},"\u0130\u015fe Ba\u015flama Tarihi"),i.a.createElement(u.Col,{sm:8},i.a.createElement(f.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:y()(this.state.employee.employmentStartDate,"YYYY-MM-DD",!0).isValid()?y()(this.state.employee.employmentStartDate).format("DD-MM-YYYY"):this.state.employee.employmentStartDate,dateFormat:"DD-MM-YYYY",timeFormat:!1,onChange:e=>{this.handleChange({target:{name:"employmentStartDate",value:e&&y()(e,"YYYY-MM-DD",!0).isValid()?y()(e).format("YYYY-MM-DD"):null}})},disabled:this.state.isDisabled})))),this.renderInputSmaller("\xc7al\u0131\u015fma \u015eekli","employmentStatus")),i.a.createElement(u.Row,null,this.renderInputSmallerDouble("Y\u0131ll\u0131k \u0130zin Hakk\u0131","remainingAnnualVacation",5),this.renderInputSmallerDouble("Mazeret \u0130zin Hakk\u0131","remainingExcuseVacation",5)),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("gender")},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},"Cinsiyet"),i.a.createElement(u.Col,{sm:8},i.a.createElement(g.a,{value:this.state.employee.gender,clearable:!1,options:Object(p.v)(),placeholder:"Se\xe7iniz...",noResultsText:"Veri Yok",onChange:e=>{this.handleChange({target:{name:"gender",value:e&&e.value&&" "!==e.value?e.value:null}})},disabled:this.state.isDisabled})))),this.renderInputSmaller("Adres","address")),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass("dateOfBirth"),style:{marginTop:"-2px"}},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},"Do\u011fum Tarihi"),i.a.createElement(u.Col,{sm:8},i.a.createElement(f.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:y()(this.state.employee.dateOfBirth,"YYYY-MM-DD",!0).isValid()?y()(this.state.employee.dateOfBirth).format("DD-MM-YYYY"):this.state.employee.dateOfBirth,dateFormat:"DD-MM-YYYY",timeFormat:!1,onChange:e=>{this.handleChange({target:{name:"dateOfBirth",value:e&&y()(e,"YYYY-MM-DD",!0).isValid()?y()(e).format("YYYY-MM-DD"):null}})},disabled:this.state.isDisabled})))),this.renderInputSmaller("Do\u011fum Yeri","cityOfBirth")),i.a.createElement(u.Row,null,this.renderInputSmaller("E\u011fitim Durumu","educationLevel"),this.renderInputSmaller("Askerlik Durumu","militaryStatus")),this.props.titleList&&!!this.props.titleList.length&&this.renderCustomFields())),this.state.alert))}renderCustomFields(){let e="";return this.props.titleList.map((t,a)=>a%2===1?i.a.createElement(u.Row,null,this.renderCustomInputSmaller(e.title,e.type,this.state.customFields[e.title]),this.renderCustomInputSmaller(t.title,t.type,this.state.customFields[t.title])):a===this.props.titleList.length-1?i.a.createElement(u.Row,null,this.renderCustomInputSmaller(t.title,t.type,this.state.customFields[t.title])):void(e=t))}renderInput(e,t){return i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass(t)},i.a.createElement(u.Label,{sm:4},e),i.a.createElement(u.Col,{sm:8},i.a.createElement(u.Input,{type:"text",name:t,value:this.state.employee[t]||"",onChange:e=>this.handleChange(e),disabled:this.state.isDisabled})))}renderInputInteger(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass(t)},i.a.createElement(u.Label,{sm:4},e),i.a.createElement(u.Col,{sm:8},i.a.createElement(u.Input,{type:"text",name:t,maxLength:a,disabled:this.state.isDisabled||s,value:this.state.employee[t]||"",onChange:e=>{this.handleChangeInteger(e)}})))}renderInputSmaller(e,t){return i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass(t)},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},e),i.a.createElement(u.Col,{sm:8},i.a.createElement(u.Input,{type:"text",name:t,value:this.state.employee[t]||"",onChange:e=>{this.handleChange(e)},disabled:this.state.isDisabled}))))}renderInputSmallerDouble(e,t,a){return i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0,className:this.validateClass(t)},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},e),i.a.createElement(u.Col,{sm:8},i.a.createElement(u.Input,{type:"text",name:t,maxLength:a,value:this.state.employee[t]||"",onChange:e=>{this.handleChangeDouble(e)},disabled:this.state.isDisabled}))))}renderCustomInputSmaller(e,t,a){return i.a.createElement(u.Col,{sm:6},i.a.createElement(u.FormGroup,{row:!0},i.a.createElement(u.Label,{sm:4,style:{fontSize:"11px"}},e),i.a.createElement(u.Col,{sm:8},"DATETIME"!==t&&"BOOLEAN"!==t&&"DOUBLE"!==t&&i.a.createElement(u.Input,{type:"text",name:e,value:a||"",onChange:e=>{this.handleChangeCustomFields(e,t)},disabled:this.state.isDisabled}),"DATETIME"===t&&i.a.createElement(f.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:y()(a,"YYYY-MM-DD HH:mm:ss",!0).isValid()?y()(a).format("DD-MM-YYYY HH:mm:ss"):a,dateFormat:"DD-MM-YYYY",timeFormat:"HH:mm:ss",onChange:t=>this.handleChangeCustomDateTimeFields(e,t),disabled:this.state.isDisabled}),"BOOLEAN"===t&&i.a.createElement(u.Label,{check:!0},i.a.createElement(u.Input,{type:"checkbox",checked:Object(n.i)(a),onClick:t=>this.handleBooleanFields(e,t),disabled:this.state.isDisabled})),"DOUBLE"===t&&i.a.createElement(D.a,{placeholder:"0,00",isNumericString:!0,value:a,onValueChange:a=>this.handleChangeCustomDoubleFields(a,t,e),sm:12,style:{textAlign:"right"},thousandSeparator:".",decimalSeparator:",",displayType:"input",allowNegative:!0,name:e,id:"numberFormat-component",className:"form-control",disabled:this.state.isDisabled}))))}}t.a=O},1376:function(e,t,a){"use strict";var s=a(0),i=a.n(s),n=(a(83),a(2)),l=a(3),o=a(5),r=a(85),d=a(6),c=a.n(d),m=a(1340),h=a(15),p=a(61),u=a.n(p),g=a(430),b=a(55),y=a.n(b),S=a(9),f=a.n(S),E=a(176);class C extends s.Component{constructor(e){super(e),this.zipAndUploadFiles=()=>{let e=this,t=e.state.fileList;const s=a(1357)();t.forEach(e=>{s.file(e.name,e.content)}),s.generateAsync({type:"arrayBuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(a=>{let s={content:new File([new Blob([a],{type:"application/zip"})],"yuklenenDokumanlar.zip",{type:"application/zip",lastModified:Date.now()}),name:"zipFile.zip",size:1};t=[],t.push(s);let i,n=new FormData;e.props.newSession?(n.append("content",s.content),n.append("year",e.state.sessionMonth.year().toString()),n.append("month",(e.state.sessionMonth.month()+1).toString()),n.append("totalCount",1),n.append("location",e.state.location?e.state.location:""),i="/create"):(n.append("content",s.content),n.append("id",e.props.id?e.props.id:e.state.id),n.append("totalCount",1),i="/sendNextBordroFile");let r={url:"/bordrosession".concat(i),method:"post",cancelToken:e._source.token,data:n};t[0]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:s.name,size:s.size,content:s.content},e.setState({btnDisabled:!0,fileList:t}),Object(o.e)(r).then((function(a){let s=t[0];t[0]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:s.name,size:s.size,content:s.content},e.setState({fileList:t,id:a.data,btnDisabled:!1}),e.props.toggleModal(!0,!0),e.props.newSession&&(e.props.toggleModal(!1,!0),e.props.history.push("/".concat(e.props.peykName,"/bordroimport/").concat(e.state.id)),e.props.loadBordroSession())})).catch((function(a){u.a.isCancel(a)||(s.status="error",s.statusText=a.data,t[0]={status:"error",statusText:a.data,name:s.name,size:s.size,content:s.content},e.setState({fileList:t,btnDisabled:!1}),Object(l.v)(a))}))})},this.state={fileList:[],index:0,process:!1,realIndex:0,year:null,month:null,disableZone:!1,steps:[{target:".modal-content",content:"\xc7al\u0131\u015fanlar\u0131n\u0131za \xfccret bordrosu g\xf6nderimi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olarak y\xfckleme yap\u0131n\u0131z.",placement:"center"},{target:".form-control",content:"Bordro d\xf6nemini buradan se\xe7ebilirsiniz.",placement:"auto"},{target:".dropzoneInnerArea",content:"\xdccret bordrolar\u0131n\u0131z\u0131 s\xfcr\xfckle-b\u0131rak veya bu alana t\u0131klayarak y\xfckleyebilirsiniz.",placement:"auto"},{target:".kaydet",content:"D\xf6nem ve y\xfcklenecek dosyalar se\xe7ildikten sonra y\xfcklemeyi ba\u015flatabilirsiniz.",placement:"auto"}],steps2:[{target:".modal-content",content:"Se\xe7ilen bordro d\xf6nemine dosya eklemesi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olarak y\xfckleme yap\u0131n\u0131z.",placement:"center"},{target:".dropzoneInnerArea",content:"\xdccret bordrolar\u0131n\u0131z\u0131 s\xfcr\xfckle-b\u0131rak veya bu alana t\u0131klayarak y\xfckleyebilirsiniz.",placement:"auto"},{target:".kaydet",content:"Y\xfcklenecek dosyalar se\xe7ildikten sonra y\xfcklemeyi ba\u015flatabilirsiniz.",placement:"auto"}],locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla"},joyrideActive:!1,shouldRun:!0},this.onDrop=this.onDrop.bind(this),this.callback=this.callback.bind(this),this.onCancel=this.onCancel.bind(this),this.changeLocation=this.changeLocation.bind(this),this.sendNextBordroFile=this.sendNextBordroFile.bind(this)}componentDidUpdate(e,t,a){!0===this.props.removeMonth&&this.state.sessionMonth&&(this.setState({sessionMonth:null}),this.props.setRemoveMonthOff())}sendNextBordroFile(e,t,a){if(this.props.newSession&&!f()(this.state.sessionMonth,"YYYY/MM",!0).isValid())Object(l.v)({message:"\xdccret Bordrosu D\xf6nemi alan\u0131na YYYY/AA format\u0131nda ge\xe7erli bir de\u011fer giriniz."});else{let s=this;this._source=u.a.CancelToken.source();let i,n=s.state.fileList;i=0===a?n.length:a;let r=!0,d=!0;for(let e=0;e<i;e++){let t=n[e].name;t.toLowerCase().endsWith(".pdf")||(r=!1),t.toLowerCase().endsWith(".xlsx")||(d=!1)}if(i>1&&r){let t=0;if(n.forEach(e=>{t+=e.size}),t<78643200){let t=new FormData;n.forEach(e=>{t.append("files",e.content)}),s.props.id?t.append("id",s.props.id?s.props.id:s.state.id):(t.append("year",this.state.sessionMonth.year().toString()),t.append("month",(this.state.sessionMonth.month()+1).toString()),t.append("location",s.state.location?s.state.location:""));let a={url:"/bordrosession".concat("/createOrSendNextBordroFile"),method:"post",cancelToken:s._source.token,data:t};n.forEach((e,t)=>{n[t]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:e.name,size:e.size,content:e.content}}),s.setState({btnDisabled:!0,fileList:n}),Object(o.e)(a).then((function(t){n.forEach((e,t)=>{n[t]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:e.name,size:e.size,content:e.content}}),s.setState({btnDisabled:!1,index:e+1}),s.props.newSession?(s.props.toggleModal(!1,!0),s.props.history.push("/".concat(s.props.peykName,"/bordroimport/").concat(s.state.id)),s.props.loadBordroSession()):"success"===n[e].status&&s.props.toggleModalWithTimeout(!1,!0),s.load(),c.a.success("T\xfcm dok\xfcmanlar kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){u.a.isCancel(e)||(n.forEach((t,a)=>{t.status="error",t.statusText=e.data,n[a]={status:"error",statusText:e.data,name:t.name,size:t.size,content:t.content}}),s.setState({fileList:n,btnDisabled:!1}),Object(l.v)(e))}))}else c.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3})}else if(i>1&&!r&&d)c.a.warning(".xlsx olarak sadece bir dosya y\xfcklenebilir.",{position:"top-right",effect:"stackslide",timeout:5e3});else if(i>1&&!r&&!d)c.a.warning(".pdf ve .xlsx dosyalar\u0131 birlikte y\xfcklenemez.",{position:"top-right",effect:"stackslide",timeout:5e3});else if(e<n.length){let a=n[e];if(a.size<78643200){let r,d=new FormData;s.props.newSession&&t?(d.append("content",a.content),d.append("year",this.state.sessionMonth.year().toString()),d.append("month",(this.state.sessionMonth.month()+1).toString()),d.append("totalCount",i),d.append("location",s.state.location?s.state.location:""),r="/create"):(d.append("content",a.content),d.append("id",s.props.id?s.props.id:s.state.id),d.append("totalCount",i),r="/sendNextBordroFile");let c={url:"/bordrosession".concat(r),method:"post",cancelToken:s._source.token,data:d};n[e]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:a.name,size:a.size,content:a.content},s.setState({btnDisabled:!0,fileList:n}),Object(o.e)(c).then((function(a){let l=n[e];n[e]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:l.name,size:l.size,content:l.content},s.setState({fileList:n,index:e+1}),t&&s.setState({id:a.data}),e+1<n.length?(e+1)%5===0?(n.splice(0,4),s.setState({realIndex:s.state.realIndex+4}),s.sendNextBordroFile(e+1-4,!1,i)):s.sendNextBordroFile(e+1,!1,i):(s.setState({btnDisabled:!1,index:e+1}),s.props.newSession?(s.props.toggleModal(!1,!0),s.props.history.push("/".concat(s.props.peykName,"/bordroimport/").concat(s.state.id)),s.props.loadBordroSession()):"success"===n[e].status&&s.props.toggleModalWithTimeout(!1,!0))})).catch((function(t){u.a.isCancel(t)||(a.status="error",a.statusText=t.data,n[e]={status:"error",statusText:t.data,name:a.name,size:a.size,content:a.content},s.setState({fileList:n,btnDisabled:!1}),Object(l.v)(t))}))}else c.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3})}else c.a.success("T\xfcm dok\xfcmanlar kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3})}}onCancel(){this._source&&this._source.cancel(),this.state.index>0?this.props.toggleModal(!1,!0):this.props.toggleModal(!1,!1)}onDrop(e,t){let a=this;if(e){a.setState({processing:!0,uploadBtnDisabled:!0,fileList:[]});let t=[];for(let a=0;a<e.length;a++)t.push({content:e[a],name:e[a].name,size:e[a].size});a.setState({processing:!1,uploadBtnDisabled:!1,fileList:t,index:0,realIndex:0})}}getStatusRender(e){let t="processing"===e?"spinner fa-spin":"success"===e?"check":"error"===e?"close":"pause",a="processing"===e?"dark":"success"===e?"green":"error"===e?"red":"dark";return i.a.createElement("i",{className:"fas fa-"+t,style:{color:a,paddingRight:"4px"}})}activateJoyride(){!1===this.state.joyrideActive&&this.setState({joyrideActive:!0})}callback(e){"close"===e.action&&"step:after"===e.type&&this.setState({shouldRun:!1}),"stop"!==e.action&&"reset"!==e.action&&"skip"!==e.action||(this.setState({shouldRun:!0}),this.setState({joyrideActive:!1}),this.activateJoyride())}changeLocation(e){this.setState({location:e.target.value})}render(){let e=this.props&&this.props.newSession?this.state.steps:this.state.steps2,t=this.state.locale;return i.a.createElement(r.a,{isOpen:this.props.modal,disabled:this.state.btnDisabled||this.state.fileList&&0===this.state.fileList.length||this.props.newSession&&!this.state.sessionMonth,title:"\xdccret Bordrosu Dosyalar\u0131n\u0131 Y\xfckleme",size:"lg",modalBodyStyle:{padding:"0",minHeight:"500px"},secondaryButton:i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()},style:{position:"absolute",right:"70px",alignSelf:"center",marginTop:"-5px"}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon",style:{opacity:".5"}})),confirmBtnText:"Dok\xfcman(lar)\u0131 Y\xfckle",cancelBtnText:"Kapat",onConfirm:e=>this.sendNextBordroFile(this.state.index,!0,0),onCancel:e=>this.props.toggleModal(!1,!1)},i.a.createElement(n.Row,null,this.state.joyrideActive&&i.a.createElement(E.a,{disableBeacon:!0,autoStart:!0,locale:t,steps:e,continuous:!0,run:this.state.shouldRun,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,scrollToSteps:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClicks:!1,keyboardNavigation:!0,hideBackButton:!1,disableOverlayClose:!0,callback:this.callback,holePadding:0,shouldRun:this.state.shouldRun,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}}),this.props.newSession&&i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"15px"}},i.a.createElement("div",{className:"col-sm-4"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-4"},"D\xf6nem"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(y.a,{timeFormat:!1,dateFormat:"YYYY-MM",closeOnSelect:!0,inputProps:{placeholder:"YIL/AY"},value:this.state.sessionMonth,renderMonth:this.props.renderMonth,isValidDate:function(e){return e.startOf("month").isSameOrBefore(y.a.moment().startOf("month"))},onChange:e=>{this.setState({sessionMonth:e}),this.props.onMonthChange(e)}}))),i.a.createElement("div",{className:"col-sm-2"})),this.props.newSession&&i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"15px"}},i.a.createElement("div",{className:"col-sm-4"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-4"},"Lokasyon"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(n.Input,{type:"text",name:"location",value:this.state.location,onChange:this.changeLocation}))),i.a.createElement("div",{className:"col-sm-2"})),i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"15px",paddingRight:"32px",paddingLeft:"32px"}},i.a.createElement(g.a,{accept:".pdf, .xlsx",activeClassName:"dropzoneActiveClass",className:"FormRenk col-sm-12",multiple:!0,disabled:this.state.btnDisabled,onDrop:this.onDrop},i.a.createElement("div",{className:"dropzoneInnerArea"},"\xdccret Bordrosu dosyalar\u0131n\u0131 (.pdf, .xlsx) y\xfckleyiniz.")))),i.a.createElement(n.Row,null,i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"0px",paddingRight:"15px",paddingLeft:"15px",maxHeight:"500px",overflow:"auto"}},i.a.createElement("table",{className:"",style:{textAlign:"center",paddingBottom:"5px"}},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"#ebedf0"}},i.a.createElement("th",{width:"5%"},"#"),i.a.createElement("th",null,"Dosya Ad\u0131"),i.a.createElement("th",null,"Dosya Boyutu"),i.a.createElement("th",null,"Durum"))),i.a.createElement("tbody",null,this.state.fileList&&this.state.fileList.map((e,t)=>i.a.createElement("tr",{key:t+"_"+e.name+"_"+e.size},i.a.createElement("td",null,t+1),i.a.createElement("td",{style:{margin:"0px",textAlign:"left"}},i.a.createElement(h.a,{text:e.name||"-",maxLength:30})),i.a.createElement("td",{style:{margin:"0px"}},new m.Decimal(new m.Decimal(e.size/1024/1024).toFixed(2)).toNumber()+" MB"),i.a.createElement("td",{style:{margin:"0px"}},this.getStatusRender(e.status),e.statusText||"G\xf6nderim bekliyor"))),!this.state.processing&&this.state.fileList&&0===this.state.fileList.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Kay\u0131t bulunamad\u0131")),this.state.processing&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Dok\xfcman i\u015fleniyor..."))))),i.a.createElement(n.Col,{sm:"12"},i.a.createElement("p",{style:{float:"right"}},"Toplam Adet: ",this.state.fileList?this.state.fileList.length:0))))}}t.a=C},1604:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(2),l=(a(93),a(13)),o=a.n(l),r=(a(220),a(83),a(19)),d=a(62),c=a(9),m=a.n(c),h=a(3),p=a(101),u=a(5),g=a(6),b=a.n(g),y=a(12),S=a(46),f=a(1341),E=a(335),C=a(1404),k=a(1465),v=a.n(k),D=a(38),x=a.n(D);const w=v()(C.a);class B extends s.Component{constructor(e){super(e),this.state={employeeListLoading:!1}}componentDidMount(){let e=this;e.setState({loading:!0,searching:!0,manual:!0!==e.manual&&e.manual,employeeListLoading:!0}),Object(u.e)({url:"/employee/readActiveEmployeeAll?page=0&size=100&customFields=",method:"get"}).then((function(t){e.setState({total:t.data.pageList.totalElements,employeeList:t.data.pageList.content,loading:!1,employeeListLoading:!1})})).catch((function(t){e.setState({loading:!1,searching:!1,employeeListLoading:!1}),Object(h.v)(t)}))}renderMainTable(){const e={keyField:"id",isSelected:e=>this.props.value&&this.props.value.id===e,toggleSelection:e=>{let t=this.state.employeeList.find(t=>t.id===parseInt(e.replace("select-","")));t&&this.props.onChange(t)},selectType:"radio",getTrProps:(e,t)=>({style:{backgroundColor:t&&this.props.value&&this.props.value.id===t.original.id?"lightgreen":"inherit"}})};let t=Object(y.G)(this,[{Header:"Ad",accessor:"name"},{Header:"Soyad",accessor:"surname"},{Header:"Departman",accessor:"department_name"},{Header:"G\xf6revi",accessor:"jobtitle"},{Header:"TCKN",accessor:"tckn"},{Header:"KEP Adresi",accessor:"kepAddress"}],"accessor");return i.a.createElement(w,Object.assign({ref:e=>this.checkboxTable=e,className:"-striped -highlight",data:this.state.employeeList,columns:t,defaultPageSize:10,previousText:"\xd6nceki",nextText:"Sonraki",pageText:"Sayfa",ofText:"Toplam:",rowsText:"kay\u0131t"},e))}render(){return i.a.createElement("div",null,this.state.employeeListLoading&&i.a.createElement(x.a,{type:"spinningBubbles",style:{width:"150px",height:"150px",margin:"50px auto 0 auto",fill:"#888"}}),!this.state.employeeListLoading&&this.renderMainTable())}}var T=B;class N extends s.Component{constructor(e){super(e),this.state={alert:null},this.editClicked=this.editClicked.bind(this),this.saveClicked=this.saveClicked.bind(this)}static getDerivedStateFromProps(e,t){return e.bordro!==t.bordro?{bordro:e.bordro,selectedEmployee:void 0}:null}editClicked(e){this.setState({edit:!0})}saveClicked(e){let t=this,a={url:"/bordro/updateBordroEmployee",method:"post",data:{bordroId:t.props.bordro.id,employeeId:t.state.selectedEmployee.id}};t.setState({disabledSaveBtn:!0}),Object(u.e)(a).then((function(e){let a=e.data;t.setState({edit:!1,alert:null,disabledSaveBtn:!1}),t.props.toggle&&t.props.toggle(),t.props.onBordroUpdated(),b.a.success(a,{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){Object(h.v)(e),t.setState({disabledSaveBtn:!1})}))}renderView(){return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"TCKN")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},this.props.bordro.employee&&i.a.createElement("span",{className:"text-success"},this.props.bordro.employee.tckn),!this.props.bordro.employee&&i.a.createElement("span",{className:"text-danger"},this.props.bordro.parsedTckn))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"Ad\u0131")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},i.a.createElement("span",null,this.props.bordro.employee&&this.props.bordro.employee.name))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"Soyad\u0131")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},i.a.createElement("span",null,this.props.bordro.employee&&this.props.bordro.employee.surname))),Object(y.A)(this)&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"Departman\u0131")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},i.a.createElement("span",null,this.props.bordro.employee&&this.props.bordro.employee.department&&this.props.bordro.employee.department.name))),Object(y.A)(this)&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"G\xf6revi")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},i.a.createElement("span",null,this.props.bordro.employee&&this.props.bordro.employee.jobtitle))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-2"},i.a.createElement("label",null,"Kep Adresi")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-10"},i.a.createElement("span",null,this.props.bordro.employee&&this.props.bordro.employee.kepAddress))))}renderEdit(){return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-4 col-lg-3"},i.a.createElement("label",null,"\xdccret Bordrosu TCKN")),i.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-9"},i.a.createElement("span",null,this.props.bordro.parsedTckn))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement(T,{value:this.state.selectedEmployee,onChange:e=>this.setState({selectedEmployee:e})}))))}render(){return i.a.createElement("div",null,this.state.alert,i.a.createElement(n.Modal,{isOpen:this.props.bordro,size:"lg",toggle:e=>{this.setState({edit:!1}),this.props.toggle(e)}},i.a.createElement(n.ModalHeader,{className:"justify-content-center",toggle:e=>{this.setState({edit:!1}),this.props.toggle(e)}},"\xdccret Bordrosu \xc7al\u0131\u015fan Bilgileri"),i.a.createElement(n.ModalBody,null,this.props.bordro&&!this.state.edit&&this.renderView(),this.props.bordro&&this.state.edit&&this.renderEdit()),i.a.createElement(n.ModalFooter,null,i.a.createElement(n.Button,{title:"\u0130ptal",color:"secondary",onClick:e=>{this.setState({edit:!1}),this.props.toggle(e)}},"\u0130ptal"),!this.state.edit&&i.a.createElement(n.Button,{title:"\xc7al\u0131\u015fan\u0131 De\u011fi\u015ftir",color:"primary",onClick:this.editClicked},"D\xfczenle"),this.state.edit&&i.a.createElement(n.Button,{title:"Se\xe7ili \xc7al\u0131\u015fan\u0131 Kaydet",color:"primary",disabled:!this.state.selectedEmployee||this.state.disabledSaveBtn,onClick:this.saveClicked},"Kaydet"))))}}var L=N,O=a(1358),M=a(23),z=a(85),I=a(1403);class A extends s.Component{constructor(e){super(e),this.saveClicked=()=>{let e=this,t=this.state.status.value,a=[];a.push(this.props.id);let s={url:"/bordro/updateBordroConditionalStatus?isChecked=".concat(t),method:"post",data:{conditionalIdList:a,sessionId:this.props.sessionId}};e.setState({alert:null,disableBtn:!0}),Object(u.e)(s).then((function(t){e.setState({disableBtn:!1}),e.props.toggleModal(!1,!0)})).catch((function(t){Object(h.v)(t),e.setState({disableBtn:!1})}))},this.state={status:{},disableBtn:!1}}componentDidMount(){this.setState({status:this.props.status?{value:!0,label:"Verilmi\u015f"}:{value:!1,label:"Verilmemi\u015f"}})}render(){return i.a.createElement(z.a,{isOpen:this.props.modal,size:"sm",closeOnEsc:!1,title:"\u015eartl\u0131 Onay Hakk\u0131 Atama",confirmBtnText:"Kaydet",cancelBtnText:"Kapat",disabled:this.state.disableBtn,onConfirm:()=>this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>this.saveClicked(),onCancel:()=>this.setState({alert:null}),style:{top:"100%"}},this.state.status.value?"Dok\xfcmana \u015fartl\u0131 onay yetkisi verilecektir.":"Dok\xfcmandan \u015fartl\u0131 onay yetkisi kald\u0131r\u0131lacakt\u0131r.")}),onCancel:()=>this.props.toggleModal(!1,!1)},i.a.createElement(I.a,null,i.a.createElement(n.FormGroup,{row:!0},i.a.createElement(n.Label,{sm:6},"\u015eartl\u0131 Onay Hakk\u0131: "),i.a.createElement(n.Col,{sm:6},i.a.createElement(M.a,{value:this.state.status,clearable:!1,disabled:this.state.disableBtn,options:[{value:!0,label:"Verilmi\u015f"},{value:!1,label:"Verilmemi\u015f"}],placeholder:"Se\xe7iniz...",onChange:e=>this.setState({status:e})}),this.state.alert))))}}var Y=A,j=a(75),F=a(15),G=a(159),R=a.n(G);class P extends s.Component{constructor(e){super(e),this.saveClicked=()=>{let e=this,t=this.state.status.value,a=[];a.push(this.props.id);let s={url:"/bordro/updateBordroDeclineStatus?isChecked=".concat(t),method:"post",data:{declineIdList:a,sessionId:this.props.sessionId}};e.setState({alert:null,disableBtn:!0}),Object(u.e)(s).then((function(t){e.setState({disableBtn:!1}),e.props.toggleModal(!1,!0)})).catch((function(t){Object(h.v)(t),e.setState({disableBtn:!1})}))},this.state={status:{},disableBtn:!1}}componentDidMount(){this.setState({status:this.props.status?{value:!0,label:"Verilmi\u015f"}:{value:!1,label:"Verilmemi\u015f"}})}render(){return i.a.createElement(z.a,{isOpen:this.props.modal,size:"sm",closeOnEsc:!1,title:"Reddetme Hakk\u0131 Atama",confirmBtnText:"Kaydet",cancelBtnText:"Kapat",disabled:this.state.disableBtn,onConfirm:()=>this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>this.saveClicked(),onCancel:()=>this.setState({alert:null}),style:{top:"100%"}},this.state.status.value?"Dok\xfcmana reddedebilme yetkisi verilecektir.":"Dok\xfcmandan reddedebilme yetkisi kald\u0131r\u0131lacakt\u0131r.")}),onCancel:()=>this.props.toggleModal(!1,!1)},i.a.createElement(I.a,null,i.a.createElement(n.FormGroup,{row:!0},i.a.createElement(n.Label,{sm:6},"Reddetme Hakk\u0131: "),i.a.createElement(n.Col,{sm:6},i.a.createElement(M.a,{value:this.state.status,clearable:!1,disabled:this.state.disableBtn,options:[{value:!0,label:"Verilmi\u015f"},{value:!1,label:"Verilmemi\u015f"}],placeholder:"Se\xe7iniz...",onChange:e=>this.setState({status:e})}),this.state.alert))))}}var _=P;class H extends s.Component{constructor(e){super(e),this.readDepartmentTreeData=()=>{let e=this;e.setState({treeData:[]});let t={url:"/department/readDepartmentTreeData",method:"post",data:e.state.selectedAuthorizationWay};Object(u.e)(t).then((function(t){e.setState({treeData:t.data})})).catch((function(e){Object(h.v)(e)}))},this.readTitleAll=()=>{let e=this;Object(u.e)({url:"/employeecustom/readTitleAll",method:"get"}).then((function(t){e.setState({titleList:t.data})})).catch((function(e){}))},this.updateConditionalList=e=>{let t=this.state.conditionalSelection;e&&e.map(e=>{e.conditionalApproveAllowed&&t.push(e.id)}),this.setState({conditionalSelection:t}),this.props.changeOnConditionalSelection(t)},this.updateDeclineList=e=>{let t=this.state.declineSelection;e&&e.map(e=>{e.declineAllowed&&t.push(e.id)}),this.setState({declineSelection:t}),this.props.changeOnDeclineSelection(t)},this.detailedDepartment=()=>{const e=document.getElementById("departmentContainer");this.setState({detailedDepartment:!this.state.detailedDepartment},()=>{this.state.detailedDepartment?e.style.height="auto":e.style.height="200px"})},this.state={loading:!0,alert:null,selection:[],displayTcknDublicates:!1,pageList:null,showOnlyMissing:!1,showOnlyDublicates:!1,showOnlySents:!1,manual:!1,content:[],treeData:[],conditionalSelection:[],declineSelection:[],conditionalSelectedAll:!1,declineSelectedAll:!1,total:0,searching:!1,searchQuery:void 0,page:0,size:10,searchKey:"",temporaryRow:"",showDownloadButton:!1,detailedDepartment:!1,selectedAuthorizationWay:h.c.DEPARTMENT},this.fetchData=this.fetchData.bind(this),this.deleteRow=this.deleteRow.bind(this),this.isSelected=this.isSelected.bind(this),this.handleSearch=this.handleSearch.bind(this),this.changeSelection=this.changeSelection.bind(this),this.setSelectedDepts=this.setSelectedDepts.bind(this),this.toggleCheckboxChange=this.toggleCheckboxChange.bind(this),this.toggleConditionalChange=this.toggleConditionalChange.bind(this),this.toggleDeclineChange=this.toggleDeclineChange.bind(this),this.changeConditionalSelection=this.changeConditionalSelection.bind(this),this.changeDeclineSelection=this.changeDeclineSelection.bind(this),this.isConditionalAllowed=this.isConditionalAllowed.bind(this),this.isDeclineAllowed=this.isDeclineAllowed.bind(this),this.setMediaViewer=this.setMediaViewer.bind(this),this.previewBordro=this.previewBordro.bind(this),this.getTrStyles=this.getTrStyles.bind(this),this.downloadContent=this.downloadContent.bind(this),this.onAuthorizationWaysChange=this.onAuthorizationWaysChange.bind(this)}componentWillMount(){this.setState({jobTitlesData:Object(y.y)()}),this.props.selection&&this.props.selection.length>0&&this.setState({selection:this.props.selection}),this.readTitleAll();this.readDepartmentTreeData()}async onAuthorizationWaysChange(e){await this.setState({selectedAuthorizationWay:e.target.value}),this.readDepartmentTreeData(),this.handleSearch()}componentWillReceiveProps(e){e.manual&&(this.setState({manual:e.manual}),this.props.isManual(!1))}async fetchData(e,t,a,s){try{var i,n;"date"===e&&(e=void 0,t=void 0);const o=e?"&sort=".concat(e,",").concat(t):"&sort=id,desc",r=this.state.searchQuery?"&".concat(this.state.searchQuery):"";let d="/bordro/readAllBordroBySessionId?bordroSessionId=".concat(this.props.bordroSession.id)+"&showOnlyMissing=".concat(this.state.showOnlyMissing)+"&showOnlyDublicates=".concat(this.state.showOnlyDublicates)+"&showOnlySents=".concat(this.state.showOnlySents)+"&page=".concat(a,"&size=").concat(s).concat(r).concat(o);d=this.setSelectedDepts(d);const c={url:d,method:"get"};this.setState({loading:!0,searching:!0,manual:!0!==this.manual&&this.manual});const m=await Object(u.e)(c),h=m.data||{};if(h.selectedIdList)try{const e=await Object(u.e)({url:"/bordro/getBordroIdsForSelectedIds",method:"post",data:h.selectedIdList});this.setState({conditionallyOrDeclinableTotalIds:e?e.data:[]},()=>{this.props.totalPdfCountIdList(e?e.data:[])})}catch(l){this.setState({conditionallyOrDeclinableTotalIds:[]})}else this.setState({conditionallyOrDeclinableTotalIds:[]});const p=(null===(i=h.page)||void 0===i?void 0:i.content)||[];this.setState({page:a,size:s,total:(null===(n=h.page)||void 0===n?void 0:n.totalElements)||0,content:p,totalIdList:m.data?m.data.selectedIdList:[],searching:!1,loading:!(p.length>0||!this.props.isPdfsParsing)}),this.updateConditionalList(p),this.updateDeclineList(p),this.props.tableLoadingCompleted()}catch(l){this.setState({loading:!1,searching:!1}),this.props.tableLoadingCompleted(),Object(h.v)(l)}}handleSearch(e){this.setState({searchQuery:e,searching:!0,selection:[],conditionalSelection:[],declineSelection:[]},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}setSelectedDepts(e){let t=this.state.selectedDepts;return t&&Object.keys(t).map(a=>{t[a]&&(e=this.state.selectedAuthorizationWay===h.c.EXPENDITURE?e+"&employee_expenditureDepartment_id="+a:e+"&employee_department_id="+a)}),e}deleteRow(e){let t=this,a={url:"/bordro/deleteBordro",method:"post",data:e.id};t.setState({disabledDeleteBtn:!0}),Object(u.e)(a).then((function(){t.setState({manual:!0,alert:null,disabledDeleteBtn:!1,selection:[],conditionalSelection:[],declineSelection:[],conditionalSelectedAll:!1,declineSelectedAll:!1}),b.a.success("Bordro silindi.",{position:"top-right",effect:"stackslide",timeout:5e3}),t.props.load()})).catch((function(e){Object(h.v)(e),t.setState({disabledDeleteBtn:!1})}))}cancelSendingBordro(e){let t=this,a={url:"/bordro/cancelSendingBordro",method:"post",data:e.id};t.setState({disabledCancelSendingBtn:!0}),Object(u.e)(a).then((function(){t.setState({manual:!0,alert:null,disabledCancelSendingBtn:!1,selection:[],conditionalSelection:[],declineSelection:[],conditionalSelectedAll:!1,declineSelectedAll:!1}),b.a.success("Bordro G\xf6nderimi \u0130ptal Edildi.",{position:"top-right",effect:"stackslide",timeout:5e3}),t.props.load()})).catch((function(e){Object(h.v)(e),t.setState({disabledCancelSendingBtn:!1})}))}toggleCheckboxChange(e,t,a){let s=this,i=e.target.checked,n=s.state.content,l=s.state.selection;if("all"===t){let e=[];i&&n.forEach(t=>{e.push(t[a])}),s.setState({selection:e}),this.props.addSelectionToState(e)}else{let e=l.indexOf(t[a]);e>=0?l=[...l.slice(0,e),...l.slice(e+1)]:l.push(t[a]),s.setState({selection:l}),this.props.addSelectionToState(l)}}toggleConditionalChange(e,t,a){let s=this,i=e.target.checked,n=[];s.state.content.map(e=>n.push(e.id));let l=s.state.conditionalSelection;if("all"===t)l=[],i&&n.forEach(e=>{l.push(e)}),l=Array.from(new Set(l)),s.setState({conditionalSelection:l,conditionalSelectedAll:i});else{let e=l.indexOf(t[a]);e>=0?l=[...l.slice(0,e),...l.slice(e+1)]:l.push(t[a]),l=Array.from(new Set(l)),s.setState({conditionalSelection:l,conditionalSelectedAll:l.length>0&&l.length===s.state.content.length})}this.props.changeOnConditionalSelection(l)}toggleDeclineChange(e,t,a){let s=this,i=e.target.checked,n=[];s.state.content.map(e=>n.push(e.id));let l=s.state.declineSelection;if("all"===t)l=[],i&&n.forEach(e=>{l.push(e)}),l=Array.from(new Set(l)),s.setState({declineSelection:l,declineSelectedAll:i});else{let e=l.indexOf(t[a]);e>=0?l=[...l.slice(0,e),...l.slice(e+1)]:l.push(t[a]),l=Array.from(new Set(l)),s.setState({declineSelection:l,declineSelectedAll:l.length>0&&l.length===s.state.content.length})}this.props.changeOnDeclineSelection(l)}isSelected(e){return-1!==this.state.selection.indexOf(e)}isConditionalAllowed(e){return this.state.conditionalSelection&&-1!==this.state.conditionalSelection.indexOf(e)}isDeclineAllowed(e){return this.state.declineSelection&&-1!==this.state.declineSelection.indexOf(e)}changeSelection(e){this.setState({selection:e}),this.props.addSelectionToState(e)}changeConditionalSelection(e){this.setState({conditionalSelection:e}),this.props.changeOnConditionalSelection(e)}changeDeclineSelection(e){this.setState({declineSelection:e}),this.props.changeOnDeclineSelection(e)}setMediaViewer(){this.setState({url:null,mediaModal:!1})}previewBordro(e){let t=this,a={url:"/bordro/previewBordroContent",responseType:"arraybuffer",method:"post",data:e.id};t.setState({mediaModal:!0,temporaryRow:e,showDownloadButton:!0}),Object(u.e)(a).then((function(e){let a=new Blob([e.data],{type:e.headers["content-type"]}),s="";if(void 0!==a){let e=new FileReader;e.readAsDataURL(a),e.onloadend=function(){s=e.result,t.setState({url:s})}}})).catch((function(e){Object(h.v)(e),t.setState({mediaModal:!1})}))}getTrStyles(e){return e.employee&&e.employee.statusType&&"ACTIVE"!==e.employee.statusType?{backgroundColor:"lightgray",webkitTextFillColor:"darkgray"}:{}}downloadContent(e,t){let a=this,s={url:"/bordro/previewBordroContent",responseType:"arraybuffer",method:"post",data:e.id};a.setState({disabledDownloadBtn:!0,selectedIndex:t}),Object(u.e)(s).then((function(t){let s=new Blob([t.data],{type:t.headers["content-type"]});var i=document.createElement("a");i.href=window.URL.createObjectURL(s);let n=Math.floor(1e5*Math.random()),l=e.createdAt?"_"+e.createdAt.toString().substring(0,e.createdAt.indexOf("T")):"",o="Bordro"+(e.parsedTckn?"_"+e.parsedTckn+"_":"_")+e.term.split("-")[0]+"_"+e.term.split("-")[1]+"_"+l+"_"+n+".pdf";if(i.download=o,document.body.appendChild(i),null!=e.timeStamp&&""!=e.timeStamp){let t=new Blob([R.a.decode(e.timeStamp)],{type:"application/octet-stream"}),a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download=o+".zd",document.body.appendChild(a),a.click()}i.click(),a.setState({disabledDownloadBtn:!1}),a.setState({loading:!1})})).catch((function(e){Object(h.v)(e),a.setState({disabledDownloadBtn:!1,title:null})}))}render(){let e=[],t=[],a=[];this.state.content&&this.state.content instanceof Array&&this.state.content.map(s=>{s.employee&&s.employee.name&&"ACTIVE"!==s.employee.statusType||e.push(s.id),a.includes(s.parsedTckn)?t.includes(s.parsedTckn)||t.push(s.parsedTckn):a.push(s.parsedTckn)});let s=[{Header:i.a.createElement(p.a,{selectionIdList:this.state.selection,totalIdList:this.state.totalIdList,pageIdList:e,onChange:this.changeSelection}),accessor:"id",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.props.bordroSession&&i.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),disabled:e.employee&&e.employee.statusType&&"ACTIVE"!==e.employee.statusType||602===S.a[e.state].value||603===S.a[e.state].value,onChange:a=>this.toggleCheckboxChange(a,e,"id",t)})},{Header:"Ay",accessor:"term",Cell:e=>i.a.createElement("div",null,!!e.term&&m()(e.term,"YYYY/MM/DD").format("YYYY/MM"))},{Header:"Lokasyon",accessor:"location",Cell:e=>i.a.createElement("div",{style:{margin:0}},i.a.createElement(F.a,{text:e.location,maxLength:25}))},{Header:"TCKN",accessor:"parsedTckn",Cell:e=>i.a.createElement("div",null,!(e.employee&&e.employee.name)&&i.a.createElement("span",{className:"text-danger"},e.parsedTckn),e.employee&&e.employee.name&&t.includes(e.parsedTckn)&&i.a.createElement("span",{className:"text-warning"},e.parsedTckn),e.employee&&e.employee.name&&!t.includes(e.parsedTckn)&&i.a.createElement("span",{className:"text-success"},e.parsedTckn))},{Header:"Ad\u0131",accessor:"employee_name",Cell:e=>i.a.createElement("div",null,e.employee&&e.employee.name)},{Header:"Soyad\u0131",accessor:"employee_surname",Cell:e=>i.a.createElement("div",null,e.employee&&e.employee.surname)},{Header:"Departman",accessor:"employee_department",Cell:e=>i.a.createElement("div",null,e.employee&&e.employee.department&&e.employee.department.name)},{Header:"G\xf6rev",accessor:"employee_jobTitle",Cell:e=>i.a.createElement("div",null,e.employee&&e.employee.jobTitle)},{Header:"Kep Adresi",accessor:"employee_kepAddress",Cell:e=>i.a.createElement("div",null,e.employee&&e.employee.kepAddress)},{Header:"\xc7al\u0131\u015fan Durumu",accessor:"employee_statusType",Cell:e=>i.a.createElement("div",null,e.employee&&"ACTIVE"===e.employee.statusType&&i.a.createElement("span",{className:"text-success"},"Aktif"),e.employee&&"PASSIVE"===e.employee.statusType&&i.a.createElement("span",{className:"text-danger"},"Pasif"),e.employee&&"TERMINATED"===e.employee.statusType&&i.a.createElement("span",{className:"text-danger"},"Fesih"),e.employee&&"CANDIDATE"===e.employee.statusType&&i.a.createElement("span",{className:"text-danger"},"Aday"))},{Header:"Uyar\u0131 Say\u0131s\u0131",accessor:"warningCount",Cell:e=>i.a.createElement("div",{style:{margin:0}},e.warningCount)},{Header:"Sayfa Say\u0131s\u0131",accessor:"pageCount",Cell:e=>i.a.createElement("div",{style:{margin:0}},e.pageCount)},{Header:"Durumu",accessor:"state",Cell:e=>i.a.createElement("div",null,e.error&&i.a.createElement("span",{className:"text-danger"},e.error),!e.error&&i.a.createElement("span",{className:"text-"+S.a[e.state].messageType},S.a[e.state].message))},{Header:this.state.content&&i.a.createElement("div",null,i.a.createElement("span",{style:{color:"#007acc"}},"\u015eartl\u0131 Onay"),i.a.createElement("br",null),i.a.createElement(p.a,{selectionIdList:this.state.conditionalSelection,totalIdList:this.state.conditionallyOrDeclinableTotalIds,pageIdList:e,onChange:this.changeConditionalSelection,isConditional:!0})),accessor:"conditional",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.content&&i.a.createElement("input",{type:"checkbox",style:{width:"60px"},checked:this.isConditionalAllowed(e.id),disabled:e.employee&&e.employee.statusType&&"ACTIVE"!==e.employee.statusType||602===S.a[e.state].value||603===S.a[e.state].value||Object(y.N)(e.state,">=","PDF_SIGNED"),onChange:a=>this.toggleConditionalChange(a,e,"id",t)})},{Header:this.state.content&&i.a.createElement("div",null,i.a.createElement("span",{style:{color:"#408f57"}},"Reddedilebilir"),i.a.createElement("br",null),i.a.createElement(p.a,{selectionIdList:this.state.declineSelection,totalIdList:this.state.conditionallyOrDeclinableTotalIds,pageIdList:e,onChange:this.changeDeclineSelection,isDeclinable:!0})),accessor:"decline",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.content&&i.a.createElement("input",{type:"checkbox",style:{width:"75px"},checked:this.isDeclineAllowed(e.id),disabled:e.employee&&e.employee.statusType&&"ACTIVE"!==e.employee.statusType||602===S.a[e.state].value||603===S.a[e.state].value||Object(y.N)(e.state,">=","PDF_SIGNED"),onChange:a=>this.toggleDeclineChange(a,e,"id",t)})},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:(e,t)=>i.a.createElement("div",null,!this.props.isKepOwner&&i.a.createElement("div",{className:"btn-group",style:{padding:0,margin:0}},i.a.createElement("div",{className:"dropdown",style:{padding:0,margin:0}},i.a.createElement("button",{className:"MenuBtn2 listt btn btn-default",style:{WebkitTextFillColor:"white"},type:"button","data-toggle":"dropdown"},"Se\xe7\u0130n\u0130z"),i.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton_"+e.id},i.a.createElement("a",{className:"dropdown-item ",onClick:()=>this.previewBordro(e)},i.a.createElement("i",{className:"fa fa-search"}),"G\xf6r\xfcnt\xfcle"),!(this.state.disabledDownloadBtn&&t===this.state.selectedIndex)&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.downloadContent(e)},i.a.createElement("i",{className:"fa fa-download"}),"Bordro \u0130ndir"),!(this.state.disabledDownloadBtn&&t===this.state.selectedIndex)&&(610===S.a[e.state].value||S.a[e.state].value>=630&&S.a[e.state].value<=660)&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>Object(y.n)(this,e,t,"BORDRO")},i.a.createElement("i",{className:"fa fa-download"}),"Onay Belgesini \u0130ndir"),Object(y.N)(e.state,"<","PDF_SIGNED")&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({employeeId:e.employee?e.employee.id:null,tckn:e.parsedTckn,showModal:!0})},i.a.createElement("i",{className:"fa fa-at"}),e.employee&&e.employee.id?"Al\u0131c\u0131 D\xfczenle":"Al\u0131c\u0131 Yeni Ekle"),Object(y.N)(e.state,">=","MIME_SIGNED")&&Object(y.N)(e.state,"<","APPROVED_BY_EMPLOYEE")&&!Object(y.N)(e.state,"=","OBJECTION")&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({conditionalDocumentId:e.id,conditionalDocumentStatus:this.state.conditionalSelection.includes(e.id),showConditionalChangeModal:!0})},i.a.createElement("i",{className:"fa fa-commenting"}),"\u015eartl\u0131 Onay Hakk\u0131 De\u011fi\u015ftir"),Object(y.N)(e.state,">=","MIME_SIGNED")&&Object(y.N)(e.state,"<","APPROVED_BY_EMPLOYEE")&&!Object(y.N)(e.state,"=","OBJECTION")&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({declineDocumentId:e.id,declineDocumentStatus:this.state.declineSelection.includes(e.id),showDeclineChangeModal:!0})},i.a.createElement("i",{className:"fa fa-commenting"}),"Reddet Hakk\u0131 De\u011fi\u015ftir"),e.employee&&e.employee.name&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({stateDetail:e})},i.a.createElement("i",{className:"fa fa-info-circle"}),"Durum Detay\u0131"),Object(y.N)(e.state,"<","PDF_SIGNED")&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,disabled:this.state.disabledDeleteBtn,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>{this.deleteRow(e)},onCancel:()=>this.setState({alert:null})},"\xdccret Bordrosu silinecek.")})},i.a.createElement("i",{className:"fa fa-close"}),"Sil"),(Object(y.N)(e.state,"=","INSERTED_TO_FLOW")||Object(y.N)(e.state,"=","FLOW_TIMEOUT"))&&i.a.createElement("a",{className:"dropdown-item",onClick:()=>this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,disabled:this.state.disabledCancelSendingBtn,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>{this.cancelSendingBordro(e)},onCancel:()=>this.setState({alert:null})},"Bordro G\xf6nderimi \u0130ptal Edilecek.")})},i.a.createElement("i",{className:"fa-solid fa-rectangle-xmark"}),"G\xf6nderimi \u0130ptal Et")))),this.props.isKepOwner&&i.a.createElement("div",{style:{textAlign:"left",webkitTextFillColor:"white"}},i.a.createElement("button",{title:"\xdccret Bordrosu G\xf6r\xfcnt\xfcle",className:"btn-icon btn btn-info btn-sm",style:{margin:"0px 3px"},onClick:t=>this.previewBordro(e)},i.a.createElement("i",{className:"now-ui-icons ui-1_zoom-bold"})),i.a.createElement("button",{title:"Al\u0131c\u0131 Bilgisi D\xfczenle",className:"btn-icon btn btn-success btn-sm",style:{margin:"0px 3px"},onClick:t=>this.setState({selected:e})},i.a.createElement("i",{className:"now-ui-icons ui-2_settings-90"})),Object(y.N)(e.state,"<","MIME_SIGNED")&&i.a.createElement("button",{title:"\xdccret Bordrosu Sil",className:"btn-icon btn btn-danger btn-sm",style:{margin:"0px 3px"},onClick:t=>{this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",disabled:this.state.disabledDeleteBtn,onConfirm:()=>this.deleteRow(e),onCancel:()=>this.setState({alert:null})},"\xdccret Bordrosu silinecek.")})}},i.a.createElement("i",{className:"now-ui-icons ui-1_simple-remove"}))))}],l=Object(y.I)(this,s,"accessor",this.props.isKepOwner);const c=[{label:"Ad\u0131",accessor:"employee_name",type:"text",operator:"="},{label:"Soyad\u0131",accessor:"employee_surname",type:"text",operator:"="},{label:"TCKN",accessor:"parsedTckn",type:"numericText",operator:"="},{label:"Durum",accessor:"state",type:"select",operator:"=",selectData:Object(y.O)(this.props.isKepOwner)},{label:"Departman\u0131",accessor:"employee_department_name",type:"text",operator:"="},{label:"G\xf6revi",accessor:"employee_jobTitle",type:"select",operator:"=",selectData:this.state.jobTitlesData},{label:"Cinsiyet",accessor:"employee_gender",type:"select",operator:"=",selectData:Object(y.v)()},{label:"\xc7al\u0131\u015fma \u015eekli",accessor:"employee_employmentStatus",type:"text",operator:"="},{label:"KEP Adresi",accessor:"employee_kepAddress",type:"text",operator:"="},{label:"e-Posta Adresi",accessor:"employee_email",type:"text",operator:"="},{label:"Telefon Numaras\u0131",accessor:"employee_telephone",type:"text",operator:"="},{label:"\xc7al\u0131\u015fan Durum",accessor:"employee_statusType",type:"select",operator:"=",selectData:Object(y.R)()},{label:"Lokasyon Bilgisi",accessor:"location",type:"text",operator:"="},{label:"Uyar\u0131 Say\u0131s\u0131",accessor:"warningCount",type:"numericText",operator:"="}];let u=Object(y.I)(this,c,"accessor",this.props.isKepOwner);return i.a.createElement("div",{className:"row",style:{paddingTop:"15px"}},this.state.treeData&&this.state.treeData.length>0&&i.a.createElement("div",{className:"col-xs-12 col-md-6",id:"departmentContainer",style:{padding:0},onClick:()=>this.detailedDepartment()},i.a.createElement(n.Col,{sm:12},i.a.createElement("div",{style:{textAlign:"center"},onChange:this.onAuthorizationWaysChange},i.a.createElement("input",{sm:6,type:"radio",value:h.c.DEPARTMENT,name:"authorizationWay",checked:this.state.selectedAuthorizationWay===h.c.DEPARTMENT})," Departman",i.a.createElement("input",{sm:6,type:"radio",value:h.c.EXPENDITURE,name:"authorizationWay",checked:this.state.selectedAuthorizationWay===h.c.EXPENDITURE,style:{marginLeft:20}})," Masraf Yeri")),i.a.createElement(n.Col,{id:"departmentHeader",style:{padding:0}},i.a.createElement("label",{id:"departmentHeaderContent"},"Daha Fazla G\xf6ster",i.a.createElement("span",{style:{marginLeft:"5px",fontSize:"14px"}},i.a.createElement("i",{className:"fas fa-chevron-down"})))),i.a.createElement(f.a,{treeData:this.state.treeData,selectedDepts:this.state.selectedDepts,selectedAuthorizationWay:this.state.selectedAuthorizationWay,loading:e=>this.setState({loading:e}),onSelect:e=>this.setState({selectedDepts:e,manual:!0}),changeOnConditionalList:e=>this.setState({conditionalSelection:e}),changeOnDeclineList:e=>this.setState({declineSelection:e})})),i.a.createElement("div",{className:this.state.treeData&&this.state.treeData.length>0?"col-xs-12 col-md-6":"col-xs-12 col-md-12"},i.a.createElement(d.a,{fields:u,loading:this.state.searching,onSearch:this.handleSearch})),i.a.createElement("div",{className:"col-xs-12 col-md-12"},i.a.createElement("div",{className:"row"},this.props.bordroSessionInfo&&this.props.bordroSessionInfo.unpairedCount>0&&i.a.createElement(n.Col,{sm:12},i.a.createElement(n.Input,{type:"checkbox",checked:this.state.showOnlyMissing,onChange:e=>{e.target.checked?this.setState({showOnlyMissing:e.target.checked,showOnlyDublicates:!1,selection:[],conditionalSelection:[],declineSelection:[],manual:!0}):this.setState({showOnlyMissing:e.target.checked,selection:[],conditionalSelection:[],declineSelection:[],manual:!0})}}),i.a.createElement(n.Label,null,"Sadece sahibi bulunamayan \xfccret bordrolar\u0131n\u0131 g\xf6ster")),this.props.bordroSessionInfo&&this.props.bordroSessionInfo.dublicatedCount>0&&i.a.createElement(n.Col,{sm:12},i.a.createElement(n.Input,{type:"checkbox",checked:this.state.showOnlyDublicates,onChange:e=>{e.target.checked?this.setState({showOnlyDublicates:e.target.checked,showOnlyMissing:!1,selection:[],conditionalSelection:[],declineSelection:[],manual:!0}):this.setState({showOnlyDublicates:e.target.checked,selection:[],conditionalSelection:[],declineSelection:[],manual:!0})}}),i.a.createElement(n.Label,null,"Sadece m\xfckerrer tckn olanlar\u0131 g\xf6ster")),i.a.createElement(n.Col,{sm:12},i.a.createElement(n.Input,{type:"checkbox",checked:this.state.showOnlySents,onChange:e=>{this.setState({showOnlySents:e.target.checked,manual:!0})}}),i.a.createElement(n.Label,null,"Sadece t\xfcm g\xf6nderilmi\u015f bordrolar\u0131 g\xf6ster")),this.state.loading&&i.a.createElement(n.Col,{sm:12,style:{display:"flex"}},i.a.createElement("div",{style:{marginRight:"10px"}},"Kay\u0131tlar getiriliyor"),i.a.createElement("div",null,i.a.createElement("i",{className:"fa fa-spinner fa-spin"})))),i.a.createElement("div",{className:"row"},i.a.createElement(r.a,{columns:l,content:this.state.content,loading:this.state.loading||this.props.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchData}))),this.state.stateDetail&&i.a.createElement(E.a,{detail:this.state.stateDetail,documentType:"Bordro",toggle:()=>this.setState({stateDetail:void 0})}),i.a.createElement(L,{bordro:this.state.selected,toggle:()=>this.setState({selected:void 0}),onBordroUpdated:()=>this.setState({manual:!0})}),this.state.mediaModal&&i.a.createElement(j.a,{modal:this.state.mediaModal,url:this.state.url,title:"Bordro",closeModal:this.setMediaViewer,downloadContent:this.downloadContent,temporaryRow:this.state.temporaryRow,showDownloadButton:this.state.showDownloadButton}),this.state.showConditionalChangeModal&&i.a.createElement(Y,{modal:this.state.showConditionalChangeModal,status:this.state.conditionalDocumentStatus,list:this.state.conditionalSelection,sessionId:this.props.bordroSession.id,id:this.state.conditionalDocumentId,toggleModal:(e,t)=>this.setState({showConditionalChangeModal:e},()=>{t&&this.props.load()})}),this.state.showDeclineChangeModal&&i.a.createElement(_,{modal:this.state.showDeclineChangeModal,status:this.state.declineDocumentStatus,list:this.state.declineSelection,sessionId:this.props.bordroSession.id,id:this.state.declineDocumentId,toggleModal:(e,t)=>this.setState({showDeclineChangeModal:e},()=>{t&&this.props.load()})}),this.state.showModal&&i.a.createElement(O.a,{id:this.state.employeeId,tckn:this.state.tckn,modal:this.state.showModal,titleList:this.state.titleList,hasGrant:this.props.hasGrant,sidebarMenus:this.props.sidebarMenus,isKepOwner:this.props.isKepOwner,toggleModal:(e,t)=>this.setState({showModal:e},()=>{t&&this.props.load()})}),this.state.alert)}}var U=H,V=a(4);class W extends s.Component{constructor(){super(),this.state={loading:!0,fileCount:0},this.load=this.load.bind(this),this.downloadSessionFile=this.downloadSessionFile.bind(this)}componentDidMount(){this.load()}load(){if(this.props.bordroSession&&this.props.bordroSession.id){let e=this,t={url:"/bordrofile/readBordroFileAll",method:"post",data:this.props.bordroSession.id};e.setState({loading:!0}),Object(u.e)(t).then((function(t){e.setState({fileList:t.data,fileCount:t.data&&t.data.length?t.data.length:0,loading:!1})})).catch((function(t){Object(h.v)(t),e.setState({loading:!1})}))}}downloadSessionFile(e){let t=this,a={url:"/bordrofile/downloadBordroFile",responseType:"arraybuffer",method:"post",data:e.id};t.setState({loading:!0}),Object(u.e)(a).then((function(a){let s=new Blob([a.data],{type:"application/pdf"}),i=document.createElement("a");i.href=window.URL.createObjectURL(s),i.download=e.loadName,document.body.appendChild(i),i.click(),t.setState({loading:!1})})).catch((function(e){Object(h.v)(e),t.setState({loading:!1})}))}render(){let e=this.state.fileList,t=[{Header:"Dosya T\xfcr\xfc",accessor:"bulkBordroType"},{Header:"Dosya ad\u0131",accessor:"loadName"},{Header:"Y\xfckleme Zaman\u0131",accessor:"createdAt",Cell:e=>i.a.createElement("div",null,m()(e.createdAt).isValid()?m()(e.createdAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"Hata Durumu",accessor:"error"},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:e=>i.a.createElement("div",{style:{textAlign:"left"}},(void 0===e.error||null===e.error)&&Object(h.f)(this,V.p)&&i.a.createElement("button",{title:"Dosyay\u0131 \u0130ndir",className:"btn-icon btn btn-linkedin btn-sm",style:{margin:"0px 3px"},onClick:t=>{this.downloadSessionFile(e)}},i.a.createElement("i",{className:"BtnIcon fa fa-download"})))}];return i.a.createElement(n.Container,null,i.a.createElement("div",null,i.a.createElement(r.a,{columns:t,content:e||[],loading:this.state.loading,total:this.state.fileCount,page:0,manual:this.state.manual,size:20})))}}var K=W,J=a(21),Q=a(1376),Z=a(176),q=a(52),X=a(178);class $ extends s.Component{constructor(e){super(e),this.saveClicked=()=>{let e=this,t={url:"/bordrosession/updateLocation",method:"post",data:{location:this.state.location,sessionId:this.props.sessionId}};e.setState({disableBtn:!0,alert:null}),Object(u.e)(t).then((function(t){e.setState({disableBtn:!1}),e.props.toggleModal(!1,!0)})).catch((function(t){Object(h.v)(t),e.setState({disableBtn:!1})}))},this.state={location:"",disableBtn:!1}}componentDidMount(){this.setState({location:this.props.location})}render(){return i.a.createElement(z.a,{isOpen:this.props.modal,size:"sm",closeOnEsc:!1,title:"Lokasyon Bilgisi D\xfczenle",confirmBtnText:"Kaydet",cancelBtnText:"Kapat",disabled:this.state.disableBtn,onConfirm:()=>this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>this.saveClicked(),onCancel:()=>this.setState({alert:null}),style:{top:"100%"}},"Lokasyon bilgisi de\u011fi\u015ftirilecektir.")}),onCancel:()=>this.props.toggleModal(!1,!1)},i.a.createElement(I.a,null,i.a.createElement(n.FormGroup,{row:!0},i.a.createElement(n.Label,{sm:6},"Lokasyon: "),i.a.createElement(n.Col,{sm:6},i.a.createElement(n.Input,{type:"text",name:"location",id:"location",value:this.state.location,onChange:e=>this.setState({location:e.target?e.target.value:""})}),this.state.alert))))}}var ee=$,te=a(1340),ae=a(61),se=a.n(ae),ie=a(430),ne=a(55),le=a.n(ne);class oe extends s.Component{constructor(e){super(e),this.createCustomFields=e=>{let t="";if(e.length){let a=e.toString().split("&");e="",a.map(a=>{a.length&&(a.includes("cstmfld")?t=t+(t.length?"#":"")+a.replace("cstmfld",""):e=e+"&"+a)})}return[e,t]},this.zipAndUploadFiles=()=>{let e=this,t=e.state.fileList;const s=a(1357)();t.forEach(e=>{s.file(e.name,e.content)}),s.generateAsync({type:"arrayBuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(a=>{let s={content:new File([new Blob([a],{type:"application/zip"})],"yuklenenDokumanlar.zip",{type:"application/zip",lastModified:Date.now()}),name:"zipFile.zip",size:1};t=[],t.push(s);let i=new FormData;i.append("content",s.content),i.append("id",e.props.id?e.props.id:e.state.id),i.append("totalCount",1),i.append("employeeUserIds",e.state.selection);let n={url:"/bordrosession/sendBordroFiles",method:"post",cancelToken:e._source.token,data:i};t[0]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:s.name,size:s.size,content:s.content},e.setState({btnDisabled:!0,fileList:t}),Object(u.e)(n).then((function(a){let s=t[0];t[0]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:s.name,size:s.size,content:s.content},e.setState({fileList:t,id:a.data,btnDisabled:!1}),e.props.toggleModal(!0,!0),e.props.newSession&&(e.props.toggleModal(!1,!0),e.props.history.push("/".concat(e.props.peykName,"/bordroimport/").concat(e.state.id)),e.props.loadBordroSession())})).catch((function(a){se.a.isCancel(a)||(s.status="error",s.statusText=a.data,t[0]={status:"error",statusText:a.data,name:s.name,size:s.size,content:s.content},e.setState({fileList:t,btnDisabled:!1}),Object(h.v)(a))}))})},this.state={selection:[],selectedAll:!1,loading:!1,manual:!1,content:[],total:0,searching:!1,searchQuery:void 0,page:0,size:5,titleFilterList:[],fileList:[],index:0,process:!1,realIndex:0,year:null,month:null,disableZone:!1,steps:[{target:".modal-content",content:"\xc7al\u0131\u015fanlar\u0131n\u0131za \xfccret bordrosu g\xf6nderimi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olarak y\xfckleme yap\u0131n\u0131z.",placement:"center"},{target:".form-control",content:"Bordro d\xf6nemini buradan se\xe7ebilirsiniz.",placement:"auto"},{target:".dropzoneInnerArea",content:"\xdccret bordrolar\u0131n\u0131z\u0131 s\xfcr\xfckle-b\u0131rak veya bu alana t\u0131klayarak y\xfckleyebilirsiniz.",placement:"auto"},{target:".kaydet",content:"D\xf6nem ve y\xfcklenecek dosyalar se\xe7ildikten sonra y\xfcklemeyi ba\u015flatabilirsiniz.",placement:"auto"}],steps2:[{target:".modal-content",content:"Se\xe7ilen bordro d\xf6nemine dosya eklemesi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olarak y\xfckleme yap\u0131n\u0131z.",placement:"center"},{target:".dropzoneInnerArea",content:"\xdccret bordrolar\u0131n\u0131z\u0131 s\xfcr\xfckle-b\u0131rak veya bu alana t\u0131klayarak y\xfckleyebilirsiniz.",placement:"auto"},{target:".kaydet",content:"Y\xfcklenecek dosyalar se\xe7ildikten sonra y\xfcklemeyi ba\u015flatabilirsiniz.",placement:"auto"}],locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla"},joyrideActive:!1,shouldRun:!0},this.onDrop=this.onDrop.bind(this),this.callback=this.callback.bind(this),this.onCancel=this.onCancel.bind(this),this.changeLocation=this.changeLocation.bind(this),this.sendNextBordroFile=this.sendNextBordroFile.bind(this),this.handleSearch=this.handleSearch.bind(this),this.searchWithKey=this.searchWithKey.bind(this),this.fetchData=this.fetchData.bind(this),this.setSelectedDepts=this.setSelectedDepts.bind(this),this.toggleCheckboxChange=this.toggleCheckboxChange.bind(this)}toggleCheckboxChange(e,t,a){let s=this,i=e.target.checked,n=s.state.content,l=s.state.selection;if("all"===t){let e=[];i&&n.forEach(t=>{e.push(t[a])}),s.setState({selection:e,selectedAll:i})}else{let e=l.indexOf(t[a]);e>=0?l=[...l.slice(0,e),...l.slice(e+1)]:l.push(t[a]),s.setState({selection:l,selectedAll:l.length>0&&l.length===s.state.content.length})}}isSelected(e){return this.props.selectedList&&-1!==this.props.selectedList.indexOf(e)||this.state.selection&&-1!==this.state.selection.indexOf(e)}getTrStyles(e){return{}}setSelectedDepts(e){let t=this,a=t.state.selectedDepts;return a&&Object.keys(a).map(s=>{a[s]&&(e=t.state.selectedAuthorizationWay===h.c.EXPENDITURE?e+"&expenditureDepartment_id="+s:e+"&department_id="+s)}),e}fetchData(e,t,a,s){let i=this,n=void 0!==e?"&sort="+e+","+t:"",l=i.state.searchQuery?"&"+i.state.searchQuery:"",o=i.createCustomFields(l),r="?page="+a+"&size="+s+o[0]+n+"&customFields="+o[1];r=i.setSelectedDepts(r);let d={url:"/employee/readActiveEmployeeAll"+r,method:"get"};i.setState({loading:!0,searching:!0,manual:!0!==i.manual&&i.manual}),Object(u.e)(d).then((function(e){i.setState({page:a,size:s,total:e.data&&e.data.page?e.data.page.totalElements:0,content:e.data&&e.data.page?e.data.page.content:[],totalIdList:e.data?e.data.selectedIdList:[],loading:!1,searching:!1})})).catch((function(e){i.setState({loading:!1,searching:!1}),Object(h.v)(e)}))}searchWithKey(e){this.setState({searchKey:e.target.value,manual:!0})}handleSearch(e){this.setState({searchQuery:e,searching:!0},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}componentDidUpdate(e,t,a){!0===this.props.removeMonth&&this.state.sessionMonth&&(this.setState({sessionMonth:null}),this.props.setRemoveMonthOff())}sendNextBordroFile(e,t,a){if(this.props.newSession&&!m()(this.state.sessionMonth,"YYYY/MM",!0).isValid())Object(h.v)({message:"\xdccret Bordrosu D\xf6nemi alan\u0131na YYYY/AA format\u0131nda ge\xe7erli bir de\u011fer giriniz."});else{let s=this;this._source=se.a.CancelToken.source();let i,n=s.state.fileList;if(i=0===a?n.length:a,e<n.length){let a=n[e];if(a.size<78643200){let l=new FormData;l.append("content",a.content),l.append("id",s.props.id?s.props.id:s.state.id),l.append("totalCount",i),l.append("employeeUserIds",s.state.selection);let o={url:"/bordrosession/sendBordroFiles",method:"post",cancelToken:s._source.token,data:l};n[e]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:a.name,size:a.size,content:a.content},s.setState({btnDisabled:!0,fileList:n}),Object(u.e)(o).then((function(a){let l=n[e];n[e]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:l.name,size:l.size,content:l.content},s.setState({fileList:n,index:e+1}),t&&s.setState({id:a.data}),e+1<n.length?(e+1)%5===0?(n.splice(0,4),s.setState({realIndex:s.state.realIndex+4}),s.sendNextBordroFile(e+1-4,!1,i)):s.sendNextBordroFile(e+1,!1,i):(s.setState({btnDisabled:!1,index:e+1}),s.props.newSession?(s.props.toggleModal(!1,!0),s.props.history.push("/".concat(s.props.peykName,"/bordroimport/").concat(s.state.id)),s.props.loadBordroSession()):"success"===n[e].status&&s.props.toggleModalWithTimeout(!1,!0))})).catch((function(t){se.a.isCancel(t)||(a.status="error",a.statusText=t.data,n[e]={status:"error",statusText:t.data,name:a.name,size:a.size,content:a.content},s.setState({fileList:n,btnDisabled:!1}),Object(h.v)(t))}))}else b.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3})}else b.a.success("T\xfcm dok\xfcmanlar kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3})}}onCancel(){this._source&&this._source.cancel(),this.state.index>0?this.props.toggleModal(!1,!0):this.props.toggleModal(!1,!1)}onDrop(e,t){let a=this;if(e){a.setState({processing:!0,uploadBtnDisabled:!0,fileList:[]});let t=[];for(let a=0;a<e.length;a++)t.push({content:e[a],name:e[a].name,size:e[a].size});a.setState({processing:!1,uploadBtnDisabled:!1,fileList:t,index:0,realIndex:0})}}getStatusRender(e){let t="processing"===e?"spinner fa-spin":"success"===e?"check":"error"===e?"close":"pause",a="processing"===e?"dark":"success"===e?"green":"error"===e?"red":"dark";return i.a.createElement("i",{className:"fas fa-"+t,style:{color:a,paddingRight:"4px"}})}activateJoyride(){!1===this.state.joyrideActive&&this.setState({joyrideActive:!0})}callback(e){"close"===e.action&&"step:after"===e.type&&this.setState({shouldRun:!1}),"stop"!==e.action&&"reset"!==e.action&&"skip"!==e.action||(this.setState({shouldRun:!0}),this.setState({joyrideActive:!1}),this.activateJoyride())}changeLocation(e){this.setState({location:e.target.value})}render(){let e=this.props&&this.props.newSession?this.state.steps:this.state.steps2,t=this.state.locale,a=[],s=[],l=[];this.state.content&&this.state.content instanceof Array&&this.state.content.map(e=>{e.name&&"ACTIVE"!==e.statusType||a.push(e.id),l.includes(e.tckn)?s.includes(e.tckn)||s.push(e.tckn):l.push(e.tckn)});const o=[{label:"\u0130sim",accessor:"name",type:"text",operator:"="},{label:"TCKN",accessor:"tckn",type:"numericText",operator:"="},{label:"Soyisim",accessor:"surname",type:"text",operator:"="},{label:"Departman",accessor:"department_name",type:"text",operator:"="},{label:"G\xf6rev",accessor:"jobTitle",type:"select",operator:"=",selectData:this.state.jobTitlesData},{label:"Cinsiyet",accessor:"gender",type:"select",operator:"=",selectData:Object(y.v)()},{label:"\u0130\u015fe Ba\u015flama Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_employmentStartDate",type:"date",operator:">="},{label:"\u0130\u015fe Ba\u015flama Tarihi (Biti\u015f)",accessor:"max_employmentStartDate",type:"date",operator:"<="},{label:"\xc7al\u0131\u015fma \u015eekli",accessor:"employmentStatus",type:"text",operator:"="},{label:"Adres",accessor:"address",type:"text",operator:"="},{label:"E\u011fitim Durumu",accessor:"educationLevel",type:"text",operator:"="},{label:"Askerlik Durumu",accessor:"militaryStatus",type:"text",operator:"="},{label:"Do\u011fum Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_dateOfBirth",type:"date",operator:">="},{label:"Do\u011fum Tarihi (Biti\u015f)",accessor:"max_dateOfBirth",type:"date",operator:"<="},{label:"Do\u011fum Yeri",accessor:"cityOfBirth",type:"text",operator:"="}];let c=[{Header:i.a.createElement(p.a,{selectionIdList:this.state.selection,totalIdList:this.state.totalIdList,pageIdList:a,onChange:e=>this.setState({selection:e})}),accessor:"id",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.content&&i.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),disabled:this.props.selectedList&&-1!==this.props.selectedList.indexOf(e.id),onChange:a=>this.toggleCheckboxChange(a,e,"id",t)})},{Header:"Ad",accessor:"name",Cell:e=>i.a.createElement("div",{style:{margin:0}},i.a.createElement(F.a,{text:e.name,maxLength:15}))},{Header:"Soyad",accessor:"surname",Cell:e=>i.a.createElement("div",{style:{margin:0}},i.a.createElement(F.a,{text:e.surname,maxLength:15}))},{Header:"Departman",accessor:"department",Cell:e=>i.a.createElement("div",{style:{margin:0}},e.department&&i.a.createElement(F.a,{text:e.department.name,maxLength:15}))},{Header:"G\xf6rev",accessor:"jobTitle",Cell:e=>i.a.createElement("div",{style:{margin:0}},i.a.createElement(F.a,{text:e.jobTitle,maxLength:15}))},{Header:"TCKN",accessor:"tckn"},{Header:"Departman",accessor:"expenditureDepartment",Cell:e=>i.a.createElement("div",{style:{margin:0}},e.department&&i.a.createElement(F.a,{text:e.department.name,maxLength:15}))},{Header:"Durum",accessor:"statusType",Cell:e=>i.a.createElement("div",null,i.a.createElement("span",null,Object(y.R)().map((function(t){if(t.value===e.statusType)return t.label}))))}],m=Object(y.G)(this,c,"accessor"),h=Object(y.G)(this,o,"accessor");return Object(y.g)(this.state.titleFilterList,o),i.a.createElement(z.a,{isOpen:this.props.modal,disabled:this.state.btnDisabled||this.state.fileList&&0===this.state.fileList.length||this.state.selection&&0===this.state.selection.length||this.props.newSession&&!this.state.sessionMonth,title:"\xdccret Dosyalar\u0131n\u0131 Y\xfckleme",size:"lg",modalBodyStyle:{padding:"0",minHeight:"500px"},secondaryButton:i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()},style:{position:"absolute",right:"70px",alignSelf:"center",marginTop:"-5px"}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon",style:{opacity:".5"}})),confirmBtnText:"Dok\xfcman(lar)\u0131 Y\xfckle",cancelBtnText:"Kapat",onConfirm:e=>this.sendNextBordroFile(this.state.index,!0,0),onCancel:e=>this.props.toggleModal(!1,!1)},i.a.createElement(n.Row,null,this.state.joyrideActive&&i.a.createElement(Z.a,{disableBeacon:!0,autoStart:!0,locale:t,steps:e,continuous:!0,run:this.state.shouldRun,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,scrollToSteps:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClicks:!1,keyboardNavigation:!0,hideBackButton:!1,disableOverlayClose:!0,callback:this.callback,holePadding:0,shouldRun:this.state.shouldRun,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}}),this.props.newSession&&i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"15px"}},i.a.createElement("div",{className:"col-sm-4"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-4"},"D\xf6nem"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(le.a,{timeFormat:!1,dateFormat:"YYYY-MM",closeOnSelect:!0,inputProps:{placeholder:"YIL/AY"},value:this.state.sessionMonth,renderMonth:this.props.renderMonth,isValidDate:function(e){return e.startOf("month").isSameOrBefore(le.a.moment().startOf("month"))},onChange:e=>{this.setState({sessionMonth:e}),this.props.onMonthChange(e)}}))),i.a.createElement("div",{className:"col-sm-2"})),this.props.newSession&&i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"15px"}},i.a.createElement("div",{className:"col-sm-4"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-4"},"Lokasyon"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(n.Input,{type:"text",name:"location",value:this.state.location,onChange:this.changeLocation}))),i.a.createElement("div",{className:"col-sm-2"})),i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"15px",paddingRight:"32px",paddingLeft:"32px"}},i.a.createElement(ie.a,{accept:".pdf",activeClassName:"dropzoneActiveClass",className:"FormRenk col-sm-12",multiple:!0,disabled:this.state.btnDisabled,onDrop:this.onDrop},i.a.createElement("div",{className:"dropzoneInnerArea"},"\xdccret dosyalar\u0131n\u0131 (.pdf) y\xfckleyiniz.")))),i.a.createElement(n.Row,null,i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"0px",paddingRight:"15px",paddingLeft:"15px",maxHeight:"500px",overflow:"auto"}},i.a.createElement("table",{className:"",style:{textAlign:"center",paddingBottom:"5px"}},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"#ebedf0"}},i.a.createElement("th",{width:"5%"},"#"),i.a.createElement("th",null,"Dosya Ad\u0131"),i.a.createElement("th",null,"Dosya Boyutu"),i.a.createElement("th",null,"Durum"))),i.a.createElement("tbody",null,this.state.fileList&&this.state.fileList.map((e,t)=>i.a.createElement("tr",{key:t+"_"+e.name+"_"+e.size},i.a.createElement("td",null,t+1),i.a.createElement("td",{style:{margin:"0px",textAlign:"left"}},i.a.createElement(F.a,{text:e.name||"-",maxLength:30})),i.a.createElement("td",{style:{margin:"0px"}},new te.Decimal(new te.Decimal(e.size/1024/1024).toFixed(2)).toNumber()+" MB"),i.a.createElement("td",{style:{margin:"0px"}},this.getStatusRender(e.status),e.statusText||"G\xf6nderim bekliyor"))),!this.state.processing&&this.state.fileList&&0===this.state.fileList.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Kay\u0131t bulunamad\u0131")),this.state.processing&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Dok\xfcman i\u015fleniyor..."))))),i.a.createElement(n.Col,{sm:"12"},i.a.createElement("p",{style:{float:"right"}},"Toplam Adet: ",this.state.fileList?this.state.fileList.length:0))),i.a.createElement(n.Row,null,i.a.createElement(n.Col,{sm:"12"},i.a.createElement(d.a,{fields:h,loading:this.state.loading,onSearch:this.handleSearch}))),i.a.createElement(n.Row,null,i.a.createElement(n.Col,{sm:"12"},i.a.createElement("div",{className:"col-xs-12",style:{marginTop:"20px"}},i.a.createElement(r.a,{columns:m,content:this.state.content,loading:this.state.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData,getTrStyles:this.getTrStyles})))))}}var re=oe;class de extends s.Component{constructor(e){super(e),this.videos=[{title:"\xdccret bordrosunu nas\u0131l y\xfcklerim?",id:"lTjRaQZI4_Y"}],this.videos2=[{title:"Nas\u0131l dosya y\xfckleyebilirim?",id:"lTjRaQZI4_Y"},{title:"Belge g\xf6nderimini nas\u0131l yapar\u0131m?",id:"zGgh_nCEWAI"},{title:"'Tekrar G\xf6nder' ne i\u015fe yarar?",id:"KRUBAJDI04A"},{title:"Belgelerimin g\xf6nderim durumunu nas\u0131l g\xf6r\xfcnt\xfclerim?",id:"vRaOsVQZUfE"}],this.switchVideo=e=>{this.setState({video:e,showEczaciHelpModal:!0})},this.updateDimensions=()=>{this.setState({width:window.innerWidth})},this.deleteBordro=()=>{this.state.selection.length>0?this.deleteList(this.state.selection,"disabledDeleteBtn"):b.a.warning("\u015ee\xe7ilmi\u015f olan bir bordro yoktur, L\xfctfen bordro se\xe7iniz.",{position:"top-right",effect:"stackslide",timeout:5e3})&&this.setState({alert:null})},this.deleteList=(e,t)=>{let a=this,s={url:"/bordro/deleteBordroList",method:"post",data:e};a.setState({[t]:!0,alert:null}),Object(u.e)(s).then((function(e){e.data;a.setState({selection:[],selectedAll:!1,manual:!0,[t]:!1,alert:null}),b.a.success(e.data,{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){Object(h.v)(e),a.setState({[t]:!1})}))},this.zipAndUploadFiles=()=>{let e=this,t=e.state.fileList;const s=a(1357)();t.forEach(e=>{s.file(e.name,e.content)}),s.generateAsync({type:"arrayBuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(a=>{let s={content:new File([new Blob([a],{type:"application/zip"})],"yuklenenDokumanlar.zip",{type:"application/zip",lastModified:Date.now()}),name:"zipFile.zip",size:1};t=[],t.push(s);let i,n=new FormData;this.state.sessionToBeCreatedn?(n.append("content",s.content),n.append("year",e.state.sessionMonth.year().toString()),n.append("month",(e.state.sessionMonth.month()+1).toString()),n.append("totalCount",1),n.append("location",e.state.location?e.state.location:""),i="/create"):(n.append("content",s.content),n.append("id",e.props.id?e.props.id:e.state.id),n.append("totalCount",1),i="/sendNextBordroFile");let l={url:"/bordrosession".concat(i),method:"post",cancelToken:e._source.token,data:n};t[0]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:s.name,size:s.size,content:s.content},e.setState({btnDisabled:!0,fileList:t}),Object(u.e)(l).then((function(a){let s=t[0];t[0]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:s.name,size:s.size,content:s.content},e.setState({fileList:t,id:a.data,btnDisabled:!1}),e.props.toggleModal(!0,!0),this.state.sessionToBeCreated&&(e.props.toggleModal(!1,!0),e.props.history.push("/".concat(e.props.peykName,"/bordroimport/").concat(e.state.id)),e.props.loadBordroSession())})).catch((function(a){se.a.isCancel(a)||(s.status="error",s.statusText=a.data,t[0]={status:"error",statusText:a.data,name:s.name,size:s.size,content:s.content},e.setState({fileList:t,btnDisabled:!1}),Object(h.v)(a))}))})},this.sendNextBordroFile=(e,t,a)=>{if(this.state.sessionToBeCreated&&!m()(this.state.sessionMonth,"YYYY/MM",!0).isValid())Object(h.v)({message:"\xdccret Bordrosu D\xf6nemi alan\u0131na YYYY/AA format\u0131nda ge\xe7erli bir de\u011fer giriniz."});else{let s=this;this._source=se.a.CancelToken.source();let i,n=s.state.fileList;i=0===a?n.length:a;let l=!0,o=!0;for(let e=0;e<i;e++){let t=n[e].name;t.toLowerCase().endsWith(".pdf")||(l=!1),t.toLowerCase().endsWith(".xlsx")||(o=!1)}if(i>1&&l){let e=0;if(n.forEach(t=>{e+=t.size}),e<78643200){let e=new FormData;n.forEach(t=>{e.append("files",t.content)}),s.props.id?e.append("id",s.props.id?s.props.id:s.state.id):(e.append("year",this.state.sessionMonth.year().toString()),e.append("month",(this.state.sessionMonth.month()+1).toString()),e.append("location",s.state.location?s.state.location:""));let a={url:"/bordrosession".concat("/createOrSendNextBordroFile"),method:"post",cancelToken:s._source.token,data:e};n.forEach((e,t)=>{n[t]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:e.name,size:e.size,content:e.content}}),s.setState({btnDisabled:!0,fileList:n}),this.timerStatus(!0),Object(u.e)(a).then((function(e){n.forEach((e,t)=>{n[t]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:e.name,size:e.size,content:e.content}}),s.setState({fileList:n}),t&&s.setState({id:e.data}),s.setState({btnDisabled:!1}),s.props.history.push("/".concat(s.props.peykName,"/bordroimport/").concat(e.data)),s.load()})).catch((function(e){se.a.isCancel(e)||(n.forEach((t,a)=>{t.status="error",t.statusText=e.data,n[a]={status:"error",statusText:e.data,name:t.name,size:t.size,content:t.content}}),s.setState({fileList:n,btnDisabled:!1}),Object(h.v)(e),this.timerStatus(!1))}))}else b.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1)}else if(i>1&&!l&&o)b.a.warning(".xlsx olarak sadece bir dosya y\xfcklenebilir.",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1);else if(i>1&&!l&&!o)b.a.warning(".pdf ve .xlsx dosyalar\u0131 birlikte y\xfcklenemez.",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1);else if(e<n.length){let a=n[e];if(a.size<78643200){let l,o=new FormData;this.state.sessionToBeCreated&&t?(o.append("content",a.content),o.append("year",this.state.sessionMonth.year().toString()),o.append("month",(this.state.sessionMonth.month()+1).toString()),o.append("totalCount",i),o.append("location",s.state.location?s.state.location:""),l="/create"):(o.append("content",a.content),o.append("id",s.props.id?s.props.id:s.state.id),o.append("totalCount",i),l="/sendNextBordroFile");let r={url:"/bordrosession".concat(l),method:"post",cancelToken:s._source.token,data:o};n[e]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:a.name,size:a.size,content:a.content},s.setState({btnDisabled:!0,fileList:n}),this.timerStatus(!0),Object(u.e)(r).then((function(a){let l=n[e];n[e]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:l.name,size:l.size,content:l.content},s.setState({fileList:n,index:e+1}),t&&s.setState({id:a.data}),e+1<n.length?(e+1)%5===0?(n.splice(0,4),s.setState({realIndex:s.state.realIndex+4}),s.sendNextBordroFile(e+1-4,!1,i)):s.sendNextBordroFile(e+1,!1,i):(s.setState({btnDisabled:!1,index:e+1}),s.state.sessionToBeCreated?(s.props.history.push("/".concat(s.props.peykName,"/bordroimport/").concat(s.state.id)),s.load()):"success"===n[e].status&&s.props.toggleModalWithTimeout(!1,!0))})).catch((function(t){se.a.isCancel(t)||(a.status="error",a.statusText=t.data,n[e]={status:"error",statusText:t.data,name:a.name,size:a.size,content:a.content},s.setState({fileList:n,btnDisabled:!1}),Object(h.v)(t),this.timerStatus(!1))}))}else b.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1)}else b.a.success("T\xfcm dok\xfcmanlar kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1)}},this.hasGrant=e=>this.props.hasGrant(e),this.getSignStatistics=(e,t,a)=>{let s=this;if(void 0!==t&&void 0!==a)this.showAlertMessage(s,t,a);else{let t={url:"/bordrosession/signStatistic?id="+e,method:"get"};s.setState({loading:!0}),Object(u.e)(t).then((function(e){let t={},a=e.data;t.success=a.filter(e=>Object(y.N)(e,">=","PDF_SIGNED")).length,t.fail=a.filter(e=>Object(y.N)(e,"<","PDF_SIGNED")).length,s.setState({signStatistic:t}),s.showAlertMessage(s,void 0,void 0)})).catch((function(e){s.setState({loading:!1}),Object(h.v)(e)}))}},this.arrangeDataSet=e=>{let t={sheetName:"D\xf6nem_Se\xe7ilmi\u015f_Bordrolar"};return t.uuid=Object(h.h)(),t.list=e,t.type="zip",t},this.isNotEminEczanesi=()=>!!this.props.currentUser&&!!this.props.currentUser.vknTckn&&"3470304270"!==this.props.currentUser.vknTckn,this.state=de.newCleanState(),this.onDrop=this.onDrop.bind(this),this.callback=this.callback.bind(this),this.onCancel=this.onCancel.bind(this),this.changeLocation=this.changeLocation.bind(this),this.sendNextBordroFile=this.sendNextBordroFile.bind(this),this.load=this.load.bind(this),this.sign=this.sign.bind(this),this.manualPdfSign=this.manualPdfSign.bind(this),this.showWarning=this.showWarning.bind(this),this.renderMonth=this.renderMonth.bind(this),this.deleteClicked=this.deleteClicked.bind(this),this.downloadMedia=this.downloadMedia.bind(this),this.downloadExcel=this.downloadExcel.bind(this),this.uploadBordroFile=this.uploadBordroFile.bind(this),this.uploadBordroFileWithoutTckn=this.uploadBordroFileWithoutTckn.bind(this),this.waitIfMimeSending=this.waitIfMimeSending.bind(this),this.addSelectionToState=this.addSelectionToState.bind(this),this.uploadBordroSessionFile=this.uploadBordroSessionFile.bind(this),this.checkSessionMonthIsUsed=this.checkSessionMonthIsUsed.bind(this),this.readBordroSessionDateAll=this.readBordroSessionDateAll.bind(this),this.refreshBordroSessionInfo=this.refreshBordroSessionInfo.bind(this),this.sessionAndEmployeeListChecker=this.sessionAndEmployeeListChecker.bind(this),this.refreshBordroSessionDublicateInfo=this.refreshBordroSessionDublicateInfo.bind(this),this.callback=this.callback.bind(this),this.checkCustomerSmsCreditAndSent=this.checkCustomerSmsCreditAndSent.bind(this),this.checkCustomerSmsCreditAndSentManuel=this.checkCustomerSmsCreditAndSentManuel.bind(this)}checkCustomerSmsCreditAndSent(){let e=this,t={url:"/bordro/checkCustomerSmsCredit",method:"post",data:e.state.selection};Object(u.e)(t).then((function(t){e.isNotEminEczanesi()?e.sign():e.manualPdfSign(),(!e.state.selection||e.state.selection<=0)&&e.showWarning("\u0130letilerinin olu\u015fturulup imzalanmas\u0131 istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")})).catch((function(e){Object(h.v)(e)}))}checkCustomerSmsCreditAndSentManuel(){let e=this,t={url:"/bordro/checkCustomerSmsCredit",method:"post",data:e.state.bordroSession.id};Object(u.e)(t).then((function(t){e.manualPdfSign(),(!e.state.selection||e.state.selection<=0)&&e.showWarning("\u0130letilerinin olu\u015fturulup imzalanmas\u0131 istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")})).catch((function(e){Object(h.v)(e)}))}static newCleanState(){return{monthlyBordros:null,removeMonth:!1,bordroSession:null,loading:!1,sessionToBeCreated:!0,isMimeSending:!1,isPdfsParsing:!1,bordroSessionInfo:{totalCount:0,sentCount:0,signedCount:0,unpairedCount:0,dublicatedCount:0,locaton:""},manual:!1,selection:[],conditionalList:[],declineList:[],totalPdfCountIdList:[],isHsmOwner:!1,isKepOwner:!1,alert:null,index:0,location:"",steps:[{target:".content",content:"\xc7al\u0131\u015fanlar\u0131n\u0131za \xfccret bordrosu g\xf6nderimi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olarak y\xfckleme yap\u0131n\u0131z.",placement:"center"},{target:".form-control",content:"Bordro d\xf6nemini buradan se\xe7ebilirsiniz.",placement:"auto"},{target:".dropzoneInnerArea",content:"\xdccret bordrolar\u0131n\u0131z\u0131 s\xfcr\xfckle-b\u0131rak veya bu alana t\u0131klayarak y\xfckleyebilirsiniz.",placement:"auto"},{target:".kaydet",content:"D\xf6nem ve y\xfcklenecek dosyalar se\xe7ildikten sonra y\xfcklemeyi ba\u015flatabilirsiniz.",placement:"auto"}],steps2:[{target:".FormRenk",content:'"\xdccret Bordrosu D\xf6nem \u0130\u015flemi" sayfas\u0131nda bordro g\xf6nderim i\u015flemleri y\xfcr\xfct\xfcl\xfcr.',placement:"center"},{target:".Gonder",content:"Se\xe7ti\u011finiz bordrolar\u0131n imzalan\u0131p g\xf6nderilmesi buradan sa\u011flan\u0131r.",placement:"auto"},{target:".Yenile",content:"Bordrolar\u0131n\u0131z\u0131n son g\xf6nderim durumlar\u0131n\u0131 g\xf6rmek i\xe7in t\u0131klayabilirsiniz. ",placement:"auto"},{target:".show #left-dropdown-menu:nth-child(1)",content:"D\xf6nem i\u015flemine daha fazla dosya eklemek i\xe7in buraya t\u0131klabilirsiniz.",placement:"auto"},{target:".show #left-dropdown-menu:nth-child(2)",content:"Hen\xfcz onaylanmam\u0131\u015f ve beklemede olan bordrolar\u0131n\u0131z i\xe7in al\u0131c\u0131lara uyar\u0131 iletisi g\xf6nderebilirsiniz.",placement:"auto"},{target:".show #left-dropdown-menu:nth-child(3)",content:"T\xfcm dok\xfcmananlar\u0131 zip dosyas\u0131 halinde bilgisayar\u0131n\u0131za indirebilirsiniz.",placement:"auto"},{target:".show #left-dropdown-menu:nth-child(4)",content:"D\xf6nem i\u015flemini ve dosyalar\u0131n\u0131 buradan silebilirsiniz. G\xf6nderilmi\u015f bir dosya var ise d\xf6nem i\u015flemi silinemez.",placement:"auto"},{target:".show #left-dropdown-menu:nth-child(5)",content:"A\u015fa\u011f\u0131da se\xe7ili olan bordrolar\u0131 silmek i\xe7in t\u0131klayabilirsiniz.",placement:"auto"},{target:"#indirBtn",content:"D\xf6nem i\u015fleminde bordrosu olmayan \xe7al\u0131\u015fanlar\u0131n\u0131z\u0131n listesi i\xe7in t\u0131klayabilirsiniz.",placement:"auto"}],steps3:[{target:"#left-dropdown-menu",content:'"\xdccret Bordrosu D\xf6nem \u0130\u015flemi" sayfas\u0131nda bordro g\xf6nderim i\u015flemleri y\xfcr\xfct\xfcl\xfcr.',placement:"center"},{target:"#left-dropdown-menu:nth-child(1)",content:"D\xf6nem i\u015flemine daha fazla dosya eklemek i\xe7in buraya t\u0131klabilirsiniz.",placement:"auto"},{target:"#left-dropdown-menu:nth-child(2)",content:"Se\xe7ti\u011finiz bordrolar\u0131n imzalan\u0131p g\xf6nderilmesi buradan sa\u011flan\u0131r.",placement:"auto"},{target:"#left-dropdown-menu:nth-child(3)",content:"Hen\xfcz onaylanmam\u0131\u015f ve beklemede olan bordrolar\u0131n\u0131z i\xe7in al\u0131c\u0131lara uyar\u0131 iletisi g\xf6nderebilirsiniz.",placement:"auto"},{target:"#left-dropdown-menu:nth-child(4)",content:"Bordrolar\u0131n\u0131z\u0131n son g\xf6nderim durumlar\u0131n\u0131 g\xf6rmek i\xe7in t\u0131klayabilirsiniz. ",placement:"auto"},{target:"#left-dropdown-menu:nth-child(5)",content:"T\xfcm dok\xfcmananlar\u0131 zip dosyas\u0131 halinde bilgisayar\u0131n\u0131za indirebilirsiniz.",placement:"auto"},{target:"#left-dropdown-menu:nth-child(6)",content:"D\xf6nem i\u015flemini ve dosyalar\u0131n\u0131 buradan silebilirsiniz. G\xf6nderilmi\u015f bir dosya var ise d\xf6nem i\u015flemi silinemez.",placement:"auto"},{target:"#indirBtn",content:"D\xf6nem i\u015fleminde bordrosu olmayan \xe7al\u0131\u015fanlar\u0131n\u0131z\u0131n listesi i\xe7in t\u0131klayabilirsiniz.",placement:"auto"}],locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla",open:"Devam Et"},joyrideActive:!1,shouldRun:!0,width:window.innerWidth,flag:0,showEczaciHelpModal:!1,video:null,stop:null,signStatistic:{success:0,fail:0}}}componentDidUpdate(e,t,a){!0===this.props.removeMonth&&this.state.sessionMonth&&(this.setState({sessionMonth:null}),this.props.setRemoveMonthOff())}onCancel(){this._source&&this._source.cancel(),this.state.index>0?this.props.toggleModal(!1,!0):this.props.toggleModal(!1,!1)}onDrop(e,t){let a=this;if(e){a.setState({processing:!0,uploadBtnDisabled:!0,fileList:[]});let t=[];for(let a=0;a<e.length;a++)t.push({content:e[a],name:e[a].name,size:e[a].size});a.setState({processing:!1,uploadBtnDisabled:!1,fileList:t,index:0,realIndex:0})}}getStatusRender(e){let t="processing"===e?"spinner fa-spin":"success"===e?"check":"error"===e?"close":"pause",a="processing"===e?"dark":"success"===e?"green":"error"===e?"red":"dark";return i.a.createElement("i",{className:"fas fa-"+t,style:{color:a,paddingRight:"4px"}})}changeLocation(e){this.setState({location:e.target.value})}checkCustomerSmsCreditAndSent(){let e=this,t={url:"/bordro/checkCustomerSmsCredit",method:"post",data:e.state.selection};Object(u.e)(t).then((function(t){e.isNotEminEczanesi()?e.sign():e.manualPdfSign(),(!e.state.selection||e.state.selection<=0)&&e.showWarning("\u0130letilerinin olu\u015fturulup imzalanmas\u0131 istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")})).catch((function(e){Object(h.v)(e)}))}checkCustomerSmsCreditAndSentManuel(){let e=this,t={url:"/bordro/checkCustomerSmsCredit",method:"post",data:e.state.bordroSession.id};Object(u.e)(t).then((function(t){e.manualPdfSign(),(!e.state.selection||e.state.selection<=0)&&e.showWarning("\u0130letilerinin olu\u015fturulup imzalanmas\u0131 istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")})).catch((function(e){Object(h.v)(e)}))}componentWillMount(){this.setState({isKepOwner:this.props.isKepOwner}),Object(u.e)({url:"signer/hsm/hasAccess",method:"get"}).then(e=>this.setState({isHsmOwner:e.data})).catch(()=>this.setState({isHsmOwner:!1}))}componentDidMount(){let e=this.props&&this.props.history&&this.props.history.location;this.readBordroSessionDateAll(),this.props.match&&this.props.match.params.bordroSessionId&&(e&&e.from&&"sign"===e.from&&this.getSignStatistics(this.props.match.params.bordroSessionId,e.signed,e.unsigned),this.props.location&&this.props.location.selectedBordroIdList&&this.setState({selection:this.props.location.selectedBordroIdList}),this.setState({bordroSession:{id:this.props.match.params.bordroSessionId}}),this.load()),window.addEventListener("resize",this.updateDimensions)}componentWillUnmount(){window.removeEventListener("resize",this.updateDimensions)}showAlertMessage(e,t,a){let{signStatistic:s}=this.state;e.setState({alert:i.a.createElement(o.a,{info:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"success",title:"Bilgi",onConfirm:()=>e.setState({alert:null})},i.a.createElement("label",{style:{fontSize:"15px",color:"green"}},"\u0130mzalanan bordro say\u0131s\u0131: ",t||s.success),i.a.createElement("label",{style:{fontSize:"15px",color:"red"}}," \u0130mzalanamayan bordro say\u0131s\u0131: ",a||s.fail))})}load(){if(this.props.match&&this.props.match.params.bordroSessionId){let e=this.props.match.params.bordroSessionId;this.timerStatus(!0);let t=this,a={url:"/bordrosession/readBordroSessionById",method:"post",data:e};t.setState({loading:!0}),Object(u.e)(a).then((function(e){t.waitIfMimeSending(t,e.data),t.setState({bordroSession:e.data}),t.refreshBordroSessionInfo(e.data.id),t.refreshBordroSessionDublicateInfo(e.data.id),e.data&&e.data.errorOccured&&(b.a.error(e.data.error||e.data.errorTrace.toString().substring(0,80),{position:"top-right",effect:"stackslide",timeout:15e3}),t.timerStatus(!1)),t.setState({loading:!1},()=>{t.sessionAndEmployeeListChecker(e.data.id)})})).catch((function(e){t.setState({loading:!1}),Object(h.v)(e),t.timerStatus(!1)}))}else{let e=de.newCleanState();e.bordroSession={state:""},this.setState(e)}}sessionAndEmployeeListChecker(e){this.timerStatus(!0);let t=this,a={url:"/employee/sessionChecker",method:"post",data:{sessionId:e,type:"bordro"},timeout:18e4};Object(u.e)(a).then((function(e){"string"!==typeof e.data&&(t.setState({unloadedEmployees:e.data}),this.timerStatus(!1))})).catch((function(e){}))}downloadExcel(e){let t=this,a={url:"/employee/downloadUnloadedExcel",responseType:"arraybuffer",method:"post",data:{sessionId:e,type:"bordro"}};t.setState({unloadedLoading:!0}),Object(u.e)(a).then((function(e){t.setState({alert:null,unloadedLoading:!1});let a=document.createElement("a");a.href=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"}));let s=new Date;a.download="Donem_Bordrosu_Yuklenmeyen_Calisanlar_"+s.getFullYear()+"-"+s.getMonth()+"-"+s.getDate()+"_"+s.getHours()+"-"+s.getMinutes()+"-"+s.getSeconds()+".xlsx",a.click()})).catch((function(e){void 0===e.response&&Object(h.v)({message:"\u015eu an i\u015fleminiz ger\xe7ekle\u015ftirilemiyor."}),t.setState({alert:null,unloadedLoading:!1})}))}timerStatus(e){this.props.onTimerStatus(e)}waitIfMimeSending(e,t){this.timerStatus(!0);let a=t.id,s=t.state?t.state:y.a;if(Object(y.N)(s,"=",y.d)||Object(y.N)(s,"=",y.c)){Object(y.N)(s,"=",y.d)&&e.setState({isMimeSending:!0}),Object(y.N)(s,"=",y.c)&&e.setState({isPdfsParsing:!0});let t={url:"/bordrosession/waitForBordroSessionUpdate",method:"post",data:{id:a,currentState:s}};Object(u.e)(t).then(()=>{e.load()}).catch(t=>{e.setState({loading:!1}),Object(h.v)(t),this.timerStatus(!1)})}else this.state.isPdfsParsing&&Object(y.N)(s,"=",y.b)?(e.setState({isPdfsParsing:!1,manual:!0},()=>{e.load(),this.timerStatus(!1)}),b.a.error("Bordro y\xfcklenirken hata olu\u015ftu",{position:"top-right",effect:"stackslide",timeout:1e4})):this.state.isMimeSending&&Object(y.N)(s,">=",y.e)?(e.setState({isMimeSending:!1,manual:!0},()=>{e.load(),this.timerStatus(!1)}),b.a.success("\u0130letiler g\xf6nderildi.",{position:"top-right",effect:"stackslide",timeout:15e3})):this.state.isPdfsParsing&&Object(y.N)(s,">=",y.a)?(e.setState({isPdfsParsing:!1,manual:!0},()=>{e.load(),this.timerStatus(!1)}),b.a.info("Pdf Dosyalar\u0131 Y\xfcklendi.",{position:"top-right",effect:"stackslide",timeout:1e4}),t.hasFileWithError&&(b.a.warning("Pdf Dosyalar\u0131 Y\xfcklemesi i\u015flemi tamamland\u0131. Hatal\u0131 dosyalar var. L\xfctfen, '\xdccret Bordrosu D\xf6nemi Dosyalar\u0131'n\u0131 g\xf6r\xfcnt\xfcleyerek hatal\u0131 dosyay\u0131 inceleyiniz.",{position:"top-right",effect:"stackslide",timeout:15e3}),this.timerStatus(!1))):(e.setState({loading:!1}),this.timerStatus(!1))}refreshBordroSessionInfo(e){this.timerStatus(!0);let t=this,a={url:"/bordrosession/readBordroSessionInfo",method:"post",data:e};Object(u.e)(a).then((function(e){let a=t.state.bordroSessionInfo;a.totalCount=e.data.bordroCount,a.sentCount=e.data.sentMimeCount,a.signedCount=e.data.signedMimeCount,a.unpairedCount=e.data.unPairedCount,a.location=e.data.location,t.setState({bordroSessionInfo:a})})).catch((function(e){Object(h.v)(e),this.timerStatus(!1)}))}refreshBordroSessionDublicateInfo(e){this.timerStatus(!0);let t={url:"/bordrosession/readBordroSessionDublicateInfo",method:"post",data:e};Object(u.e)(t).then(e=>{let t={...this.state.bordroSessionInfo};t.dublicatedCount=e.data,this.setState({bordroSessionInfo:t})}).catch(e=>{Object(h.v)(e),this.timerStatus(!1)})}readBordroSessionDateAll(){let e=this;e.setState({loading:!0}),Object(u.e)({url:"/bordrosession/readBordroSessionDateAll",method:"get"}).then((function(t){e.setState({monthlyBordros:t.data,loading:!1})})).catch((function(t){e.setState({loading:!1}),Object(h.v)(t)}))}uploadBordroSessionFile(){this.setState({showUploadModal:!0,sessionToBeCreated:!0})}uploadBordroFile(){this.setState({fileLoadSessionId:this.state.bordroSession.id,showUploadModal:!0,sessionToBeCreated:!1})}uploadBordroFileWithoutTckn(){this.setState({fileLoadSessionId:this.state.bordroSession.id,showUploadModalWithoutTckn:!0,sessionToBeCreated:!1})}checkSessionMonthIsUsed(e){let t=this.state.monthlyBordros;m()(e,"YYYY/MM",!0).isValid()&&t&&t.some((function(t){return parseInt(m()(t.term,"YYYY/MM/DD").format("M"))===parseInt(e.month())+1&&parseInt(m()(t.term,"YYYY/MM/DD").format("YYYY"))===parseInt(e.year())}))&&this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>this.setState({alert:null}),onCancel:()=>this.setState({removeMonth:!0,alert:null})},"Daha \xf6nce se\xe7ilmi\u015f bir \xfccret bordrosu d\xf6nemini se\xe7tiniz.")})}renderMonth(e,t,a){let s=this.state.monthlyBordros;return s&&s.some((function(e){return parseInt(m()(e.term,"YYYY/MM/DD").format("M"))===parseInt(t)+1&&parseInt(m()(e.term,"YYYY/MM/DD").format("YYYY"))===parseInt(a)}))?i.a.createElement("td",Object.assign({},e,{bgcolor:"#d3d3d3"}),Object(h.r)(t+1)):i.a.createElement("td",e,Object(h.r)(t+1))}downloadMedia(){let e=this,t={url:"/bordro/downloadMedia",method:"post",data:e.arrangeDataSet(e.state.selection)};e.setState({showModal:!0,title:"",disabledDownloadBtn:!0}),Object(u.e)(t).then((function(t){b.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3}),e.setState({loadingType:null})})).catch((function(t){Object(h.v)(t),e.setState({loadingType:null})}))}deleteClicked(){this.setState({alert:null,loading:!0});let e=this,t={url:"/bordrosession/deleteBordroSession",method:"post",data:this.state.bordroSession.id};e.setState({disabledDeleteBtn:!0}),Object(u.e)(t).then(()=>{b.a.success("\xdccret bordrosu d\xf6nemi ba\u015far\u0131yla silindi.",{position:"top-right",effect:"stackslide",timeout:15e3}),e.props.sidebarSelected("bordrosessionlist"),e.props.history.push("/".concat(e.props.peykName,"/bordrosessionlist"))}).catch(t=>{e.props.currentUser.pairedEmployeeId?Object(h.v)(t):b.a.error("\xdccret bordrosu d\xf6nemi i\xe7inde g\xf6nderilmi\u015f bordro bulundu\u011fundan silinemez.",{position:"top-right",effect:"stackslide",timeout:15e3}),e.setState({disabledDeleteBtn:!1,loading:!1})})}renderBordroSessionState(){return i.a.createElement(i.a.Fragment,null,this.state.isMimeSending&&i.a.createElement("div",{className:"row",style:{marginBottom:"15px"}},i.a.createElement(n.Col,{sm:12},i.a.createElement("div",{style:{display:"inline-block",marginRight:"8px"}},i.a.createElement(x.a,{type:"balls",color:"#2c2c2c",height:24,width:24})),i.a.createElement("div",{style:{display:"inline-block",marginRight:"8px",position:"relative",top:"-6px"}},"\u0130letiler g\xf6nderiliyor..."))),this.state.isPdfsParsing&&i.a.createElement("div",{className:"row",style:{marginBottom:"15px"}},i.a.createElement(n.Col,{sm:12},i.a.createElement("div",{style:{display:"inline-block",marginRight:"8px"}},i.a.createElement(x.a,{type:"balls",color:"#2c2c2c",height:24,width:24})),i.a.createElement("div",{style:{display:"inline-block",marginRight:"8px",position:"relative",top:"-6px"}},"Pdf dosyalar\u0131 y\xfckleniyor..."))),this.state.bordroSession&&this.state.bordroSession.errorOccured&&i.a.createElement("div",{className:"row"},i.a.createElement(n.Col,{sm:12},i.a.createElement(b.a,{color:"danger"},i.a.createElement("span",null,this.state.bordroSession.error)))))}renderFileListModal(){return i.a.createElement(n.Modal,{isOpen:this.state.displayFiles,size:"lg",toggle:()=>this.setState({displayFiles:!1})},i.a.createElement(n.ModalHeader,{className:"justify-content-center",toggle:()=>this.setState({displayFiles:!1})},"\xdccret Bordrosu D\xf6nemine Y\xfcklenmi\u015f Dosyalar"),i.a.createElement(n.ModalBody,null,i.a.createElement(K,{bordroSession:this.state.bordroSession,hasGrant:this.hasGrant})))}renderLocationChangeModal(){return i.a.createElement(ee,{modal:this.state.displayLocationChangeModal,location:this.state.bordroSessionInfo.location,sessionId:this.state.bordroSession.id,toggleModal:(e,t)=>this.setState({displayLocationChangeModal:e,manual:t},()=>{t&&this.load()})})}showWarning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Se\xe7im Yap\u0131lmad\u0131";this.setState({alert:i.a.createElement(o.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:t,onConfirm:()=>this.setState({alert:null})},e)})}renderNavButtons(){return this.state.bordroSession?i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{offsetWidth:this.props.offsetWidth,innerWidth:window.innerWidth,btnDisabled:this.state.btnDisabled,flag:this.state.flag,name:"bordroImport",sign:this.isNotEminEczanesi()?this.sign:this.manualPdfSign,manualSign:this.manualPdfSign,showWarning:this.showWarning,selection:this.state.selection,reload:this.props.reload,exitsManuelSign:!this.state.isKepOwner&&!this.state.isHsmOwner&&this.isNotEminEczanesi()},i.a.createElement(J.a,{position:"leftSide",className:"zocial Yeni",style:{fontSize:"x-small"},disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,label:"Dosya Ekle",title:"D\xf6neme Dosya Ekle",onClick:this.uploadBordroFile}),i.a.createElement(J.a,{position:"leftSide",className:"zocial Yeni",style:{fontSize:"x-small"},disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,label:"Dosya Ekle(Tckn i\xe7ermeyen)",title:"D\xf6neme Dosya Ekle",onClick:this.uploadBordroFileWithoutTckn}),this.state.width<=1195&&i.a.createElement(J.a,{position:"leftSide",className:"zocial Mail",style:{fontSize:"x-small"},label:"\u0130mzala & G\xf6nder",title:"\u0130leti \u0130mzala ve G\xf6nder",disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,onClick:()=>{this.checkCustomerSmsCreditAndSent()}}),!this.state.isKepOwner&&!this.state.isHsmOwner&&this.state.width<=1195&&this.isNotEminEczanesi()&&i.a.createElement(J.a,{position:"leftSide",className:"zocial Mail",style:{fontSize:"x-small"},label:"Manuel imzala ve g\xf6nder",title:"Manuel \u0130mzala ve G\xf6nder",disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,onClick:()=>{this.checkCustomerSmsCreditAndSentManuel()}}),i.a.createElement(J.a,{position:"leftSide",className:"zocial Gonder",style:{fontSize:"x-small"},label:"Uyar\u0131 G\xf6nder",title:"Se\xe7ilecek Ki\u015filere Uyar\u0131 Bildirisi G\xf6nder",disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured||!this.state.bordroSessionInfo||0===this.state.bordroSessionInfo.sentCount,onClick:()=>{this.state.selection&&this.state.selection.length>0&&this.props.history.push({pathname:"/".concat(this.props.peykName,"/mimerepeat"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection,isKepOwner:this.state.isKepOwner}),(!this.state.selection||this.state.selection<=0)&&this.showWarning("Al\u0131c\u0131lar\u0131na uyar\u0131 g\xf6nderilmesi istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")}}),this.state.width<=1195&&i.a.createElement(J.a,{position:"leftSide",className:"zocial Yenile",style:{fontSize:"x-small"},label:"Sonu\xe7 Yenile",title:"Sonu\xe7 Yenile",disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,onClick:()=>{this.props.reload(!0,"sidebar")}}),i.a.createElement(J.a,{position:"leftSide",className:"zocial Kaydet",style:{fontSize:"x-small"},label:"Zip Olarak \u0130ndir",title:"Se\xe7ili \xdccret Bordrolar\u0131n\u0131 Zip Olarak \u0130ndir",disabled:this.state.disabledDownloadBtn||this.state.bordroSession&&this.state.bordroSession.errorOccured||this.state.bordroSessionInfo&&this.state.bordroSessionInfo.totalCount<=0,onClick:()=>{this.state.selection&&this.state.selection.length>0&&this.downloadMedia(),(!this.state.selection||this.state.selection<=0)&&this.showWarning("\u0130ndirilmek istenen bordrolar\u0131 se\xe7iniz.")}}),i.a.createElement(J.a,{position:"leftSide",className:"zocial Sil",style:{fontSize:"x-small"},label:"D\xf6nemi Sil",title:"\xdccret Bordrosu D\xf6nemini Sil",disabled:this.state.isMimeSending||this.state.disabledDeleteBtn,onClick:()=>{!(this.state.bordroSessionInfo&&this.state.bordroSessionInfo.signedCount>0)&&this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>{this.deleteClicked()},onCancel:()=>this.setState({alert:null})},"A\xe7\u0131lm\u0131\u015f \xdccret Bordrosu D\xf6nemi silinecek.")}),this.state.bordroSessionInfo&&this.state.bordroSessionInfo.signedCount>0&&this.setState({alert:i.a.createElement(o.a,{danger:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"danger",title:"Hata",onConfirm:()=>this.setState({alert:null})},"G\xf6nderilmi\u015f veya g\xf6nderilmekte olan ileti i\xe7eren \xfccret bordrosu d\xf6nemi silinemez.")})}}),i.a.createElement(J.a,{position:"leftSide",className:"zocial Sil",label:"Se\xe7ilen Bordrolar\u0131 Sil",title:"Se\xe7ilen Bordrolar\u0131 Sil",disabled:this.state.isMimeSending||this.state.disabledDeleteBtn||!(this.state.selection&&this.state.selection.length>0),style:{fontSize:"x-small"},onClick:()=>{this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:this.deleteBordro,onCancel:()=>this.setState({alert:null})},"Se\xe7ilen bordro kay\u0131tlar\u0131 silinecek. G\xf6nderilmi\u015f bordrolar silinemez.")})}}),i.a.createElement("div",{className:"helpButtonContainer",position:"rightSide",style:{position:"relative",top:"15%",right:"-5em"}},i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon"})),this.state.stop&&i.a.createElement("div",{className:"nav-item dropdown  videoIconContainer",style:{display:"inline-block",paddingRight:"30px"}},i.a.createElement("button",{className:"nav-link  videoIconButton","data-toggle":"dropdown","aria-haspopup":"true",id:"navbarDropdownMenuLink","aria-expanded":"false"},i.a.createElement("span",{className:"tooltipText"},"Yardimci Videolar"),i.a.createElement("i",{className:"fab fa-youtube videoIcon"})),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right",id:"showVideos","aria-labelledby":"videosLink"},this.videos2.map((e,t)=>i.a.createElement("a",{key:t,className:"dropdown-item",onClick:()=>this.switchVideo(e)},e.title))))),this.state.isKepOwner&&i.a.createElement(J.a,{position:"leftSide",className:"zocial Dokuman",style:{float:"left",width:"180px",fontSize:"xx-small",position:"absolute",right:"304px"},label:"PDF Eki \u0130mzala (Opsiyonel)",title:"\xdccret Bordrosu \u0130mzala (Opsiyonel)",disabled:this.state.bordroSession&&this.state.bordroSession.errorOccured,onClick:()=>{this.kepPdfSign(),(!this.state.selection||this.state.selection<=0)&&this.showWarning("\u0130mzalanmas\u0131 istenen \xfccret bordrolar\u0131n\u0131 se\xe7iniz.")}}))):i.a.createElement(n.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},i.a.createElement("ul",{className:"helpfulList"},i.a.createElement("li",{className:"helpButtonContainer"},i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon"}))),this.state.stop&&i.a.createElement("li",{className:"nav-item dropdown  videoIconContainer"},i.a.createElement("button",{className:"nav-link  videoIconButton","data-toggle":"dropdown","aria-haspopup":"true",id:"navbarDropdownMenuLink","aria-expanded":"false"},i.a.createElement("span",{className:"tooltipText"},"Yardimci Videolar"),i.a.createElement("i",{className:"fab fa-youtube videoIcon"})),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right",id:"showVideos","aria-labelledby":"videosLink"},this.videos.map((e,t)=>i.a.createElement("a",{key:t,className:"dropdown-item",onClick:()=>this.switchVideo(e)},e.title))))))}sign(){if(this.state.selection&&this.state.selection.length>0){let e=this;if(e.state.isKepOwner?e.mimeSign():e.state.isHsmOwner?e.hsmSign():e.mailPdfSign(),this.state.totalPdfCountIdList&&this.state.totalPdfCountIdList.length>0){const e=this.state.conditionalList.filter(e=>this.state.totalPdfCountIdList.includes(e)),t=this.state.declineList.filter(e=>this.state.totalPdfCountIdList.includes(e));let a={url:"/bordro/updateBordroConditionalInfo",method:"post",data:{conditionalIdList:e,sessionId:this.state.bordroSession.id}};Object(u.e)(a).then((function(e){})).catch((function(e){Object(h.v)(e)}));let s={url:"/bordro/updateBordroDeclineInfo",method:"post",data:{declineIdList:t,sessionId:this.state.bordroSession.id}};Object(u.e)(s).then((function(e){})).catch((function(e){Object(h.v)(e)}))}}}hsmSign(){this.props.history.push({pathname:"/".concat(this.props.peykName,"/bordrosign/hsm"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection})}kepPdfSign(){this.props.history.push({pathname:"/".concat(this.props.peykName,"/bordrosign"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection})}mailPdfSign(){this.props.history.push({pathname:"/".concat(this.props.peykName,"/bordrosign/mail"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection})}manualPdfSign(){this.props.history.push({pathname:"/".concat(this.props.peykName,"/bordrosign/manual"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection})}mimeSign(){this.props.history.push({pathname:"/".concat(this.props.peykName,"/mimesign"),bordroSession:this.state.bordroSession,selectedBordroIdList:this.state.selection})}renderSummary(){let e=this.state.bordroSessionInfo?this.state.bordroSessionInfo.totalCount:"",t=this.state.bordroSessionInfo?this.state.bordroSessionInfo.sentCount:"",a=this.state.bordroSessionInfo?this.state.bordroSessionInfo.signedCount:"",s=this.state.bordroSessionInfo?this.state.bordroSessionInfo.unpairedCount:"",n=this.state.bordroSessionInfo?this.state.bordroSessionInfo.dublicatedCount:"",l=this.state.bordroSessionInfo?this.state.bordroSessionInfo.location:"",o=this.state.unloadedEmployees?this.state.unloadedEmployees:0;return i.a.createElement("div",{className:"FormRenk",style:{marginBottom:"0px",left:"50px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"\xdccret Bordrosu D\xf6nemi:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,this.state.bordroSession.term?["Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k"][m()(this.state.bordroSession.term,"YYYY/MM/DD").format("M")-1]+" "+m()(this.state.bordroSession.term,"YYYY/MM/DD").format("YYYY"):"")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"\xdccret Bordrosu D\xf6nemi Dosyalar\u0131:")),i.a.createElement("div",{className:"col-sm-3"},this.state.bordroSession&&!this.state.bordroSession.hasFileWithError&&i.a.createElement("button",{className:"btn-outline-info",disabled:this.state.loading,onClick:()=>this.setState({displayFiles:!0})},"G\xf6r\xfcnt\xfcle"),this.state.bordroSession&&this.state.bordroSession.hasFileWithError&&i.a.createElement("button",{className:"btn-outline-danger",id:"btn-danger",disabled:this.state.loading,"data-toggle":"tooltip",title:"yanl\u0131\u015f dosya y\xfcklemi i\u015flemi yapt\u0131n\u0131z.",onClick:()=>this.setState({displayFiles:!0})},"G\xf6r\xfcnt\xfcle")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Toplam \xdccret Bordrosu Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,e)),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"E\u015fle\u015ftirilen \xc7al\u0131\u015fan Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,e-s)),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"G\xf6nderilmi\u015f \u0130leti Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,t)),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"E\u015fle\u015ftirilemeyen \xdccret Bordrosu Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,s)),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"\u0130mzalanm\u0131\u015f \u0130leti Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,a)),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"M\xfckerrer \xc7al\u0131\u015fanl\u0131 \xdccret Bordrosu Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,n)),i.a.createElement("div",{className:"col-sm-3"},l?i.a.createElement("label",null,"Lokasyon:"):""),i.a.createElement("div",{className:"col-sm-3",style:{overflow:"hidden"}},l&&i.a.createElement("label",{style:{marginRight:"2%"}},i.a.createElement(F.a,{text:l})),l&&i.a.createElement("button",{id:"location",className:"btn-outline-info",disabled:this.state.loading,title:"Lokasyon bilgisini de\u011fi\u015ftir",onClick:()=>this.setState({displayLocationChangeModal:!0})},"D\xfczenle")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Bordrosu Y\xfcklenmeyen \xc7al\u0131\u015fan Say\u0131s\u0131:")),i.a.createElement("div",{className:"col-sm-3"},o>0&&i.a.createElement("label",{style:{marginRight:"2%",color:"red"}},o),0===o&&i.a.createElement("label",{style:{marginRight:"2%"}},o),i.a.createElement("button",{id:"indirBtn",className:"btn-outline-info",disabled:this.state.loading||this.state.unloadedLoading,onClick:()=>this.downloadExcel(this.state.bordroSession.id),title:"Bordrosu y\xfcklenmeyen \xe7al\u0131\u015fan listesini indir"},"\u0130ndir"))))}addSelectionToState(e){this.setState({selection:e})}activateJoyride(){!1===this.state.joyrideActive&&(this.setState({flag:0}),this.setState({joyrideActive:!0}),this.state.width>100&&this.setState({flag:1}))}callback(e){"close"===e.action&&"step:after"===e.type&&(this.setState({shouldRun:!1}),this.setState({flag:0})),"stop"!==e.action&&"reset"!==e.action&&"skip"!==e.action||(this.setState({shouldRun:!0}),this.setState({joyrideActive:!1}),this.setState({flag:0}),this.activateJoyride())}render(){let e=this.state.steps,t=this.state.steps2,a=this.state.steps3,s=this.state.locale;return i.a.createElement("div",{className:"row baseBackground"},this.state.alert,this.renderFileListModal(),this.state.displayLocationChangeModal&&this.renderLocationChangeModal(),this.renderNavButtons(),i.a.createElement("div",{className:"col-sm-12 satirBasi"},i.a.createElement("div",{className:"app"},this.state.joyrideActive&&i.a.createElement(Z.a,{disableBeacon:!1,autoStart:!0,locale:s,steps:this.state.bordroSession?this.state.width<1e3?a:t:e,continuous:!0,run:this.state.shouldRun,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,scrollToSteps:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClicks:!1,keyboardNavigation:!0,hideBackButton:!1,disableOverlayClose:!0,callback:this.callback,holePadding:0,shouldRun:this.state.shouldRun,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}})),i.a.createElement(n.CardHeader,null,i.a.createElement(n.CardTitle,{tag:"h4"},this.state.bordroSession?"\xdccret Bordrosu D\xf6nem \u0130\u015flemi":"\xdccret Bordrosu Y\xfckle"),!this.state.bordroSession&&i.a.createElement("label",null,"\xc7al\u0131\u015fanlar\u0131n\u0131za \xfccret bordrosu g\xf6nderimi yapmak i\xe7in, toplu veya ayr\u0131 ayr\u0131 olan \xfccret bordrolar\u0131n\u0131 pdf veya xlsx uzant\u0131l\u0131 olacak \u015fekilde do\u011frudan veya zip dosyas\u0131 halinde y\xfckleme yap\u0131n\u0131z."),i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"20px"}},i.a.createElement("div",{className:"col-sm-8"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-2"},"D\xf6nem"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(le.a,{timeFormat:!1,dateFormat:"YYYY-MM",closeOnSelect:!0,inputProps:{placeholder:"YIL/AY"},value:this.state.sessionMonth,renderMonth:this.props.renderMonth,isValidDate:function(e){return e.startOf("month").isSameOrBefore(le.a.moment().startOf("month"))},onChange:e=>{this.setState({sessionMonth:e}),this.checkSessionMonthIsUsed(e)}}))),i.a.createElement("div",{className:"col-sm-2"})),i.a.createElement("div",{className:" col-sm-12 row",style:{marginTop:"15px"}},i.a.createElement("div",{className:"col-sm-8"}),i.a.createElement("div",{className:"col-sm-8 row"},i.a.createElement("div",{className:"col-sm-2"},"Lokasyon"),i.a.createElement("div",{className:"col-sm-4"},i.a.createElement(n.Input,{type:"text",name:"location",value:this.state.location,onChange:this.changeLocation}))),i.a.createElement("div",{className:"col-sm-2"}))),i.a.createElement(n.CardBody,null,this.renderBordroSessionState()),i.a.createElement(n.CardBody,null,this.state.bordroSession&&this.renderSummary()),i.a.createElement(n.CardBody,null,this.state.bordroSession&&i.a.createElement(U,{bordroSession:this.state.bordroSession,bordroSessionInfo:this.state.bordroSessionInfo,addSelectionToState:this.addSelectionToState,sidebarMenus:this.props.sidebarMenus,isKepOwner:this.state.isKepOwner,selection:this.state.selection,hasGrant:this.props.hasGrant,manual:this.state.manual,loading:this.state.loading,isManual:e=>this.setState({manual:e}),load:()=>this.props.reload(!0,"sidebar"),tableLoadingCompleted:()=>{this.state.isPdfsParsing||this.setState({loading:!1})},changeOnConditionalSelection:e=>this.setState({conditionalList:e}),changeOnDeclineSelection:e=>this.setState({declineList:e}),isPdfsParsing:this.state.isPdfsParsing,flag:this.state.flag,totalPdfCountIdList:e=>this.setState({totalPdfCountIdList:e})})),this.state.showUploadModal&&i.a.createElement(Q.a,{id:this.state.fileLoadSessionId,peykName:this.props.peykName,modal:this.state.showUploadModal,hasGrant:this.hasGrant,newSession:this.state.sessionToBeCreated,history:this.props.history,onMonthChange:e=>this.checkSessionMonthIsUsed(e),renderMonth:this.renderMonth,loadBordroSession:()=>this.load(),toggleModal:(e,t)=>this.setState({showUploadModal:e,manual:t}),toggleModalWithTimeout:(e,t)=>this.setState({showUploadModal:e,manual:t},()=>this.load()),removeMonth:this.state.removeMonth,setRemoveMonthOff:()=>this.setState({removeMonth:!1})}),!this.props.match.params.bordroSessionId&&i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"15px",paddingRight:"32px",paddingLeft:"32px"}},i.a.createElement(ie.a,{accept:".pdf, .xlsx",activeClassName:"dropzoneActiveClass",className:"FormRenk col-sm-12",multiple:!0,disabled:this.state.btnDisabled,onDrop:this.onDrop},i.a.createElement("div",{className:"dropzoneInnerArea"},"\xdccret Bordrosu dosyalar\u0131n\u0131 (.pdf, .xlsx) y\xfckleyiniz."))),!this.props.match.params.bordroSessionId&&i.a.createElement("div",null,i.a.createElement(n.Row,null,i.a.createElement(n.Col,{sm:"12",style:{paddingTop:"0px",paddingRight:"15px",paddingLeft:"15px",maxHeight:"500px",overflow:"auto"}},i.a.createElement("table",{className:"",style:{textAlign:"center",paddingBottom:"5px"}},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"#ebedf0"}},i.a.createElement("th",{width:"5%"},"#"),i.a.createElement("th",null,"Dosya Ad\u0131"),i.a.createElement("th",null,"Dosya Boyutu"),i.a.createElement("th",null,"Durum"))),i.a.createElement("tbody",null,this.state.fileList&&this.state.fileList.map((e,t)=>i.a.createElement("tr",{key:t+"_"+e.name+"_"+e.size},i.a.createElement("td",null,t+1),i.a.createElement("td",{style:{margin:"0px",textAlign:"left"}},i.a.createElement(F.a,{text:e.name||"-",maxLength:30})),i.a.createElement("td",{style:{margin:"0px"}},new te.Decimal(new te.Decimal(e.size/1024/1024).toFixed(2)).toNumber()+" MB"),i.a.createElement("td",{style:{margin:"0px"}},this.getStatusRender(e.status),e.statusText||"G\xf6nderim bekliyor"))),!this.state.processing&&this.state.fileList&&0===this.state.fileList.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Kay\u0131t bulunamad\u0131")),this.state.processing&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Dok\xfcman i\u015fleniyor..."))))),i.a.createElement(n.Col,{sm:"12"},i.a.createElement("p",{style:{float:"right"}},"Toplam Adet: ",this.state.fileList?this.state.fileList.length:0))),i.a.createElement("button",{type:"button",disabled:this.state.btnDisabled,className:"btn-sm btn-icon TekBtn kaydet",style:{float:"right",padding:"9px 45px 9px 20px"},onClick:()=>{this.sendNextBordroFile(this.state.index,!0,0)}},"D\xf6k\xfcmanlar\u0131 Y\xfckle"))),this.state.showUploadModalWithoutTckn&&i.a.createElement(re,{id:this.state.fileLoadSessionId,peykName:this.props.peykName,selectedList:[],modal:this.state.showUploadModalWithoutTckn,hasGrant:this.hasGrant,newSession:this.state.sessionToBeCreated,history:this.props.history,onMonthChange:e=>this.checkSessionMonthIsUsed(e),renderMonth:this.renderMonth,loadBordroSession:()=>this.load(),toggleModal:(e,t)=>this.setState({showUploadModalWithoutTckn:e,manual:t}),toggleModalWithTimeout:(e,t)=>this.setState({showUploadModalWithoutTckn:e,manual:t},()=>this.load()),removeMonth:this.state.removeMonth,setRemoveMonthOff:()=>this.setState({removeMonth:!1})}),this.state.showEczaciHelpModal&&i.a.createElement(X.a,{video:this.state.video,isOpen:this.state.showEczaciHelpModal,close:()=>this.setState({showEczaciHelpModal:!1})}))}}t.default=de}}]);