(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[36],{1319:function(e,t,a){"use strict";var s=a(0),i=a.n(s),l=a(23);class n extends s.Component{constructor(e){super(e),this.formatCreateLabelCreator=e=>this.props.allowNew?'Ekle "'+e+'"':"L\xfctfen, var olan bir "+this.props.name+" se\xe7imi yap\u0131n\u0131z.",this.state={},this.changeLabel=this.changeLabel.bind(this),this.createLabel=this.createLabel.bind(this),this.checkUpperCase=this.checkUpperCase.bind(this),this.generateOptions=this.generateOptions.bind(this)}changeLabel(e){this.props.onChange(this.checkUpperCase(e))}createLabel(e){if(this.props.allowNew){let t=this.props.list;if(0===t.length){let a;a=this.props.onlyLabel?{value:this.checkUpperCase(e.label),label:this.checkUpperCase(e.label)}:{value:"0",label:this.checkUpperCase(e.label)},t.push(a),this.props.updateList(t),this.changeLabel(a)}else{let a=t.length-1,s=t[a];if(this.props.onlyLabel)if(s.value===this.checkUpperCase(e.label))t[a].label=this.checkUpperCase(e.label),this.props.updateList(t),this.changeLabel(t[a]);else{let a={value:this.checkUpperCase(e.label),label:this.checkUpperCase(e.label)};t.push(a),this.props.updateList(t),this.changeLabel(a)}else if("0"===s.value)t[a].label=this.checkUpperCase(e.label),this.props.updateList(t),this.changeLabel(t[a]);else{let a={value:"0",label:this.checkUpperCase(e.label)};t.push(a),this.props.updateList(t),this.changeLabel(a)}}}}checkUpperCase(e){return e&&this.props.useUpperCase&&(null!=e.value&&e.label?e.label=e.label.toString().replace("i","\u0130").toUpperCase():e=e.toString().replace("i","\u0130").toUpperCase()),e}generateOptions(){let e=[];return this.props.list&&this.props.list.length>0&&this.props.list.map(t=>{e.push({value:t.value,label:this.checkUpperCase(t.label)})}),e}render(){let e=this.generateOptions();return i.a.createElement(l.a.Creatable,{clearable:!1,multi:!1,className:"select-control",name:"autoCompleteList",id:"autoCompleteList",value:this.props.value,placeholder:this.props.placeholder,promptTextCreator:this.formatCreateLabelCreator,noResultsText:"Hen\xfcz kaydedilmi\u015f veri yok",onChange:e=>this.changeLabel(e),onNewOptionClick:e=>this.createLabel(e),options:e})}}n.defaultProps={allowNew:!0,useUpperCase:!1,onlyLabel:!1,updateList:e=>{}},t.a=n},1514:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),l=a(2),n=a(19),o=a(16),r=a(21),m=a(6),p=a.n(m),c=a(1402),d=a(3),h=a(5),u=a(12),f=(a(82),a(84)),b=a(1331),g=a(60),y=a.n(g),E=a(430);class k extends s.Component{constructor(e){super(e),this.state={fileList:[],index:0,process:!1,realIndex:0},this.onDrop=this.onDrop.bind(this),this.onCancel=this.onCancel.bind(this),this.fileIsSaved=this.fileIsSaved.bind(this),this.saveFileInfo=this.saveFileInfo.bind(this),this.uploadFile=this.uploadFile.bind(this)}saveFileInfo(){this._source=y.a.CancelToken.source(),this.props.onUpload(this.state.fileList[0].content),this.fileIsSaved(this.state.fileList)}uploadFile(){this._source=y.a.CancelToken.source();let e=this,t=e.state.fileList,a=t[0],s=new FormData;s.append("content",a.content),s.append("id",e.props.id);let i={url:"/formsession/uploadAttachment",method:"post",cancelToken:e._source.token,data:s};t[0]={status:"processing",statusText:"G\xf6nderim ba\u015flat\u0131ld\u0131.",name:a.name,size:a.size,content:a.content},e.setState({btnDisabled:!0,fileList:t}),Object(h.e)(i).then((function(a){e.fileIsSaved(t)})).catch((function(s){y.a.isCancel(s)||(a.status="error",a.statusText=s.data,t[0]={status:"error",statusText:s.data,name:a.name,size:a.size,content:a.content},e.setState({fileList:t,btnDisabled:!1}),Object(d.v)(s))}))}fileIsSaved(e){let t=e[0];e[0]={status:"success",statusText:"G\xf6nderim ba\u015far\u0131l\u0131.",name:t.name,size:t.size,content:t.content},this.setState({fileList:e,btnDisabled:!1}),p.a.success("Dok\xfcman eklenmek \xfczere kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3}),this.props.toggleModal(!1,!1)}onCancel(){this._source&&this._source.cancel(),this.state.index>0?this.props.toggleModal(!1,!0):this.props.toggleModal(!1,!1)}onDrop(e,t){let a=this;if(e){let t=this.props.sablonsuzRows;if(t.length>0&&t.find(t=>t.pdfName===e[0].name))p.a.info("Ayn\u0131 PDF birden fazla se\xe7ilemez.",{position:"top-right",effect:"stackslide",timeout:4e3});else{t=[],a.setState({processing:!0,uploadBtnDisabled:!0,fileList:[]});for(let a=0;a<e.length;a++)t.push({content:e[a],name:e[a].name,size:e[a].size});a.setState({processing:!1,uploadBtnDisabled:!1,fileList:t,index:0,realIndex:0})}}}static getStatusRender(e){let t="processing"===e?"spinner fa-spin":"success"===e?"check":"error"===e?"close":"pause",a="processing"===e?"dark":"success"===e?"green":"error"===e?"red":"dark";return i.a.createElement("i",{className:"fas fa-"+t,style:{color:a,paddingRight:"4px"}})}render(){return i.a.createElement(f.a,{isOpen:this.props.modal,disabled:this.state.btnDisabled||this.state.fileList&&0===this.state.fileList.length,title:"Dok\xfcman Ekle",size:"lg",modalBodyStyle:{padding:"0",minHeight:"500px"},confirmBtnText:"Dok\xfcman(lar)\u0131 Y\xfckle",cancelBtnText:"Kapat",onConfirm:()=>{this.state.fileList.filter(e=>e.size>78643200).length>0?p.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3}):this.saveFileInfo()},onCancel:()=>this.props.toggleModal(!1,!1)},i.a.createElement(l.Row,null,i.a.createElement(l.Col,{sm:"12",style:{paddingTop:"15px",paddingRight:"32px",paddingLeft:"32px"}},i.a.createElement(E.a,{accept:".pdf",activeClassName:"dropzoneActiveClass",className:"FormRenk col-sm-12",multiple:!1,disabled:this.state.btnDisabled,onDrop:this.onDrop},i.a.createElement("div",{className:"dropzoneInnerArea"},"(.pdf uzant\u0131l\u0131) Ek dok\xfcman\u0131 y\xfckleyiniz.")))),i.a.createElement(l.Row,null,i.a.createElement(l.Col,{sm:"12",style:{paddingTop:"0px",paddingRight:"15px",paddingLeft:"15px",maxHeight:"500px",overflow:"auto"}},i.a.createElement("table",{className:"",style:{textAlign:"center",paddingBottom:"5px"}},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"#ebedf0"}},i.a.createElement("th",{width:"5%"},"#"),i.a.createElement("th",null,"Dosya Ad\u0131"),i.a.createElement("th",null,"Dosya Boyutu"),i.a.createElement("th",null,"Durum"))),i.a.createElement("tbody",null,this.state.fileList&&this.state.fileList.map((e,t)=>i.a.createElement("tr",{key:t+"_"+e.name+"_"+e.size},i.a.createElement("td",null,t+1),i.a.createElement("td",{style:{margin:"0px",textAlign:"left"}},i.a.createElement(o.a,{text:e.name||"-",maxLength:30})),i.a.createElement("td",{style:{margin:"0px"}},new b.Decimal(new b.Decimal(e.size/1024/1024).toFixed(2)).toNumber()+" MB"),i.a.createElement("td",{style:{margin:"0px"}},k.getStatusRender(e.status),e.statusText||"G\xf6nderim bekliyor"))),!this.state.processing&&this.state.fileList&&0===this.state.fileList.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Kay\u0131t bulunamad\u0131")),this.state.processing&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"8"},"Dok\xfcman i\u015fleniyor..."))))),i.a.createElement(l.Col,{sm:"12"},i.a.createElement("p",{style:{float:"right"}},"Toplam Adet: ",this.state.fileList?this.state.fileList.length:0))))}}var L=k,v=a(13),T=a.n(v),S=(a(218),a(9)),x=a.n(S),N=a(38),w=a.n(N),C=a(52),z=a(174),A=a(1319),B=a(201),I=a(20),F=a.n(I);class O extends s.Component{constructor(e){super(e);let t=""+this.props.pdfName;t=t.substring(0,t.length-4),this.state={formSablonsuzName:t,index:this.props.index}}render(){return i.a.createElement("tr",{key:this.state.index},i.a.createElement("td",{className:"col-sm-3"},i.a.createElement("label",null,"Form Ad\u0131: ")),i.a.createElement("td",{className:"col-sm-6",align:"center"},i.a.createElement(l.Input,{type:"textarea",rows:1,value:this.state.formSablonsuzName,style:{height:"auto",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},onChange:e=>this.setState({formSablonsuzName:e.target.value})})),i.a.createElement("td",null,i.a.createElement("span",{style:{textAlign:"right",verticalAlign:"center",paddingRight:"7px",fontSize:"25px"}},i.a.createElement("i",{className:"col-sm-2 fa fa-suitcase",title:this.props.pdfName}))),i.a.createElement("td",null,i.a.createElement(l.Button,{title:"Kald\u0131r",color:"secondary",style:{padding:"0 7px 0 5px",marginTop:"4px"},onClick:()=>this.props.onDelete(this.state.index)},i.a.createElement("span",{style:{position:"relative",left:"-5px",display:"inline-block",padding:"8px 7px",height:"25px",background:"rgba(0,0,0,0.15)",borderRadius:"3px 0 0 3px"}},i.a.createElement("i",{className:"fa fa-trash"})),"Sil")))}}var P=O;class D extends s.Component{constructor(e){super(e),this.videos=[{title:"form islemi duzenler",id:"lTjRaQZI4_Y"}],this.switchVideo=e=>{this.setState({video:e,showEczaciHelpModal:!0})},this.readMailTemplate=()=>{let e=this,t={url:"/signer/readFormMailTemplateInfo",method:"get"};Object(h.e)(t).then((function(t){t.data&&e.setState({mimeBody:t.data})})).catch((function(e){Object(d.v)(e)}))},this.ifNoTemplate=()=>this.props.location&&(-1===this.props.location.templateId||this.props.location.draftId>0),this.load=()=>{this.props.location&&this.props.location.templateId?(this.setState({sessionIsExist:!1}),this.ifNoTemplate()?this.props.location.draftId>0?this.readSessionFormTemplate():this.openAttachmentLoad():this.readFormTemplate()):this.props.match&&this.props.match.params&&parseInt(this.props.match.params.formSessionId)>0?(this.setState({sessionIsExist:!0}),this.readFormSession()):this.props.history.push({pathname:`/${this.props.peykName}/formsend`})},this.readAntets=()=>{let e=this;Object(h.e)({url:"/companyinfo/readCompanyLetterHead",method:"get"}).then((function(t){let a=[{value:"-1",label:"Antetsiz"}];a=a.concat(t.data),a&&a.length>0&&(e.setState({letterHeadList:a}),e.load())})).catch((function(e){Object(d.v)(e)}))},this.readFormTemplate=()=>{let e=this;Object(h.e)({url:"/formtemplate/readFormTemplate?id="+this.props.location.templateId,method:"get"}).then(t=>{let a=t.data,s=t.data.formName,i=t.data.mimeBody,l=e.state.letterHeadList.find(e=>e.value===a.antetId);a&&s&&i?this.setState({formTemplate:a,isDecline:a.isDecline,mimeTitle:s&&s.replace(" \xd6rne\u011fi",""),mimeBody:i,selectedAntet:l,extInputLabelList:t.data.formParams?JSON.parse(t.data.formParams).externalList:[]}):(this.props.history.push(`/${this.props.peykName}/formsend`),p.a.error("Form \u015fablonu bilgileri eksik olmamal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}))}).catch(e=>Object(d.v)(e))},this.readSessionFormTemplate=()=>{Object(h.e)({url:"/formsession/readFormSession?id="+this.props.location.draftId,method:"get"}).then(e=>{let t=e.data,a=t.mimeTitle,s=t.mimeBody,i=t.formTemplate.isAnswerable;i=1===i?{value:1,label:"CEVAP ZORUNLU"}:{value:0,label:"SADECE ONAY"};let l=t.formTemplate.priority;l=1===l?{value:1,label:"\xd6NCELL\u0130KL\u0130"}:{value:0,label:"NORMAL G\xd6NDER\u0130M"},Object(h.e)({url:"/formsession/readFormSessionAndPdf?id="+this.props.location.draftId,method:"get",responseType:"arraybuffer"}).then(e=>{let n=e.data;const o=new Blob([n],{type:e.headers["content-type"]}),r=new File([o],t.attachment.loadName,{type:"application/pdf"}),m=URL.createObjectURL(o);r.preview=m;const c=0===this.state.sablonsuzRows.length?0:Math.max(...this.state.sablonsuzRows.map(e=>e.sablonsuzRowId))+1,d=r.name;t?this.setState({formSession:t,mimeTitle:a,mimeBody:s,isAnswerable:i,submissionType:l,sablonsuzPdfFiles:[...this.state.sablonsuzPdfFiles,r],sablonsuzRows:[...this.state.sablonsuzRows,{sablonsuzRowId:c,pdfName:d}],isAttachmentLoaded:!0,removeAttachment:!1,mediaModal:!0}):(this.props.history.push(`/${this.props.peykName}/formsend`),p.a.error("Form \u015fablonu bilgileri eksik olmamal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}))}).catch(e=>{Object(d.v)(e)})}).catch(e=>{Object(d.v)(e)})},this.readFormSession=()=>{let e=this;Object(h.e)({url:"/formsession/getList",method:"post",data:{formSessionId:parseInt(e.props.match.params.formSessionId)}}).then((function(t){let{formSession:a,formEmployeeList:s,kepAccountList:i}=t.data,l=e.state.letterHeadList.find(e=>e.value===a.formTemplate.antetId);e.setState({isDecline:a.formTemplate.isDecline,formSession:a,kepAccountList:i,formTemplate:a.formTemplate,selectedAntet:l,mimeTitle:null!=a.mimeTitle&&a.mimeTitle.length>0?a.mimeTitle:a.formTemplate.formName&&a.formTemplate.formName.replace(" \xd6rne\u011fi",""),mimeBody:null!=a.mimeBody&&a.mimeBody.length>0?a.mimeBody:a.formTemplate.mimeBody,formParamList:a.formParamList&&a.formParamList.length>0&&JSON.parse(a.formParamList),formEmployeeList:s,extInputLabelList:a.formTemplate.formParams&&a.formTemplate.formParams.length>0&&JSON.parse(a.formTemplate.formParams).externalList}),a.attachment&&e.setState({isAttachmentLoaded:!0,attachment:a.attachment,mergeToEmployee:a.attachmentMergeByEmployee})})).catch((function(t){Object(d.v)(t),e.props.history.push({pathname:`/${e.props.peykName}/formsend`})}))},this.openAttachmentLoad=()=>{this.setState({showUploadModal:!0,formTemplateId:this.state.selected&&this.state.selected.id?this.state.selected.id:null})},this.uploadAttachment=e=>{if(this.ifNoTemplate()){const t=0===this.state.sablonsuzRows.length?0:Math.max(...this.state.sablonsuzRows.map(e=>e.sablonsuzRowId))+1,a=e.name;this.setState({sablonsuzPdfFiles:[...this.state.sablonsuzPdfFiles,e],sablonsuzRows:[...this.state.sablonsuzRows,{sablonsuzRowId:t,pdfName:a}],isAttachmentLoaded:!0,removeAttachment:!1})}else this.setState({attachment:e,isAttachmentLoaded:!0,removeAttachment:!1})},this.handleDelete=e=>{if(this.ifNoTemplate()){const t=this.state.sablonsuzRows.find(t=>t.sablonsuzRowId===e).pdfName;this.removeFuncAttachment(t);const a=this.state.sablonsuzRows.filter(e=>e.pdfName!==t);this.setState({sablonsuzRows:a})}else this.setState({attachment:null,alert:null,isAttachmentLoaded:!1,removeAttachment:!0,mergeToEmployee:!1})},this.removeFuncAttachment=e=>{const t=this.state.sablonsuzPdfFiles.filter(t=>t.name!==e);0===t.length?this.setState({sablonsuzPdfFiles:t,alert:null,isAttachmentLoaded:!1,removeAttachment:!0,mergeToEmployee:!1}):this.setState({sablonsuzPdfFiles:t,alert:null}),p.a.info("Dok\xfcman Eki iptal edildi.",{position:"top-right",effect:"stackslide",timeout:5e3})},this.fetchData=(e,t,a,s)=>{let i=this,l={url:"/employee/getEmployeeList?page="+a+"&size="+s+(void 0!==e?"&sort="+e+","+t:""),method:"post",data:i.state.formEmployeeList};i.setState({tableLoading:!0,searching:!0,manual:!0!==i.manual&&i.manual}),Object(h.e)(l).then((function(e){i.setState({page:a,size:s,total:e.data.totalElements,content:e.data.content,tableLoading:!1,searching:!1})})).catch((function(e){i.setState({tableLoading:!1,searching:!1}),Object(d.v)(e)}))},this.removeEmployeeList=e=>{let t=[];this.state.formEmployeeList&&this.state.formEmployeeList.map(a=>{a!==e.id&&t.push(a)});let a=this.state.conditionalList;a.splice(a.indexOf(e.id),1);let s=this.state.declineList;s.splice(s.indexOf(e.id),1),this.setState({formEmployeeList:t,manual:!0,conditionalList:a,declineList:s})},this.clearAllEmployees=()=>{let e=this.state.conditionalList,t=this.state.declineList;this.state.formEmployeeList&&this.state.formEmployeeList.map(a=>{e.splice(e.indexOf(a),1),t.splice(t.indexOf(a),1)}),this.setState({formEmployeeList:[]})},this.handleDraftUpdateConfirmation=()=>{if(1===this.state.sablonsuzPdfFiles.length){let e=this,t=new FormData;t.append("formSessionId",this.state.formSession.id),t.append("formParamList",JSON.stringify(this.state.formParamList)),t.append("formEmployeeList",this.state.formEmployeeList),t.append("conditionalList",this.state.conditionalList),t.append("declineList",this.state.declineList),t.append("mimeTitle",this.state.mimeTitle),t.append("mimeBody",this.state.mimeBody),t.append("removeAttachment",this.state.removeAttachment),t.append("attachment",this.state.sablonsuzPdfFiles[0]),t.append("mergeToEmployee",this.state.mergeToEmployee),Object(h.e)({url:"/formsession/updateFormSession",method:"post",data:t}).then(()=>{let e=new FormData,t=document.getElementById("sablonsuzTable").rows[0].cells[1].getElementsByTagName("textarea")[0].value;return e.append("formSessionId",this.state.formSession.id),e.append("formName",t),e.append("isAnswerable",this.state.isAnswerable.value),e.append("submissionType",this.state.submissionType.value),Object(h.e)({url:"/formsession/updateFormTemplate",method:"post",data:e})}).then(()=>{p.a.success("\u015eablonsuz Taslak G\xfcncellendi",{position:"top-right",effect:"stackslide",timeout:5e3}),e.setState({alert:null})}).catch((function(e){Object(d.v)(e)}))}else this.setState({alert:null}),p.a.error("Tasla\u011fa sadece bir PDF eklenebilir.",{position:"top-right",effect:"stackslide",timeout:5e3})},this.renderMimeInputs=()=>i.a.createElement(l.Container,null,i.a.createElement(l.Row,null,i.a.createElement(l.Col,{sm:3,style:{top:"5px"}},"E-Posta \u0130leti Konusu:"),i.a.createElement(l.Col,{sm:8},i.a.createElement(l.Input,{type:"textarea",rows:3,value:this.state.mimeTitle,style:{height:"auto",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},onChange:e=>this.setState({mimeTitle:e.target.value})}))),i.a.createElement(l.Row,null,i.a.createElement(l.Col,{sm:3,style:{top:"25px"}},"E-Posta \u0130leti \u0130\xe7eri\u011fi:"),i.a.createElement(l.Col,{sm:8},i.a.createElement(l.Input,{type:"textarea",rows:6,value:this.state.mimeBody,style:{height:"auto",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},onChange:e=>this.setState({mimeBody:e.target.value})})))),this.editHandleInputChange=e=>{const{name:t,value:a}=e.target;let s={...this.state.formParamList};if(t.toString().includes("AdSoyad")){(a.match(/^[a-zA-Z\s\xfc\xdc\u011f\u0130\u015f\u015e\xe7\xc7\xf6\xd6]+$/)||0===a.length)&&(s[t]=a)}else s[t]=a;this.setState({formParamList:s})},this.renderInputList=()=>{let e=this.state.extInputLabelList,t=0;return i.a.createElement(l.Form,{className:"col-sm-10"},e&&e.map(e=>this.renderListInputs(e,t++)))},this.renderListInputs=(e,t)=>i.a.createElement(i.a.Fragment,null,i.a.createElement(l.FormGroup,{row:!0,key:e},i.a.createElement(l.Label,{sm:5},e.includes("span")?e.replace(/span|<|>|b|[/]/g,"")+":":e+" :"),i.a.createElement(l.Col,{sm:7},!(e.includes("Tarih_")||e.includes("Tarih")||e.includes("Saat"))&&i.a.createElement(l.Input,{type:"textarea",rows:5,name:e,value:this.state.formParamList[e]||"",style:{height:"auto",border:"1px solid #E3E3E3",marginTop:"2px",padding:"3px 3px"},onChange:e=>this.editHandleInputChange(e)}),(e.includes("Tarih_")||e.includes("Tarih"))&&i.a.createElement(l.Input,{type:"date",name:e,value:this.state.formParamList[e]||"",onChange:e=>this.editHandleInputChange(e)}),e.includes("Saat")&&i.a.createElement(l.Input,{type:"time",name:e,value:this.state.formParamList[e]||"",step:"60",onChange:e=>this.editHandleInputChange(e)}))),i.a.createElement("hr",{style:{height:"3px",backgroundColor:"#E3E3E3",margin:"20px 0"}})),this.setAlertForSendWithAttachment=e=>{this.draftButtonClicked=!1,this.setState({alert:i.a.createElement(T.a,{showCancel:!0,warning:!0,confirmBtnText:"Tamam",cancelBtnText:"\u0130ptal",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Bilgilendirme",onConfirm:()=>!0===e?this.acceptOperation():this.checkParametersAndSendForEmployees(),onCancel:()=>{this.setState({alert:null,saveBtnLoading:!1}),p.a.info("\u0130\u015flem iptal edildi.",{position:"top-right",effect:"stackslide",timeout:5e3})}},i.a.createElement("div",null,i.a.createElement("label",{style:{fontSize:"20px",margin:"-10px 10px 5px 10px"}},"Y\xfcklenen dok\xfcman\u0131n tamam\u0131 se\xe7ilen t\xfcm \xe7al\u0131\u015fanlara ayr\u0131 ayr\u0131 g\xf6nderilecektir ")))})},this.setAlertSaveDraft=()=>{this.setState({alert:i.a.createElement(T.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Bilgilendirme",onConfirm:this.acceptOperation,onCancel:()=>{this.setState({alert:null,saveBtnLoading:!1}),p.a.info("\u0130\u015flem iptal edildi.",{position:"top-right",effect:"stackslide",timeout:5e3})}},i.a.createElement("div",null,i.a.createElement("label",{style:{fontSize:"20px",margin:"-10px 10px 5px 10px"}},"PDF taslak olarak kay\u0131t edilecektir onayl\u0131yor musunuz? ")))})},this.setAlertUpdateDraft=()=>{this.setState({alert:i.a.createElement(T.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"success",cancelBtnBsStyle:"default",title:"Bilgilendirme",onConfirm:this.handleDraftUpdateConfirmation,onCancel:()=>{this.setState({alert:null,saveBtnLoading:!1})}},i.a.createElement("div",null,i.a.createElement("label",{style:{fontSize:"20px",margin:"-10px 10px 5px 10px"}},"\u015eablonsuz taslak g\xfcncellenecektir onayl\u0131yor musunuz? ")))})},this.checkParametersAndSendForEmployees=()=>{this.setState({alert:null});let e={url:"/employee/checkParameters?templateId="+this.state.formTemplate.id,method:"post",data:this.state.formEmployeeList};this.setState({disabledBtn:!0}),Object(h.e)(e).then(e=>{e.data&&e.data.length?(this.setState({disabledBtn:!1}),this.setState({alert:i.a.createElement(T.a,{warning:!0,confirmBtnText:"Onayla",cancelBtnText:"\u0130ptal",confirmBtnBsStyle:"primary",cancelBtnBsStyle:"error",title:"Eksik Parametre Verisi",showCancel:!0,onConfirm:()=>{this.setState({alert:null},()=>this.acceptOperation())},onCancel:()=>this.setState({alert:null})},i.a.createElement("div",null,i.a.createElement("label",null,"Se\xe7ili form \u015fablonu i\xe7in listenizde verisi eksik olan \xe7al\u0131\u015fanlar vard\u0131r. A\u015fa\u011f\u0131da listelenmi\u015ftir. Eksik veri olmas\u0131na ra\u011fmen yine de onaylans\u0131n m\u0131?"),i.a.createElement(l.Input,{type:"textarea",rows:5,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px"},value:e.data,disable:!0})))})):this.acceptOperation()}).catch(e=>{this.setState({disabledBtn:!1}),Object(d.v)(e)})},this.acceptAndPreview=()=>{this.ifNoTemplate()?(this.draftButtonClicked=!1,this.isNoTemplateValid()&&(!this.state.mergeToEmployee&&(this.state.formEmployeeList||this.state.formEmployeeList.length>0)?this.setAlertForSendWithAttachment(!0):this.acceptOperation())):0===this.state.formEmployeeList.length?p.a.info("\xc7al\u0131\u015fan se\xe7imi yap\u0131lmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}):this.isValid()&&0===this.state.extInputLabelList.length?this.state.isAttachmentLoaded&&!this.state.mergeToEmployee&&(this.state.formEmployeeList||this.state.formEmployeeList.length>0)?this.setAlertForSendWithAttachment(!1):this.isNoTemplateValid1()&&this.checkParametersAndSendForEmployees():this.state.formParamList&&Object.keys(this.state.formParamList).length!==this.state.extInputLabelList.length||Object.values(this.state.formParamList).includes("")?F()({title:"Uyar\u0131! ",text:"Giri\u015f Yap\u0131lacak Veriler alan\u0131nda bo\u015f veri alanlar\u0131 bulunmakta, yine de form olu\u015fturulsun mu?",cancelButtonText:"Hay\u0131r",confirmButtonText:"Evet",showCancelButton:!0}).then(e=>{"cancel"===e.dismiss||"overlay"===e.dismiss?this.props.history.push({pathname:`/${this.props.peykName}/formsend/create`}):0===this.state.formEmployeeList.length?p.a.info("\xc7al\u0131\u015fan se\xe7imi yap\u0131lmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}):this.checkParametersAndSendForEmployees()}):this.checkParametersAndSendForEmployees()},this.acceptOperation=()=>{if(this.setState({alert:null}),this.state.mimeTitle&&this.state.mimeTitle.toString().includes("{")||this.state.mimeBody&&this.state.mimeBody.toString().includes("{"))p.a.error("E-posta i\xe7erik alan\u0131nda parametre verisi veya '{' karakteri bulunmamal\u0131d\u0131r. T\xfcm e-posta g\xf6nderimleri otomatik olarak 'Say\u0131n {\xc7al\u0131\u015fanAdSoyad} \u015fablonu ile gitmektedir.'",{position:"top-right",effect:"stackslide",timeout:15e3});else{let e,t=this.createUpdateFormData(),a=!!this.draftButtonClicked;if(t.append("draft",a),this.ifNoTemplate()){if(1!==this.state.sablonsuzPdfFiles.length)return void(this.draftButtonClicked?p.a.error("Tasla\u011fa sadece bir PDF eklenebilir.",{position:"top-right",effect:"stackslide",timeout:5e3}):this.acceptSablonsuzOperation(t));{let a=document.getElementById("sablonsuzTable").rows[0].cells[1].getElementsByTagName("textarea")[0].value;t.set("attachment",this.state.sablonsuzPdfFiles[0]),t.append("formName",a),t.append("isAnswerable",this.state.isAnswerable.value),t.append("submissionType",this.state.submissionType.value),e={url:"/formsession/createFormSessionWithoutTemplate",method:"post",data:t}}}else this.state.sessionIsExist?(t.append("formSessionId",this.state.formSession.id),t.append("attachment",this.state.sablonsuzPdfFiles[0]),e={url:"/formsession/updateFormSession",method:"post",data:t}):(t.append("formTemplateId",this.state.formTemplate.id),e={url:"/formsession/createFormSession",method:"post",data:t});this.setState({disabledBtn:!0}),this.timerStatus(!0),Object(h.e)(e).then(e=>{this.draftButtonClicked?(this.setState({disabledBtn:!1}),p.a.info("Taslak Kaydedildi.",{position:"top-right",effect:"stackslide",timeout:5e3})):this.waitCompletion(e.data)}).catch(e=>{Object(d.v)(e),this.setState({disabledBtn:!1,completionLoading:!1}),this.timerStatus(!1)})}},this.acceptSablonsuzOperation=e=>{let t=this.state.sablonsuzPdfFiles,a=[],s=0;e.append("isAnswerable",this.state.isAnswerable.value),e.append("submissionType",this.state.submissionType.value);for(let l of t){e.set("attachment",l);let t=document.getElementById("sablonsuzTable").rows[s++].cells[1].getElementsByTagName("textarea")[0].value;e.set("formName",t);let n={url:"/formsession/createFormSessionWithoutTemplate",method:"post",data:e};try{this.setState({disabledBtn:!0}),this.timerStatus(!0),Object(h.e)(n).then(e=>{this.waitCompletion(e.data)}).catch(e=>{p.a.error(l.name+" dosyas\u0131 i\u015flenemedi. Hata mesaj\u0131\n"+e.name+"\n"+e.message,{position:"top-right",effect:"stackslide",timeout:7e3}),a.push(l),this.setState({disabledBtn:!1,completionLoading:!1}),this.timerStatus(!1)})}catch(i){p.a.error(l.name+" dosyas\u0131 i\u015flenemedi. Server hata mesaj\u0131\n"+i.name+"\n"+i.message,{position:"top-right",effect:"stackslide",timeout:5e3}),a.push(l),this.setState({disabledBtn:!1,completionLoading:!1}),this.timerStatus(!1)}}a.length===t.length?(this.setState({completionLoading:!1,disabledBtn:!1}),p.a.info("PDF'ler y\xfcklenemedi, l\xfctfen sistem y\xf6neticinizle g\xf6r\xfc\u015f\xfcn\xfcz.",{position:"top-right",effect:"stackslide",timeout:5e3}),this.timerStatus(!1)):a.length>0&&(p.a.info(a.map(e=>e.name)+" PDF(ler)i y\xfcklenemedi, l\xfctfen sistem y\xf6neticinizle g\xf6r\xfc\u015f\xfcn\xfcz.",{position:"top-right",effect:"stackslide",timeout:1e4}),this.timerStatus(!1))},this.createUpdateFormData=()=>{let e=new FormData;if(null===this.state.formParamList)return e.append("formParamList",JSON.stringify(this.state.formParamList)),e.append("formEmployeeList",this.state.formEmployeeList),e.append("mimeTitle",this.state.mimeTitle),e.append("mimeBody",this.state.mimeBody),e.append("removeAttachment",this.state.removeAttachment),e.append("attachment",this.state.attachment),e.append("mergeToEmployee",this.state.mergeToEmployee),e.append("conditionalList",this.state.conditionalList),e.append("declineList",this.state.declineList),e;if(0===Object.keys(this.state.formParamList).length){let t={};for(let e=0;e<this.state.extInputLabelList.length;e++)t[this.state.extInputLabelList[e]]="";e.append("formParamList",JSON.stringify(t))}else{let t={...this.state.formParamList},a=Object.keys(this.state.formParamList);this.state.extInputLabelList.forEach(e=>{a.includes(e)||(t[e]="")}),Object.keys(t).forEach(e=>{e.includes("Tarih")&&(t[e]=(e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return e;return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`})(t[e]))}),e.append("formParamList",JSON.stringify(t))}return this.ifNoTemplate()&&this.state.mergeToEmployee&&!this.state.selectEmpManually.value?e.append("formEmployeeList",[]):e.append("formEmployeeList",this.state.formEmployeeList),e.append("mimeTitle",this.state.mimeTitle),e.append("mimeBody",this.state.mimeBody),e.append("removeAttachment",this.state.removeAttachment),e.append("attachment",this.state.attachment),e.append("mergeToEmployee",this.state.mergeToEmployee),e.append("conditionalList",this.state.conditionalList),e.append("declineList",this.state.declineList),e},this.waitCompletion=e=>{let t=this,a={url:"/formsession/waitIfCompletionOK",method:"post",data:e};t.setState({completionLoading:!0}),Object(h.e)(a).then(a=>{a.data?(t.state.sablonsuzPdfFiles.length>1?t.props.history.push({pathname:`/${t.props.peykName}/formsessionlist`}):t.props.history.push({pathname:`/${t.props.peykName}/formsession/${e}`}),t.setState({completionLoading:!1,disabledBtn:!1}),t.timerStatus(!1),p.a.info("Y\xfckleme tamamland\u0131.",{position:"top-right",effect:"stackslide",timeout:5e3}),t.timerStatus(!1)):setTimeout(()=>this.waitCompletion(e),2e3)}).catch(e=>{t.setState({completionLoading:!1,disabledBtn:!1}),Object(d.v)(e),t.timerStatus(!1)})},this.renderFormTemplateInfo=()=>i.a.createElement("div",{className:"row",style:{paddingLeft:this.ifNoTemplate()?"20px":"130px"}},i.a.createElement("div",{className:"col-sm-3"}),i.a.createElement("div",{className:"col-sm-9",align:"center"},i.a.createElement("label",{style:{fontWeight:"bold",display:"block",textAlign:"center",margin:"0 20px 20px 0"}},"Form \u015eablonu Bilgileri")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Form T\xfcr\xfc:")),i.a.createElement("div",{className:"col-sm-9",align:"center"},this.ifNoTemplate()&&i.a.createElement("label",{style:{fontStyle:"italic"}},"\u015eABLONSUZ"),!this.ifNoTemplate()&&i.a.createElement("label",{style:{fontStyle:"italic"}},this.state.formTemplate?this.state.formTemplate.formType.category:"")),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Form Ad\u0131:")),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-9",align:"center"},i.a.createElement("label",{style:{fontStyle:"italic",whiteSpace:"pre"}},this.state.formTemplate?this.state.formTemplate.formName:"")),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Formun Son G\xfcncellenme Tarihi:")),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-9",align:"center"},i.a.createElement("label",{style:{fontStyle:"italic"}},this.state.formTemplate&&this.state.formTemplate.updatedAt?x()(this.state.formTemplate.updatedAt.replace("T"," ").split(".")[0]).format("DD-MM-YYYY HH:mm:ss"):"")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"\u0130\u015flem Yap\u0131s\u0131")),i.a.createElement("div",{className:"col-sm-9",align:"center"},this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-8"},i.a.createElement(A.a,{name:"\u0130\u015flem",useUpperCase:!0,onlyLabel:!1,allowNew:!0,list:[{value:0,label:"Sadece Onay"},{value:1,label:"Cevap Zorunlu"}],value:this.state.isAnswerable,onChange:e=>this.setState({isAnswerable:e}),updateList:e=>this.setState({isAnswerable:e}),placeholder:"\u0130\u015flem Se\xe7iniz ..."})),!this.ifNoTemplate()&&this.state.formTemplate&&i.a.createElement("label",{style:{fontStyle:"italic"}},i.a.createElement("span",{className:"isAnswerable",style:1===this.state.formTemplate.isAnswerable?{color:"blue",fontWeigth:"bold"}:{color:"gray"}},1===this.state.formTemplate.isAnswerable?"Cevap Zorunlu":"Sadece Onay"))),this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"G\xf6nderim T\xfcr\xfc")),this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-9",align:"center"},i.a.createElement("div",{className:"col-sm-8"},i.a.createElement(A.a,{name:"G\xf6nderim T\xfcr\xfc",useUpperCase:!0,onlyLabel:!1,allowNew:!0,list:[{value:0,label:"Normal G\xf6nderim"},{value:1,label:"\xd6ncelikli"}],value:this.state.submissionType,onChange:e=>this.setState({submissionType:e}),updateList:e=>this.setState({submissionType:e}),placeholder:"\u0130\u015flem Se\xe7iniz ..."}))),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Antet")),!this.ifNoTemplate()&&i.a.createElement("div",{className:"col-sm-9",align:"center"},i.a.createElement("div",{className:this.ifNoTemplate()?"col-sm-8":"col-sm-3"},i.a.createElement(A.a,{name:"Antet",useUpperCase:!0,onlyLabel:!1,allowNew:!0,list:this.state.letterHeadList,value:this.state.selectedAntet,onChange:e=>this.onChangeAntet("antet",e),updateList:e=>this.setState({letterHeadList:e}),placeholder:"Antet Se\xe7iniz ..."}))),this.ifNoTemplate()&&this.renderMimeInputs(),this.state.isAttachmentLoaded&&i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("div",{className:"row"},i.a.createElement("hr",{style:{display:"block",height:"1px",border:"0"}})),this.ifNoTemplate()&&i.a.createElement("table",{id:"sablonsuzTable"},i.a.createElement("tbody",null,this.state.sablonsuzRows.map(e=>i.a.createElement(P,{key:e.sablonsuzRowId,index:e.sablonsuzRowId,pdfName:e.pdfName,onDelete:e=>this.handleDelete(e)})))),!this.ifNoTemplate()&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("label",null,"Eklenen Dok\xfcman: ")),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("label",{style:{fontStyle:"italic",fontWeight:"bold",verticalAlign:"sub"}},this.state.attachment.name?this.state.attachment.name:this.state.attachment.loadName)),i.a.createElement(l.Button,{title:"Kald\u0131r",color:"secondary",style:{padding:"0 7px 0 5px",marginTop:"4px"},disabled:this.state.disabledBtn,onClick:e=>this.handleDelete(e)},i.a.createElement("span",{style:{position:"relative",left:"-5px",display:"inline-block",padding:"8px 7px",height:"31px",background:"rgba(0,0,0,0.15)",borderRadius:"3px 0 0 3px"}},i.a.createElement("i",{className:"fa fa-trash"})),"Sil")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement(l.FormGroup,{check:!0},i.a.createElement(l.Label,{check:!0},i.a.createElement(l.Input,{type:"radio",name:"radio1",checked:!this.state.mergeToEmployee,onChange:()=>this.setState({mergeToEmployee:!this.state.mergeToEmployee})})," ","T\xfcm\xfcne Ekle"))),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement(l.FormGroup,{check:!0,style:{left:"-40px"}},i.a.createElement(l.Label,{check:!0},i.a.createElement(l.Input,{type:"radio",name:"radio1",checked:this.state.mergeToEmployee,onChange:()=>this.setState({mergeToEmployee:!this.state.mergeToEmployee})})," ","\xc7al\u0131\u015fanla E\u015fle\u015ftir")))),this.ifNoTemplate()&&!!this.state.mergeToEmployee&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6"}),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement(l.FormGroup,{check:!0,style:{left:"-40px"}},i.a.createElement(A.a,{name:"ellesec",onlyLabel:!1,allowNew:!1,list:[{value:0,label:"Dok\xfcmandan Otomatik E\u015fle\u015ftir"},{value:1,label:"Listeden Se\xe7"}],value:this.state.selectEmpManually,onChange:e=>this.setState({selectEmpManually:e}),updateList:e=>this.setState({selectEmpManually:e}),placeholder:"Eylem Se\xe7iniz ..."})))),this.props.location.redirectToCreatePage1&&i.a.createElement("div",{className:"col-sm-6 "},i.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"rgb(243, 157, 157)",marginLeft:"500px",marginTop:"30px"},rel:"tooltip",className:"TekBtn kaydet btn-icon",onClick:()=>{this.draftButtonClicked=!0,this.isNoTemplateValid()&&this.setAlertSaveDraft()}},"Tasla\u011f\u0131 Kaydet")),this.props.location.redirectToCreatePage&&i.a.createElement("div",{className:"col-sm-6 "},i.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"rgb(243, 157, 157)",marginLeft:"500px",marginTop:"30px"},rel:"tooltip",className:"TekBtn kaydet btn-icon",onClick:()=>{this.draftButtonClicked=!0,this.isNoTemplateValid()&&this.setAlertUpdateDraft()}},"G\xfcncelle")))),this.renderFormInputInfo=()=>i.a.createElement("div",{className:"row",style:{paddingLeft:"20px"}},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("label",{style:{fontWeight:"bold",display:"block",textAlign:"center",margin:"0 20px 20px 0"}},"Giri\u015f Yap\u0131lacak Veriler")),this.renderInputList()),this.callback=e=>{"close"===e.action&&"step:after"===e.type&&(this.setState({shouldRun:!1}),this.setState({flag:0})),"stop"!==e.action&&"reset"!==e.action&&"skip"!==e.action||(this.setState({shouldRun:!0}),this.setState({joyrideActive:!1}),this.setState({flag:0}),this.activateJoyride())},this.renderEmployeeListInfo=()=>{let e=[{Header:"Ad\u0131",accessor:"name"},{Header:"Soyad\u0131",accessor:"surname"},{accessor:[{Header:"Departman",accessor:"department"},{Header:"G\xf6rev",accessor:"jobTitle"}],Cell:e=>i.a.createElement("div",{style:{margin:0}},e.department&&i.a.createElement(o.a,{text:e.department.name}),e.department&&i.a.createElement("br",null),i.a.createElement(o.a,{text:e.jobTitle}))},{Header:"TCKN",accessor:"tckn"}];this.state.formSession&&this.state.formSession.areFormsSent||e.push({Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:e=>i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement("button",{title:"\xc7al\u0131\u015fan\u0131 Kald\u0131r",className:"btn-icon btn btn-danger btn-sm",disabled:this.state.disabledBtn,style:{margin:"0px 3px"},onClick:()=>this.removeEmployeeList(e)},i.a.createElement("i",{className:"now-ui-icons ui-1_simple-remove"}))),width:"35px"});let t=Object(u.G)(this,e,"accessor");return i.a.createElement("div",{className:"row col-sm-12",style:{display:"inline-block"}},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement("label",{style:{fontWeight:"bold",display:"block",textAlign:"center",margin:"0 20px 20px 0"}},"Se\xe7ilen \xc7al\u0131\u015fanlar")),this.state.formEmployeeList&&this.state.formEmployeeList.length>0&&i.a.createElement("div",{style:{padding:"10px"}},i.a.createElement("div",{id:"clearAllContainer",style:{position:"relative"}},i.a.createElement("button",{id:"clearAllEmployess",className:"simpleButton trash","data-toggle":"toggle",title:"Hepsini Sil",style:{position:"absolute",bottom:"5px",right:"10px"},onClick:()=>this.clearAllEmployees()})),i.a.createElement(n.a,{columns:t,content:this.state.content,loading:this.state.tableLoading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData})),!(this.state.formEmployeeList&&this.state.formEmployeeList.length>0)&&i.a.createElement("div",{className:"col-sm-12",style:{display:"inline-block",textAlign:"-webkit-center",marginLeft:"-5px"}},i.a.createElement("label",{style:{display:"table-caption",marginRight:"70px",lineHeight:"27px",border:"dashed 1.2px #bbb",borderRadius:"12px",height:"30px",width:"220px"},onClick:()=>this.setState({showModal:!0})},"L\xfctfen \xe7al\u0131\u015fan se\xe7imi yap\u0131n\u0131z.")))},this.renderPreview=()=>(this.downloadPreview(),this.state.preview?i.a.createElement(B.a,{url:this.state.preview,scale:.7}):i.a.createElement("div",null,"Y\xfckleniyor...")),this.downloadPreview=()=>{let e,t=this,a=Object.assign({},t.state.formTemplate);if(void 0===t.state.selectedAntet?a.antetId=-1:a.antetId=t.state.selectedAntet.value,a.formContent){e=a.formContent;let t=(new TextEncoder).encode(a.formContent),s=1024,i="";for(let e=0;e<t.length;e+=s)i+=String.fromCharCode.apply(null,t.slice(e,e+s));a.formContent=btoa(i)}!t.state.preview&&a&&a.id&&Object(h.e)({url:"/formtemplate/previewTemplateContent",responseType:"arraybuffer",method:"post",data:a}).then((function(e){let a=new Blob([e.data],{type:e.headers["content-type"]}),s=(window.URL||window.webkitURL).createObjectURL(a);t.setState({preview:s})})).catch((function(e){Object(d.v)(e)})).finally((function(){void 0!==e&&(a.formContent=e)}))},this.isValid=()=>!(this.state.extInputLabelList&&this.state.extInputLabelList.length>0&&this.state.formParamList&&Object.keys(this.state.formParamList).length!==this.state.extInputLabelList.length||0===Object.keys(this.state.formEmployeeList).length),this.isValidEmployee=()=>!(0===Object.keys(this.state.formEmployeeList).length),this.isNoTemplateValid1=()=>this.state.mimeTitle?!!this.state.mimeBody||(p.a.info("E-Posta \u0130leti \u0130\xe7eri\u011fi alan\u0131 bo\u015f b\u0131rak\u0131lamaz.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):(p.a.info("E-Posta \u0130leti Konusu alan\u0131 bo\u015f b\u0131rak\u0131lamaz.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1),this.isNoTemplateValid=()=>{if(!this.state.isAttachmentLoaded)return p.a.info("G\xf6nderilecek form dok\xfcman\u0131n\u0131 y\xfcklemeniz gerekmektedir.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1;{const e=document.getElementById("sablonsuzTable").rows;for(let t=0;t<e.length;t++)if(""===e[t].cells[1].getElementsByTagName("textarea")[0].value)return p.a.info("Form Ad\u0131 alan\u0131 bo\u015f b\u0131rak\u0131lamaz.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1}return this.state.mimeTitle?this.state.mimeBody?this.state.mergeToEmployee||this.state.formEmployeeList&&0!==this.state.formEmployeeList.length||this.draftButtonClicked?"Listeden Se\xe7"===this.state.selectEmpManually.label&&this.state.mergeToEmployee&&0===this.state.formEmployeeList.length&&!this.draftButtonClicked?(p.a.info("\xc7al\u0131\u015fan se\xe7imi yap\u0131lmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):this.state.formEmployeeList.length>0&&this.draftButtonClicked?(p.a.info("\xc7al\u0131\u015fan se\xe7imi taslak kaydetme veya g\xfcncelleme i\u015fleminde yap\u0131lamaz",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):!this.state.mergeToEmployee||!this.draftButtonClicked||(p.a.info("\xc7al\u0131\u015fan e\u015fle\u015ftirmesi taslak kaydetme veya g\xfcncelleme i\u015fleminde yap\u0131lamaz",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):(p.a.info("\xc7al\u0131\u015fan se\xe7imi yap\u0131lmal\u0131d\u0131r.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):(p.a.info("E-Posta \u0130leti \u0130\xe7eri\u011fi alan\u0131 bo\u015f b\u0131rak\u0131lamaz.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1):(p.a.info("E-Posta \u0130leti Konusu alan\u0131 bo\u015f b\u0131rak\u0131lamaz.",{position:"top-right",effect:"stackslide",timeout:5e3}),!1)},this.state={alert:null,selection:[],selectionName:[],formSession:null,formTemplate:null,formEmployeeList:[],formParamList:{},extInputLabelList:[],conditionalList:[],declineList:[],loading:!1,tableLoading:!1,showModal:!1,displaySelectInputDialog:!1,manual:!1,content:[],total:0,searching:!1,searchQuery:void 0,page:0,size:10,searchKey:"",isKepOwner:!1,sessionIsExist:!1,isAttachmentLoaded:!1,removeAttachment:!1,attachment:null,mergeToEmployee:!1,date:!0,disabledBtn:!1,selectedAntet:{value:"-1",label:"Antetsiz"},isAnswerable:{value:0,label:"SADECE ONAY"},submissionType:{value:0,label:"NORMAL G\xd6NDER\u0130M"},selectEmpManually:{value:0,label:"Dok\xfcmandan Otomatik E\u015fle\u015ftir"},steps:[{target:".card-title",content:"form1 ",placement:"center"},{target:"textarea.form-control:nth-child(1)",content:"form2 ",placement:"auto"},{target:"input.form-control:nth-child(1)",content:"form3 ",placement:"auto"},{target:".FormRenk:nth-child(2) div",content:"form4 ",placement:"auto"},{target:"button.zocial.User.btn.btn-secondary",content:"form5 ",placement:"auto"},{target:"button.zocial.Ek.btn.btn-secondary",content:"form5 ",placement:"auto"},{target:"button.zocial.Onay.btn.btn-secondary",content:"form5 ",placement:"auto"}],locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla"},joyrideActive:!1,shouldRun:!0,width:window.innerWidth,flag:0,stop:null,surveyFormParameters:[],letterHeadList:[],value:"",sablonsuzPdfFiles:[],sablonsuzRows:[],isTemplate:!1,isDecline:!1}}componentDidMount(){this.setState({isKepOwner:this.props.isKepOwner,isTemplate:this.ifNoTemplate()}),this.readAntets(),this.readMailTemplate()}timerStatus(e){this.props.onTimerStatus(e)}activateJoyride(){!1===this.state.joyrideActive&&(this.setState({flag:0}),this.setState({joyrideActive:!0}),this.state.width<1e3&&this.setState({flag:1}))}onChangeAntet(e,t){this.setState({selectedAntet:t,preview:!1}),this.renderPreview()}render(){let e=this.state.steps,t=this.state.locale;return i.a.createElement("div",{className:"row baseBackground"},this.state.alert,this.state.joyrideActive&&i.a.createElement(z.a,{disableBeacon:!1,autoStart:!0,locale:t,steps:e,continuous:!0,run:this.state.shouldRun,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,scrollToSteps:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClicks:!1,keyboardNavigation:!0,hideBackButton:!1,disableOverlayClose:!0,callback:this.callback,holePadding:0,shouldRun:this.state.shouldRun,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}}),i.a.createElement(l.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},i.a.createElement(C.a,{offsetWidth:this.props.offsetWidth,innerWidth:window.innerWidth,btnDisabled:this.state.btnDisabled,selection:this.state.selection,name:"archiveInvoiceList"},i.a.createElement(r.a,{position:"leftSide",className:"zocial GeriDon",style:{fontSize:"x-small"},label:"Geri",title:"\xd6nceki Sayfaya Git",disabled:this.state.disabledBtn,onClick:()=>{"formsession"===this.props.location.previousPage&&this.props.match&&this.props.match.params?this.props.history.push({pathname:`/${this.props.peykName}/formsession/${this.props.match.params.formSessionId}`}):"sendhealthform"===this.props.location.previousPage?this.props.history.push({pathname:`/${this.props.peykName}/sendhealthform`}):"sendZimmetForm"===this.props.location.previousPage?this.props.history.push({pathname:`/${this.props.peykName}/sendZimmetForm`}):"sendISGForm"===this.props.location.previousPage?this.props.history.push({pathname:`/${this.props.peykName}/sendISGForm`}):"sendKVKKForm"===this.props.location.previousPage?this.props.history.push({pathname:`/${this.props.peykName}/sendKVKKForm`}):this.props.location.redirectToCreatePage?this.props.history.push({pathname:`/${this.props.peykName}/formtemplate/`}):this.props.history.push({pathname:`/${this.props.peykName}/formsend`})}}),!(this.ifNoTemplate()&&this.state.mergeToEmployee&&!this.state.selectEmpManually.value)&&i.a.createElement(r.a,{position:"leftSide",className:"zocial User",style:{fontSize:"x-small"},label:"\xc7al\u0131\u015fan Ekle",title:"\xc7al\u0131\u015fanlar\u0131 Ekle",disabled:this.state.disabledBtn,onClick:()=>this.setState({showModal:!0})}),i.a.createElement(r.a,{position:"leftSide",className:"zocial Ek",style:{fontSize:"x-small"},disabled:this.state.disabledBtn,label:"Dok\xfcman Ekle",title:"Formlara Ek Dok\xfcman Ekle",onClick:this.openAttachmentLoad}),i.a.createElement(r.a,{position:"leftSide",className:"zocial Onay",style:{fontSize:"x-small",backgroundColor:"forestgreen"},label:"Onayla",title:"Bilgileri onayla",disabled:this.state.disabledBtn,onClick:this.acceptAndPreview}),i.a.createElement("div",{className:"helpButtonContainer",style:{marginRight:"4em",marginTop:"1.4em"}},i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon"})),this.state.stop&&i.a.createElement("div",{className:"nav-item dropdown  videoIconContainer",style:{display:"inline-block",paddingRight:"30px"}},i.a.createElement("button",{className:"nav-link  videoIconButton","data-toggle":"dropdown","aria-haspopup":"true",id:"navbarDropdownMenuLink","aria-expanded":"false"},i.a.createElement("span",{className:"tooltipText"},"Yardimci Videolar"),i.a.createElement("i",{className:"fab fa-youtube videoIcon"})),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right",id:"showVideos","aria-labelledby":"videosLink"},this.videos.map((e,t)=>i.a.createElement("a",{key:t,className:"dropdown-item",onClick:()=>this.switchVideo(e)},e.title))))))),i.a.createElement(l.CardHeader,{style:{marginTop:"56px"}},!this.state.completionLoading&&i.a.createElement(l.CardTitle,{tag:"h4"},"Form \u0130\u015flemi (D\xfczenle)"),this.ifNoTemplate()&&i.a.createElement("div",{className:"card-header"},i.a.createElement(l.Label,null,'\u015eablondan ba\u011f\u0131ms\u0131z form g\xf6nderimi yapmak i\xe7in, \xe7al\u0131\u015fanlar ad\u0131na haz\u0131rlanan formlar\u0131 dok\xfcman ekleme alan\u0131ndan y\xfcklemeniz gerekmektedir. \u015eablondan ba\u011f\u0131ms\u0131z form g\xf6nderiminde parametre e\u015fle\u015ftirilmesi yap\u0131lmamaktad\u0131r. E\u011fer her \xe7al\u0131\u015fana ayr\u0131 bir form g\xf6ndermek istiyorsan\u0131z, bu formlar\u0131 i\xe7lerine tckn bar\u0131nd\u0131racak \u015fekilde ayr\u0131 sayfalar halinde haz\u0131rlaman\u0131z beklenmektedir. Bu durumda haz\u0131rlad\u0131\u011f\u0131n\u0131z dok\xfcman\u0131, dok\xfcman ekleme alan\u0131ndan y\xfckleyiniz ve "\xc7al\u0131\u015fanla E\u015fle\u015ftir" se\xe7imini se\xe7iniz.')),this.state.completionLoading&&i.a.createElement(l.Col,null,i.a.createElement(l.CardTitle,{tag:"h4"},"Form \u0130\u015flemi (D\xfczenle)...Y\xdcKLEN\u0130YOR\xa0"),i.a.createElement("div",{style:{display:"inline-block",marginRight:"8px"}},i.a.createElement(w.a,{type:"balls",color:"#2c2c2c",height:24,width:24})))),!this.ifNoTemplate()&&i.a.createElement(l.CardBody,null,i.a.createElement(l.Row,{style:{margin:"0 0 0 0"}},i.a.createElement("div",{className:"FormRenk",style:{paddingLeft:"0px",textAlign:"center",right:"2px"}},this.renderFormTemplateInfo()))),i.a.createElement(l.CardBody,null,i.a.createElement(l.Row,{style:{margin:"0 0 0 0"}},i.a.createElement("div",{className:-1===this.props.location.templateId?"col-sm-6":"col-sm-6 formsend-preview",style:{paddingLeft:"0px",textAlign:"center",height:"750px",overflow:"auto",border:"2px solid #e7e7e7",borderRadius:"6px"}},!this.ifNoTemplate()&&this.renderPreview(),this.ifNoTemplate()&&this.renderFormTemplateInfo()),i.a.createElement("div",{className:"col-sm-6",style:{paddingLeft:"5px",textAlign:"center"}},this.state.extInputLabelList&&this.state.extInputLabelList.length>0&&i.a.createElement("div",{className:"FormRenk col-sm-12"},this.renderFormInputInfo()),!(this.ifNoTemplate()&&this.state.mergeToEmployee&&!this.state.selectEmpManually.value)&&i.a.createElement("div",{className:"FormRenk col-sm-12"},this.renderEmployeeListInfo())))),this.state.showModal&&i.a.createElement(c.a,{isOpen:this.state.showModal,selectedList:this.state.formEmployeeList,sidebarMenus:this.props.sidebarMenus,reload:e=>this.props.reload(e),close:()=>this.setState({showModal:!1}),conditionalList:this.state.conditionalList,declineList:this.state.declineList,completed:(e,t,a)=>this.setState({formEmployeeList:e,conditionalList:t,declineList:a,manual:!0,showModal:!1}),removeEmployee:()=>this.removeEmployee,noTemplate:this.state.isTemplate,decline:this.state.isDecline}),this.state.showUploadModal&&i.a.createElement(L,{id:this.state.formTemplateId,title:"Dok\xfcman Ekle",sablonsuzRows:this.state.sablonsuzRows,onUpload:e=>this.uploadAttachment(e),modal:this.state.showUploadModal,toggleModal:(e,t)=>this.setState({showUploadModal:e,manual:t})}))}}t.default=D}}]);
//# sourceMappingURL=36.608f7a68.chunk.js.map