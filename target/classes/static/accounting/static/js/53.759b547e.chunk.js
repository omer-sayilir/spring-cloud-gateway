(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[53],{1527:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),i=(a(92),a(2)),r=a(61),n=a(19),o=a(3),c=(a(82),a(16)),m=a(5),d=a(38),h=a.n(d),p=a(12),u=a(23),g=a(21),E=a(9),S=a.n(E),v=a(1287),b=a(1288),y=(a(1383),a(54)),D=a.n(y),T=(a(218),a(20)),f=a.n(T);class I extends s.Component{constructor(e){super(e),this.employeeSize=0,this.notifcationType=[{value:"SMS",label:"SMS"},{value:"EMAIL",label:"EMAIL"},{value:"IVR",label:"IVR"}],this.infoSms=[{value:"ALL",label:"T\xfcm\xfc"},{value:"DELIVERED",label:"\u0130letildi"},{value:"PENDING",label:"Bekliyor"},{value:"NOT_DELIVERED",label:"\u0130letilemedi"},{value:"NOT_QUERIED_YET",label:"SMS Durumu Hen\xfcz Sorgulanmad\u0131"},{value:"TIME_OUT",label:"Zaman A\u015f\u0131m\u0131"},{value:"REPEATED",label:"M\xfckerrer"},{value:"NO_VALID_RECEIVERS",label:"Hatal\u0131 veya k\u0131s\u0131tl\u0131 numara"},{value:"GENERAL_ERROR",label:"Bilinmeyen Hata"},{value:"XML_ERROR",label:"XML Post parametresi bo\u015f veya ge\xe7ersiz."},{value:"AUTH_FAILED",label:"Hatal\u0131 kullan\u0131c\u0131 ad\u0131 veya \u015fifre."},{value:"USER_DENIED",label:"Eri\u015fim engellendi."},{value:"BANNED_ORIGINATOR",label:"Ba\u015fl\u0131k kullan\u0131lamaz."},{value:"ORIGINATOR_INVALID",label:"Ba\u015fl\u0131k onay bekliyor."},{value:"ORIGINATOR_UNCONFIRMED",label:"Ba\u015fl\u0131k sistemde bulunamad\u0131."},{value:"NO_RECEIVERS",label:"Al\u0131c\u0131 numara bulunamad\u0131."},{value:"NO_VALID_RECEIVERS",label:"Ge\xe7erli al\u0131c\u0131 numara bulunamad\u0131."},{value:"ORIGINATOR_UNCONFIRMED",label:"Ba\u015fl\u0131k sistemde bulunamad\u0131."},{value:"NO_TEXT",label:"Sms mesaj\u0131 bo\u015f."},{value:"BADWORDS_INTEXT",label:"Sms mesaj\u0131 i\xe7eri\u011finde uygunsuz kelimeler tespit edildi."},{value:"NOT_ENOUGH_CREDITS",label:"Kredi yetersiz."},{value:"NO_MESSAGEID",label:"Ge\xe7ersiz mesaj id de\u011feri"},{value:"NO_RECEIVERIDS",label:"Hi\xe7 al\u0131c\u0131 id si bulunamad\u0131."},{value:"NO_STATUS",label:"SMS iletim Durumu bilinmiyor."},{value:"INVALID_USERNAME",label:"Ge\xe7ersiz kullan\u0131c\u0131 ad\u0131"},{value:"PARAMETER_ERROR",label:"Hatal\u0131 sorgulama"},{value:"REQUEST_BORDER_ACHIEVED",label:"G\xf6nderim s\u0131n\u0131r a\u015f\u0131m\u0131"},{value:"TEXT_ERROR",label:"Mesaj metninde hata"},{value:"UNDEFINED_MESSAGE_HEADER",label:"Mesaj ba\u015fl\u0131\u011f\u0131 tan\u0131ml\u0131 de\u011fil"},{value:"REPEATED_TIME_OUT",label:"M\xfckerrer G\xf6nderim s\u0131n\u0131r a\u015f\u0131m\u0131"}],this.infoIVR=[{value:void 0,label:"T\xfcm\xfc"},{value:"-1",label:"Ses dosyas\u0131 dinletilen numaran\u0131n \xe7a\u011fr\u0131 esnas\u0131nda kapatmas\u0131"},{value:"0",label:"Cevaplanmay\u0131 bekleyenler"},{value:"1",label:"Cevaplananlar / A\xe7an"},{value:"2",label:"Cevaplanmayanlar"},{value:"3",label:"Ula\u015f\u0131lamayan"},{value:"4",label:"\xdccretlendirelemeyen / Varl\u0131k Yetersiz"},{value:"5",label:"Iptal Edilen"},{value:"6",label:"Ba\u015flat\u0131lamayan \xe7a\u011fr\u0131lar, durdurulan, hata alanlar"},{value:"7",label:"Me\u015fgule Al\u0131nan"},{value:"8",label:"Numara Ge\xe7ersiz"},{value:"9",label:'"S\xfcresi Doldu"'},{value:"30",label:"Ge\xe7ersiz Kullan\u0131c\u0131 Ad\u0131 ve \u015eifre"},{value:"60",label:"Kay\u0131t Bulunamad\u0131"},{value:"100",label:"Sistem Hatas\u0131"}],this.infoEmail=[{value:"ALL",label:"T\xfcm\xfc"},{value:"SUCCESS",label:"G\xf6nderildi"},{value:"ERROR",label:"G\xf6nderilemedi"}],this.handleChangeSms=e=>{this.setState({selectedSmsOption:e}),this.handleSearchSms()},this.handleChangeIVR=e=>{this.setState({selectedIVROption:e}),this.handleSearchIVR()},this.handleChangeEmail=e=>{this.setState({selectedEmailOption:e}),this.handleSearchEmail()},this.handleChangeType=e=>{this.setState({selectedType:e})},this.handleChangeDateTimeField=(e,t)=>{!(t.length>0)||t.match(/^[0-9\s\-:]+$/)&&S()(t,"YYYY-MM-DD",!0).isValid()?(t&&t.toString().length&&(t=t.format("YYYY-MM-DD").toString()),this.setState({[e]:t,dateValidation:!0})):this.setState({dateValidation:!1})},this.state={alert:null,loadingSms:!1,loadingIvr:!1,loadingEmail:!1,showModal:!1,valid:{},manualSms:!1,manualIvr:!1,manualEmail:!1,listSms:[],listIvr:[],listEmail:[],searchingSms:!1,searchingIvr:!1,searchingEmail:!1,searchQuerySms:void 0,searchQueryIvr:void 0,searchQueryEmail:void 0,pageSms:0,pageIvr:0,pageEmail:0,sizeSms:10,sizeIvr:10,sizeEmail:10,totalSms:0,totalIvr:0,totalEmail:0,selected:void 0,selection:[],selectedAll:!1,isKepOwner:!1,selectedSmsOption:this.infoSms[0],selectedIVROption:this.infoIVR[0],selectedEmailOption:this.infoEmail[0],smsOptions:this.infoSms,ivrOptions:this.infoIVR,emailOptions:this.infoEmail,selectedType:this.notifcationType[0],typeOptions:this.notifcationType,isLoading:!1,infoType:"info",excelIsDownloading:!1,startDateAll:"",finishDateAll:"",meanSmsCountForADocument:0,totalTime:0,selectedEmployeeLimit:100},this.handleChangeSms=this.handleChangeSms.bind(this),this.handleChangeEmail=this.handleChangeEmail.bind(this),this.handleChangeIVR=this.handleChangeIVR.bind(this),this.handleChangeType=this.handleChangeType.bind(this),this.handleSearchSms=this.handleSearchSms.bind(this),this.handleSearchEmail=this.handleSearchEmail.bind(this),this.handleSearchIVR=this.handleSearchIVR.bind(this),this.fetchDataSms=this.fetchDataSms.bind(this),this.fetchDataEmail=this.fetchDataEmail.bind(this),this.fetchDataIVR=this.fetchDataIVR.bind(this),this.downloadMedia=this.downloadMedia.bind(this),this.getTrStyles=this.getTrStyles.bind(this),this.handleChangeDateTimeField=this.handleChangeDateTimeField.bind(this),this.smsDataStatistic=this.smsDataStatistic.bind(this),this.clear=this.clear.bind(this)}componentWillMount(){this.setState({isKepOwner:this.props.isKepOwner})}clear(){this.setState({pageSms:0,pageIvr:0,pageEmail:0,totalSms:0,totalIvr:0,totalEmail:0,sizeSms:10,sizeIvr:10,sizeEmail:10,listSms:[],listIvr:[],listEmail:[]})}handleSearchSms(e){0===this.props.selectedEmployees.length?f()({title:"Uyar\u0131 ! ",text:"L\xfctfen listeden \xe7al\u0131\u015fan se\xe7iniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.props.selectedEmployees.length>this.state.selectedEmployeeLimit?f()({title:"Uyar\u0131 ! ",text:"En fazla "+this.state.selectedEmployeeLimit+" \xe7al\u0131\u015fan i\xe7in sorgulama yapabilirsiniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.setState({searchQuerySms:e,searching:!0,selection:[]},()=>this.fetchDataSms(this.state.accessorSms,this.state.directionSms,0,this.state.sizeSms))}handleSearchEmail(e){0===this.props.selectedEmployees.length?f()({title:"Uyar\u0131 ! ",text:"L\xfctfen listeden \xe7al\u0131\u015fan se\xe7iniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.props.selectedEmployees.length>this.state.selectedEmployeeLimit?f()({title:"Uyar\u0131 ! ",text:"En fazla "+this.state.selectedEmployeeLimit+" \xe7al\u0131\u015fan i\xe7in sorgulama yapabilirsiniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.setState({searchQueryEmail:e,searching:!0,selection:[]},()=>this.fetchDataEmail(this.state.accessorEmail,this.state.directionEmail,0,this.state.sizeEmail))}handleSearchIVR(e){0===this.props.selectedEmployees.length?f()({title:"Uyar\u0131 ! ",text:"L\xfctfen listeden \xe7al\u0131\u015fan se\xe7iniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.props.selectedEmployees.length>this.state.selectedEmployeeLimit?f()({title:"Uyar\u0131 ! ",text:"En fazla "+this.state.selectedEmployeeLimit+" \xe7al\u0131\u015fan i\xe7in sorgulama yapabilirsiniz!",confirmButtonText:"Tamam"}).then(()=>{}):this.setState({searchQueryIvr:e,searchingIvr:!0,selection:[]},()=>this.fetchDataIVR(this.state.accessorIvr,this.state.directionIvr,0,this.state.sizeIvr))}getTrStyles(e){return e.statusType&&"ACTIVE"!==e.statusType?{backgroundColor:"lightgray",webkitTextFillColor:"darkgray"}:{}}fetchDataSms(e,t,a,s){let l=this;if(void 0===l.props.selectedCustomer||-1===l.props.selectedCustomer)return;let i,r=void 0!==e?"&sort="+e+","+t:"&sort=recordId,desc";if(void 0!==l.state.selectedSmsOption&&null!==l.state.selectedSmsOption&&(i="&customerId="+l.props.selectedCustomer.value,"ALL"!==l.state.selectedSmsOption.value&&(i=i+"&shortStatus="+encodeURIComponent(l.state.selectedSmsOption.value))),void 0===i)return;let n=l.props.selectedEmployees.map(e=>e),c={url:"/customizedNtfDataController/smsStatus?page="+a+"&size="+s+r+i,method:"post",data:{employeeList:n,startDateAll:l.state.startDateAll,finishDateAll:l.state.finishDateAll}};l.setState({loadingSms:!0,searchingSms:!0,manualSms:!0!==l.manualSms&&l.manualSms}),Object(m.e)(c).then((function(e){l.setState({pageSms:a,sizeSms:s,totalSms:e.data.totalElements,listSms:e.data.content,loadingSms:!1,searchingSms:!1})})).catch((function(e){l.setState({loadingSms:!1,searching:!1}),Object(o.v)(e)}))}fetchDataEmail(e,t,a,s){let l=this;if(void 0===l.props.selectedCustomer||-1===l.props.selectedCustomer)return;let i,r=void 0!==e?"&sort="+e+","+t:"&sort=recordId,desc";if(void 0!==l.state.selectedEmailOption&&null!==l.state.selectedEmailOption&&(i="&customerId="+l.props.selectedCustomer.value,"ALL"!==l.state.selectedEmailOption.value&&(i=i+"&shortStatus="+encodeURIComponent(l.state.selectedEmailOption.value))),void 0===i)return;let n=l.props.selectedEmployees.map(e=>e),c={url:"/customizedNtfDataController/emailStatus?page="+a+"&size="+s+r+i,method:"post",data:{employeeList:n,startDateAll:l.state.startDateAll,finishDateAll:l.state.finishDateAll}};l.setState({loadingEmail:!0,searchingEmail:!0,manualEmail:!0!==l.manualEmail&&l.manualEmail}),Object(m.e)(c).then((function(e){l.setState({pageEmail:a,sizeEmail:s,totalEmail:e.data.totalElements,listEmail:e.data.content,loadingEmail:!1,searchingEmail:!1})})).catch((function(e){l.setState({loadingEmail:!1,searchingEmail:!1}),Object(o.v)(e)}))}fetchDataIVR(e,t,a,s){let l=this;if(void 0===l.props.selectedCustomer||-1===l.props.selectedCustomer)return;let i=void 0!==e?"&sort="+e+","+t:"&sort=recordId,desc",r="&customerId="+l.props.selectedCustomer.value;if(void 0!==l.state.selectedIVROption&&null!==l.state.selectedIVROption&&void 0!==l.state.selectedIVROption.value&&(r=r+"&shortStatus="+encodeURIComponent(l.state.selectedIVROption.value)),void 0===r)return;let n=l.props.selectedEmployees.map(e=>e),c={url:"/customizedNtfDataController/ivrStatus?page="+a+"&size="+s+i+r,method:"post",data:{employeeList:n,startDateAll:l.state.startDateAll,finishDateAll:l.state.finishDateAll}};l.setState({loadingIvr:!0,searchingIvr:!0,manualIvr:!0!==l.manualIvr&&l.manualIvr}),Object(m.e)(c).then((function(e){l.setState({pageIvr:a,sizeIvr:s,totalIvr:e.data[0].totalElements,listIvr:e.data[0].content,loadingIvr:!1,searchingIvr:!1,totalTime:e.data[1]})})).catch((function(e){l.setState({loadingIvr:!1,searchingIvr:!1}),Object(o.v)(e)}))}smsDataStatistic(){let e,t=this;if(void 0===t.props.selectedCustomer||-1===t.props.selectedCustomer)return;if(void 0!==t.state.selectedSmsOption&&null!==t.state.selectedSmsOption&&(e="customerId="+t.props.selectedCustomer.value+"&status="+encodeURIComponent(t.state.selectedSmsOption.value)),void 0===e)return;let a={url:"/customizedNtfDataController/smsStatistic?"+e,method:"post",data:{employeeList:t.props.selectedEmployees.map(e=>e),startDateAll:t.state.startDateAll,finishDateAll:t.state.finishDateAll}};Object(m.e)(a).then((function(e){t.setState({meanSmsCountForADocument:e.data})})).catch((function(e){Object(o.v)(e)}))}downloadMedia(){let e,t=this;if(void 0===t.props.selectedCustomer||-1===t.props.selectedCustomer)return;if(void 0!==t.state.selectedSmsOption&&null!==t.state.selectedSmsOption){let a="ALL"===t.state.selectedSmsOption.value?"":"&shortStatus="+encodeURIComponent(t.state.selectedSmsOption.value);e="customerId="+t.props.selectedCustomer.value+a}if(void 0===e)return;let a={url:"/customizedNtfDataController/downloadSMSStatusReport?"+e,responseType:"arraybuffer",method:"post",data:{employeeList:t.props.selectedEmployees.map(e=>e),startDateAll:t.state.startDateAll,finishDateAll:t.state.finishDateAll}};t.setState({excelIsDownloading:!0}),Object(m.e)(a).then((function(e){let a=document.createElement("a");a.href=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"})),a.download="SmsDurumListesi.xlsx",document.body.appendChild(a),a.click(),t.setState({excelIsDownloading:!1})})).catch((function(e){t.setState({excelIsDownloading:!1}),Object(o.v)(e)}))}renderSMSTable(){let e=[];this.state.listSms&&this.state.listSms instanceof Array&&this.state.listSms.map(t=>{e.push(t.recordId)});let t=[{Header:"Ad Soyad",sortable:!1,accessor:"receiverTitle"},{Header:"Telefon Numaras\u0131",accessor:"receiver"},{Header:"G\xf6nderilme Tarihi",sortable:!0,accessor:"createdAt",Cell:e=>l.a.createElement("div",{style:{margin:0}},S()(e.createdAt).isValid()?S()(e.createdAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"\u0130letilme Tarihi",sortable:!1,accessor:"arrivedAt",Cell:e=>l.a.createElement("div",{style:{margin:0}},S()(e.arrivedAt).isValid()?S()(e.arrivedAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"SMS Durumu",accessor:"status"}],a=Object(p.I)(this,t,"accessor",this.state.isKepOwner);return l.a.createElement(n.a,{columns:a,content:this.state.listSms,loading:this.state.loadingSms,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.totalSms,page:this.state.pageSms,size:this.state.sizeSms,manual:this.state.manualSms,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchDataSms})}renderEMAILTable(){let e=[{Header:"Ad Soyad",sortable:!1,accessor:"receiverTitle"},{Header:"Email adresi",accessor:"receiver"},{Header:"G\xf6nderilme Tarihi",sortable:!0,accessor:"createdAt",Cell:e=>l.a.createElement("div",{style:{margin:0}},S()(e.createdAt).isValid()?S()(e.createdAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"Email Durumu",accessor:"status"}];return l.a.createElement(n.a,{columns:e,content:this.state.listEmail,loading:this.state.loadingEmail,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.totalEmail,page:this.state.pageEmail,size:this.state.sizeEmail,manual:this.state.manualEmail,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchDataEmail})}renderIVRTable(){let e=[{Header:"Ad Soyad",sortable:!0,accessor:"receiverTitle"},{Header:"Telefon Numaras\u0131",accessor:"receiver"},{Header:"G\xf6nderilme Tarihi",sortable:!0,accessor:"sentAt",Cell:e=>l.a.createElement("div",{style:{margin:0}},S()(e.sentAt).isValid()?S()(e.sentAt).format("DD-MM-YYYY HH:mm:ss"):"")},{Header:"IVR Durumu",accessor:"status"},{Header:"S\xfcre(Sn)",accessor:"ivrTime"}];return l.a.createElement(n.a,{columns:e,content:this.state.listIvr,loading:this.state.loadingIvr,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.totalIvr,page:this.state.pageIvr,size:this.state.sizeIvr,manual:this.state.manualIvr,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchDataIVR})}render(){return l.a.createElement("div",{className:"col-sm-12 satirBasi"},l.a.createElement("div",{className:"card-body"},l.a.createElement(v.a,{className:"col-sm-12"},l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 row"},l.a.createElement("h4",{className:"card-title col-sm-3"},"Bilgilendirme T\xfcr\xfc"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(u.a,{value:this.state.selectedType,clearable:!1,placeholder:"Se\xe7iniz...",onChange:this.handleChangeType,options:this.state.typeOptions}))))),l.a.createElement(v.a,{className:"col-sm-12"},l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{className:"radio-buttons col-sm-12 row"},l.a.createElement("h4",{className:"card-title",style:{marginLeft:50,marginRight:10}},"Ba\u015flang\u0131\xe7 Tarihi"),l.a.createElement(D.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:S()(this.state.startDateAll,"YYYY-MM-DD",!0).isValid()?S()(this.state.startDateAll).format("DD-MM-YYYY"):this.state.startDateAll,dateFormat:"DD-MM-YYYY",timeFormat:"",style:{marginLeft:10},onChange:e=>this.handleChangeDateTimeField("startDateAll",e)}),l.a.createElement("h4",{className:"card-title",style:{marginLeft:10}}," - "),l.a.createElement("h4",{className:"card-title",style:{marginLeft:10,marginRight:10}},"Biti\u015f Tarihi"),l.a.createElement(D.a,{locale:"tr",className:"datepicker",input:!0,closeOnSelect:!0,value:S()(this.state.finishDateAll,"YYYY-MM-DD",!0).isValid()?S()(this.state.finishDateAll).format("DD-MM-YYYY"):this.state.finishDateAll,dateFormat:"DD-MM-YYYY",timeFormat:"",onChange:e=>this.handleChangeDateTimeField("finishDateAll",e)})))),l.a.createElement(v.a,{className:"col-sm-12"},"SMS"===this.state.selectedType.value&&l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 row"},l.a.createElement("h4",{className:"card-title col-sm-3"},"SMS Durumlar\u0131"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(u.a,{value:this.state.selectedSmsOption,clearable:!1,noResultsText:"Veri yok",clearValueText:"Temizle",placeholder:"Se\xe7iniz...",onChange:this.handleChangeSms,options:this.state.smsOptions})),l.a.createElement("div",{className:"col-sm-3"},l.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"linear-gradient(rgba(159, 208, 55, 0.6), #9fd037)",marginRight:"30px"},rel:"tooltip",className:"  TekBtn search btn-icon sag-1 pull-right",onClick:this.handleSearchSms},"Arama Yap"))),this.renderSMSTable()),"EMAIL"===this.state.selectedType.value&&l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 row"},l.a.createElement("h4",{className:"card-title col-sm-3"},"Email Durumlar\u0131"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(u.a,{value:this.state.selectedEmailOption,clearable:!1,noResultsText:"Veri yok",clearValueText:"Temizle",placeholder:"Se\xe7iniz...",onChange:this.handleChangeEmail,options:this.state.emailOptions})),l.a.createElement("div",{className:"col-sm-3"},l.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"linear-gradient(rgba(159, 208, 55, 0.6), #9fd037)",marginRight:"30px"},rel:"tooltip",className:"  TekBtn search btn-icon sag-1 pull-right",onClick:this.handleSearchEmail},"Arama Yap"))),this.renderEMAILTable()),"IVR"===this.state.selectedType.value&&l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 row"},l.a.createElement("h4",{className:"card-title col-sm-3"},"IVR Durumlar\u0131"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement(u.a,{value:this.state.selectedIVROption,clearable:!1,noResultsText:"Veri yok",clearValueText:"Temizle",placeholder:"Se\xe7iniz...",onChange:this.handleChangeIVR,options:this.state.ivrOptions})),l.a.createElement("div",{className:"col-sm-3 "},l.a.createElement("button",{type:"button","data-toggle":"tooltip","data-placement":"bottom",style:{background:"linear-gradient(rgba(159, 208, 55, 0.6), #9fd037)",marginRight:"30px"},rel:"tooltip",className:"  TekBtn search btn-icon sag-1 pull-right",onClick:this.handleSearchIVR},"Arama Yap"))),this.renderIVRTable(),l.a.createElement(v.a,null,l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{style:{float:"left"}},l.a.createElement("p",null,"Toplam s\xfcre : ",this.state.totalTime," sn"))))),"SMS"===this.state.selectedType.value&&l.a.createElement(v.a,null,l.a.createElement(b.a,{className:"col-sm-12"},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(g.a,{position:"rightSide",className:"zocial Excel",style:{fontSize:"x-small"},label:"Excel'e Aktar",title:"Listedeki \xe7al\u0131\u015fanlara g\xf6nderilen smslerin iletim durumu",disabled:this.state.excelIsDownloading,onClick:this.downloadMedia})))))))}}var C=I,A=a(100);class O extends s.Component{constructor(e){super(e),this.handleChange=e=>{e&&(this.setState({selectedCustomer:e}),-1!==e&&this.handleSearch())},this.state={alert:null,loading:!1,showModal:!1,displayDetailDialog:!1,valid:{},manual:!1,list:[],totalIdList:[],total:0,searching:!1,searchQuery:void 0,page:0,size:10,selected:void 0,selection:[],selectedAll:!1,isKepOwner:!1,selectedCustomer:-1,options:[],isLoading:!1},this.fetchData=this.fetchData.bind(this),this.handleSearch=this.handleSearch.bind(this),this.getTrStyles=this.getTrStyles.bind(this),this.openDetailDialog=this.openDetailDialog.bind(this),this.isSelected=this.isSelected.bind(this),this.closeDetailDialog=this.closeDetailDialog.bind(this),this.getCustomers=this.getCustomers.bind(this),this.handleChange=this.handleChange.bind(this),this.clearChild=this.clearChild.bind(this),this.child=l.a.createRef()}componentWillMount(){this.setState({isKepOwner:this.props.isKepOwner,jobTitlesData:Object(p.y)()})}componentDidMount(){this.getCustomers()}clearChild(){this.child.current.clear()}getCustomers(){let e=this;e.setState({isLoading:!0});Object(m.e)({url:"/customer/fetchAllPeykCustomersForAdmin",method:"get"}).then((function(t){let a=[];t.data.map(e=>{a.push({value:e.recordId,label:e.formattedName})}),e.setState({options:a,loading:!1,searching:!1,isLoading:!1,selectedCustomer:!0===e.props.isSuperAdmin?-1:a[0]}),e.handleChange(e.state.selectedCustomer)})).catch((function(t){e.props.reload(!1),e.setState({loading:!1,searching:!1,isLoading:!1}),Object(o.v)(t)}))}fetchData(e,t,a,s){let l=this,i=l.state.selectedCustomer;if(void 0===i||-1===i)return;let r=void 0!==e?"&sort="+e+","+t:"&sort=id,desc",n=l.state.searchQuery?"&"+l.state.searchQuery:"",c={url:"/employee/readEmployeeAllByCustomerId?customerId="+i.value+"&page="+a+"&size="+s+n+r+"&showOnlyNoFirstAttempt="+!1+"&lastRecord=",method:"get"};l.setState({loading:!0,searching:!0,manual:!0!==l.manual&&l.manual}),l.props.reload(!0),l.clearChild(),Object(m.e)(c).then((function(e){l.setState({page:a,size:s,total:e.data&&e.data.page?e.data.page.totalElements:0,list:e.data&&e.data.page?e.data.page.content:[],totalIdList:e.data?e.data.selectedIdList:[],loading:!1,searching:!1}),l.props.reload(!1)})).catch((function(e){l.setState({loading:!1,searching:!1}),l.props.reload(!1),Object(o.v)(e)}))}handleSearch(e){this.setState({searchQuery:e,searching:!0,selection:[]},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}openDetailDialog(e){let t=Object.assign({},e);delete t._$visited,this.setState({selected:t,valid:{},displayDetailDialog:!0})}closeDetailDialog(){this.setState({selected:void 0,valid:{},displayDetailDialog:!1})}toggleCheckboxChange(e,t,a){let s=this,l=e.target.checked,i=s.state.list,r=s.state.selection;if("all"===t){let e=[];l&&i.forEach(t=>{e.push(t[a])}),s.setState({selection:e,selectedAll:l})}else{let e=r.indexOf(t[a]);e>=0?r=[...r.slice(0,e),...r.slice(e+1)]:r.push(t[a]),s.setState({selection:r,selectedAll:r.length>0&&r.length===s.state.list.length})}}isSelected(e){return-1!==this.state.selection.indexOf(e)}getTrStyles(e){return e.statusType&&"ACTIVE"!==e.statusType?{backgroundColor:"lightgray",webkitTextFillColor:"darkgray"}:{}}renderMainTable(){let e=[];this.state.list&&this.state.list instanceof Array&&this.state.list.map(t=>{e.push(t.id)});let t=[{Header:this.state.list&&l.a.createElement(A.a,{selectionIdList:this.state.selection,totalIdList:this.state.totalIdList,pageIdList:e,onChange:e=>this.setState({selection:e})}),accessor:"id",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.list&&l.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),onChange:a=>this.toggleCheckboxChange(a,e,"id",t)})},{Header:"Ad",accessor:"name",sortable:!1},{Header:"Soyad",accessor:"surname",sortable:!1},{Header:"TCKN",accessor:"tckn",sortable:!1},{Header:"Departman",accessor:"department",Cell:e=>l.a.createElement("div",{style:{margin:0}},e.department&&l.a.createElement(c.a,{text:e.department.name,maxLength:12}))},{Header:"G\xf6rev",accessor:"jobTitle",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(c.a,{text:e.jobTitle,maxLength:12}))},{Header:"e-Posta Adresi",accessor:"email",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(c.a,{text:e.email,maxLength:15}))},{Header:"Telefon Numaras\u0131",accessor:"telephone",Cell:e=>l.a.createElement("div",{style:{margin:0}},l.a.createElement(c.a,{text:e.telephone?e.telephone:"",maxLength:15}))}],a=Object(p.I)(this,t,"accessor",this.state.isKepOwner);return l.a.createElement(n.a,{columns:a,content:this.state.list,loading:this.state.loading,loadingText:"Kay\u0131tlar getiriliyor...",total:this.state.total,page:this.state.page,size:this.state.size,manual:this.state.manual,options:["5","10","20","50","100"],getTrStyles:this.getTrStyles,fetchData:this.fetchData})}render(){const{selectedCustomer:e,selection:t}=this.state,a=[{label:"\u0130sim",accessor:"name",type:"text",operator:"="},{label:"Soyisim",accessor:"surname",type:"text",operator:"="},{label:"Durum",accessor:"statusType",type:"select",operator:"=",selectData:Object(p.R)()},{label:"TCKN",accessor:"tckn",type:"numericText",operator:"="},{label:"Cinsiyet",accessor:"gender",type:"select",operator:"=",selectData:Object(p.v)()},{label:"Departman",accessor:"department_name",type:"text",operator:"="},{label:"G\xf6rev",accessor:"jobTitle",type:"select",operator:"=",selectData:this.state.jobTitlesData},{label:"Pasif Durum Gerek\xe7e",accessor:"reason",type:"select",operator:"=",selectData:Object(p.Q)()},{label:"Pasif Durum Biti\u015f Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_passiveEndDate",type:"datetime",operator:">="},{label:"Pasif Durum Biti\u015f Tarihi (Biti\u015f)",accessor:"max_passiveEndDate",type:"datetime",operator:"<="},{label:"\u0130\u015fe Ba\u015flama Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_employmentStartDate",type:"date",operator:">="},{label:"\u0130\u015fe Ba\u015flama Tarihi (Biti\u015f)",accessor:"max_employmentStartDate",type:"date",operator:"<="},{label:"\xc7al\u0131\u015fma \u015eekli",accessor:"employmentStatus",type:"text",operator:"="},{label:"Do\u011fum Yeri",accessor:"cityOfBirth",type:"text",operator:"="},{label:"Do\u011fum Tarihi (Ba\u015flang\u0131\xe7)",accessor:"min_dateOfBirth",type:"date",operator:">="},{label:"Do\u011fum Tarihi (Biti\u015f)",accessor:"max_dateOfBirth",type:"date",operator:"<="},{label:"Y\u0131ll\u0131k \u0130zin (En D\xfc\u015f\xfck)",accessor:"min_remainingAnnualVacation",type:"numericText",operator:">="},{label:"Y\u0131ll\u0131k \u0130zin (En Y\xfcksek)",accessor:"max_remainingAnnualVacation",type:"numericText",operator:"<="},{label:"Mazeret \u0130zni (En D\xfc\u015f\xfck)",accessor:"min_remainingExcuseVacation",type:"numericText",operator:">="},{label:"Mazeret \u0130zni (En Y\xfcksek)",accessor:"max_remainingExcuseVacation",type:"numericText",operator:"<="},{label:"E\u011fitim Durumu",accessor:"educationLevel",type:"text",operator:"="},{label:"Askerlik Durumu",accessor:"militaryStatus",type:"text",operator:"="},{label:"Adres",accessor:"address",type:"text",operator:"="},{label:"KEP Adresi",accessor:"kepAddress",type:"text",operator:"="},{label:"e-Posta Adresi",accessor:"email",type:"text",operator:"="},{label:"Telefon Numaras\u0131",accessor:"telephone",type:"text",operator:"="}];let s=Object(p.I)(this,a,"accessor",this.state.isKepOwner);return l.a.createElement("div",{className:"row baseBackground"},l.a.createElement(i.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},l.a.createElement("p",{style:{marginTop:"18px"}},"\xc7ALI\u015eAN B\u0130LG\u0130LEND\u0130RME DURUMU SORGULAMA")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 satirBasi"},!0===this.props.isSuperAdmin&&l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",{className:"card-title"},"M\xfc\u015fteri"),l.a.createElement("div",{className:"card-body"},l.a.createElement(u.a,{value:e.value,clearable:!1,noResultsText:"Veri yok",placeholder:"Se\xe7iniz...",onChange:this.handleChange,options:this.state.options}),this.state.isLoading&&l.a.createElement(h.a,{type:"spinningBubbles",style:{width:"40px",height:"40px",margin:"20px auto 0 auto",fill:"#888"}}))),l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",{className:"card-title"},"\xc7al\u0131\u015fan Listesi")),l.a.createElement("div",{className:"card-body"},l.a.createElement(r.a,{fields:s,loading:this.state.searching,onSearch:this.handleSearch})),l.a.createElement("div",{className:"card-body"},this.renderMainTable()))),l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"col-sm-12 satirBasi"},l.a.createElement(C,{selectedCustomer:this.state.selectedCustomer,selectedEmployees:this.state.selection,ref:this.child})))),this.state.alert)}}t.default=O}}]);
//# sourceMappingURL=53.759b547e.chunk.js.map