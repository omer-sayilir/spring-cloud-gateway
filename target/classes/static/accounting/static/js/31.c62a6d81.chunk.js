(this["webpackJsonpportal-react"]=this["webpackJsonpportal-react"]||[]).push([[31],{1321:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return o}));var l=a(18);function i(e,t){let a={},i="";return a.name=Object(l.b)(void 0,"1,150",e.name),a.name.valid||(i=i+" <strong>Departman Ad\u0131 "+a.name.message+"</strong><br/>"),a.typeId=Object(l.b)(void 0,"1,150",e.typeId),a.typeId.valid||(i=i+" <strong>Departman T\xfcr "+a.typeId.message+"</strong><br/>"),a.parentId=Object(l.b)("number","1,11",e.parentId),a.parentId.valid||(i=i+" <strong>Ba\u011fl\u0131 Oldu\u011fu Departman "+a.parentId.message+"</strong><br/>"),t&&(a.integrationCode=Object(l.b)(void 0,"1,150",e.integrationCode),a.integrationCode.valid||(i=i+" <strong>Departman Kodu "+a.integrationCode.message+"</strong><br/>")),{error:a,valid:c(a),errorMessage:i}}function s(e){let t={},a="";return t.category=Object(l.b)(void 0,"1,150",e.category),t.category.valid||(a=a+" <strong>Form T\xfcr\xfc "+t.category.message+"</strong><br/>"),{error:t,valid:c(t),errorMessage:a}}function n(e){let t={},a="";return t.type=Object(l.b)(void 0,"1,150",e.type),t.type.valid||(a=a+" <strong>Departman T\xfcr\xfc "+t.type.message+"</strong><br/>"),{error:t,valid:c(t),errorMessage:a}}function r(e){let t={},a="";return t.documentType=Object(l.b)("documentType","1,100",e.documentType),t.documentType.valid||(a="".concat(a," <strong>Belge T\xfcr\xfc ").concat(t.documentType.message,"</strong><br/>")),{error:t,valid:c(t),errorMessage:a}}function o(e){let t={},a="";return t.account=Object(l.b)("email","1,100",e.account),t.account.valid||(a=a+" <strong>Kep Adresi "+t.account.message+"</strong><br/>"),t.tckn=Object(l.b)("number","11,11",e.tckn),t.tckn.valid||(a=a+" <strong>TC Kimlik No "+t.tckn.message+"</strong><br/>"),t.parola=Object(l.b)(void 0,"1,20",e.parola),t.parola.valid||(a=a+" <strong>Parola "+t.parola.message+"</strong><br/>"),t.sifre=Object(l.b)(void 0,"1,20",e.sifre),t.sifre.valid||(a=a+" <strong>\u015eifre "+t.sifre.message+"</strong><br/>"),{error:t,valid:c(t),errorMessage:a}}function c(e){let t=!0;for(let a in e){if(!e[a].valid){t=!1;break}}return t}},1610:function(e,t,a){"use strict";a.r(t);var l=a(0),i=a.n(l),s=a(2),n=a(19),r=a(64),o=a(105),c=a(63),d=a.n(c),m=a(72),h=a.n(m),p=a(5),u=a(3),g=a(62),b=a(6),f=a.n(b),y=a(1321),k=a(262),E=a(221),C=a(12);class D extends l.Component{constructor(e){super(e),this.state={treeData:[],selectedKeys:[],checkedKeys:[],halfCheckedKeys:[]}}componentDidMount(){let e=Object(C.q)(this.props.treeData[0]);this.setState({level:e[0],maxLength:e[1]+20})}render(){let e=this.state.maxLength?this.state.maxLength:0;const t=(e,a)=>e&&e.length?e.map(e=>i.a.createElement(E.a,{key:e.key,title:l(e,a)},t(e.children,a-18))):null,a=e=>"Departman : "+e.title+"\nDepartman Kodu : "+(e.integrationCode?e.integrationCode:""),l=(e,t)=>i.a.createElement("div",{style:{display:"inline-flex"}},i.a.createElement(s.Col,{xs:"12",title:a(e),style:{margin:"0",padding:"0",width:t+"px"}},i.a.createElement("label",null,e.title)));return i.a.createElement("div",{style:{overflow:"auto"}},i.a.createElement(k.a,{showLine:!0,icon:e=>{let{}=e;return i.a.createElement("i",{className:"fa fa-university"})},selectable:!1,defaultExpandAll:!0},t(this.props.treeData,e)))}}var S=D,v=a(21),x=a(176),B=a(1404),w=a(1360),N=a(9),Y=a.n(N),I=a(13),O=a.n(I),T=(a(220),a(430));class M extends l.Component{constructor(e){super(e),this.handleButtonClick=()=>{this.state.acceptedFiles.some(e=>e.size>78643200)?f.a.error("Y\xfcklenen dosya boyutu 75MB' tan k\xfc\xe7\xfck olmal\u0131d\u0131r",{position:"top-right",effect:"stackslide",timeout:5e3}):this.startUpload()},this.state={content:[],acceptedFiles:[],loading:!1,uploading:!1,alert:null},this.startUpload=this.startUpload.bind(this),this.canUpload=this.canUpload.bind(this),this.onDrop=this.onDrop.bind(this),this.removeAcceptedFile=this.removeAcceptedFile.bind(this)}startUpload(){let e=!1,t="";this.state.acceptedFiles&&0!==this.state.acceptedFiles.length||(t="Y\xfcklenecek dosyay\u0131 se\xe7iniz",e=!0),e?this.refs.notify.notificationAlert({place:"tr",message:t,type:"danger",autoDismiss:5}):this.props.onFileSelect(this.state.acceptedFiles[0])}onDrop(e,t){this.setState({acceptedFiles:e}),t.length>0&&this.refs.notify.notificationAlert({place:"tr",message:"Yaln\u0131zca 'xls' veya 'xlsx' uzant\u0131l\u0131 dosya se\xe7ebilirsiniz",type:"danger",autoDismiss:5})}removeAcceptedFile(e,t){let{acceptedFiles:a}=this.state;a.splice(t,1),this.setState({acceptedFiles:a})}canUpload(){return!!this.state.acceptedFiles&&this.state.acceptedFiles.length>0}render(){return i.a.createElement("div",null,i.a.createElement(d.a,{ref:"notify"}),this.state.alert,i.a.createElement("div",{className:"row"},i.a.createElement(T.a,{accept:".xls,.xlsx,.XLS,.XLSX",className:"FormRenk col-sm-12",activeClassName:"dropzoneActiveClass",style:{},multiple:!1,onDrop:this.onDrop},i.a.createElement("div",{className:"dropzoneInnerArea"},this.props.title?this.props.title:"Toplu Departman Excel dosyalar\u0131n\u0131z\u0131 buraya s\xfcr\xfckleyin veya se\xe7mek i\xe7in t\u0131klay\u0131n"))),this.state.acceptedFiles.length>0&&this.filesToBeUploaded())}filesToBeUploaded(){const e=[{Header:"Dosya Ad\u0131",accessor:"name",sortable:!1},{Header:"Boyut",accessor:"size",sortable:!1,Cell:e=>i.a.createElement("div",null,Object(u.m)(e.size,!0))},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,Cell:(e,t)=>i.a.createElement("div",null,i.a.createElement("button",{type:"button",onClick:()=>this.removeAcceptedFile(e,t),"data-toggle":"tooltip","data-placement":"bottom",title:"Sil",style:{background:"crimson"},rel:"tooltip",className:"Btn btn-icon"},i.a.createElement("i",{className:"BtnIcon fa fa-remove "})))}];return i.a.createElement("div",{className:"row"},i.a.createElement("h4",{style:{width:"100%"}},"Y\xfcklenecek Dosyalar"),i.a.createElement(s.Button,{color:"primary",onClick:this.handleButtonClick,disabled:this.state.uploading||!this.canUpload()},i.a.createElement("span",null,"Y\xfcklemeyi Ba\u015flat\xa0\xa0"),i.a.createElement("i",{className:"fa fa-upload"})),i.a.createElement(n.a,{columns:e,content:this.state.acceptedFiles,paginationEnabled:!1}))}}var L=M;class j extends l.Component{constructor(){super(),this.checkFormatValidity=(e,t,a)=>{switch(t){case"departmentName":if(null==a)return e+". Sat\u0131rdaki Departman Ad\u0131 bo\u015f b\u0131rak\u0131lamaz.";break;case"departmentCode":if(null==a)return e+". Sat\u0131rdaki Departman Kodu bo\u015f b\u0131rak\u0131lamaz.";break;case"typeDescription":if(null==a)return e+". Sat\u0131rdaki Departman T\xfcr bo\u015f b\u0131rak\u0131lamaz."}},this.state={loading:!1},this.okClicked=this.okClicked.bind(this),this.autoPairing=this.autoPairing.bind(this),this.onFileSelect=this.onFileSelect.bind(this),this.cancelClicked=this.cancelClicked.bind(this),this.checkFieldsOk=this.checkFieldsOk.bind(this),this.downloadTemplate=this.downloadTemplate.bind(this),this.bulkFileSelected=this.bulkFileSelected.bind(this),this.headerDropDownChanged=this.headerDropDownChanged.bind(this),j.getCellValue=j.getCellValue.bind(this)}onFileSelect(e){let t=new FileReader;t.readAsArrayBuffer(e),t.onload=()=>{this.bulkFileSelected(t.result)}}headerDropDownChanged(e,t){this.setState((a,l)=>(a.headerNames[e]=t,Object.keys(a.headerNames).forEach((l,i)=>{l!==e&&a.headerNames[l]===t&&"outOfScope"!==t&&(a.headerNames[l]="")}),{headerNames:a.headerNames}))}bulkFileSelected(e){let t=[],a=w.b(e,{type:"array"});if(a.Directory&&a.Directory.vba&&a.Directory.vba.length)return void f.a.error("Excel macro i\xe7ermemelidir.",{position:"top-right",effect:"stackslide",timeout:5e3});let l=a.Sheets[a.SheetNames[0]],i=w.c.decode_range(l["!ref"]);for(let n=i.s.r;n<=i.e.r;n++){let e={};for(let t=i.s.c;t<=i.e.c;t++){let a=l[w.c.encode_cell({r:n,c:t})],i="";a&&("s"===a.t?i=a.v:"n"===a.t&&(i=j.getCellValue(a))),i&&i.length>0&&(e[String.fromCharCode("A".charCodeAt(0)+t)]=i)}t.push(e)}let s={};t.length>0&&Object.keys(t[0]).forEach((e,t)=>{s[e]=""}),this.setState({bulkCreateData:t,headerNames:s}),this.autoPairing(t)}static getCellValue(e){if(e.v.toString()===e.w.toString())return e.w;{let t=w.a.parse_date_code(e.v);return t?Y()(new Date(parseInt(t.y),parseInt(t.m)-1,parseInt(t.d))).format("YYYY-MM-DD"):e.v.toString()}}autoPairing(e){let t=[{text:"departman ad\u0131",code:"departmentName"},{text:"departman kodu",code:"departmentCode"},{text:"ba\u011fl\u0131 oldu\u011fu departman kodu",code:"departmentParentCode"},{text:"departman t\xfcr\xfc",code:"typeDescription"},{text:"il",code:"ilName"},{text:"il\xe7e",code:"ilceName"},{text:"adres",code:"adres"},{text:"Masraf Yeri",code:"isExpenditureDepartment"},{text:"masraf yeri",code:"isExpenditureDepartment"}],a=e[0],l=!0;Object.keys(a).forEach((e,i)=>{let s=!1;t.forEach(t=>{a[e].trim().replace("\u0130","i").toLowerCase()===t.text&&(s=!0,this.headerDropDownChanged(e,t.code))}),l=l&&s}),l&&this.setState({headerRowSelected:!0})}okClicked(){if(this.checkFieldsOk()){let e;e=this.state.bulkCreateData&&this.state.headerRowSelected?this.state.bulkCreateData.slice(1):this.state.bulkCreateData;let t=!1,a=2,l=[],n="";e=e.filter(e=>Object.keys(e).length>0);let r=e.map(e=>{if(0===Object.keys(e).length)return;let i={};return Object.keys(this.state.headerNames).forEach((s,r)=>{let o=this.state.headerNames[s];if(o){let r=e[s],c=this.checkFormatValidity(a,o,r);c&&c.length&&(n+=t?"\r\n"+c:c,l.push(a),t=!0),i[o]="isExpenditureDepartment"===o?null!=r&&"Evet"===r:r}}),a++,i});this.props.onSubmit&&r&&!t?this.props.onSubmit(r):t&&this.setState({alert:i.a.createElement(O.a,{error:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"error",title:"Hata",onConfirm:()=>this.setState({alert:null})},i.a.createElement("div",null,i.a.createElement("label",null,"Excel'de format\u0131 hatal\u0131 sat\u0131rlar bulunmaktad\u0131r. Hata i\xe7eri\u011fi a\u015fa\u011f\u0131daki gibidir."),i.a.createElement(s.Input,{type:"textarea",rows:5,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px"},value:n,disable:!0})))})}else f.a.error("Se\xe7im yap\u0131lmam\u0131\u015f ba\u015fl\u0131k var.",{position:"top-right",effect:"stackslide",timeout:5e3})}checkDateFormat(e,t){return!t||""===t||"employmentStartDate"!==e&&"dateOfBirth"!==e?t:(t=t.toString().split(" ").join("-").replace(/\//g,"-").replace(/,/g,"-").replace(/\./g,"-"),Y()(t,"DD-MM-YYYY",!0).isValid()?Y()(t,"DD-MM-YYYY").format("YYYY-MM-DD"):Y()(t,"DD-MM-YY",!0).isValid()?Y()(t,"DD-MM-YY").format("YYYY-MM-DD"):Y()(t,"YYYY-MM-DD",!0).isValid()?t:Y()(t,"MM-DD-YYYY",!0).isValid()?Y()(t,"MM-DD-YYYY").format("YYYY-MM-DD"):Y()(t,"MM-DD-YY",!0).isValid()?Y()(t,"MM-DD-YY").format("YYYY-MM-DD"):Y()(t,"YYYY-DD-MM",!0).isValid()?Y()(t,"YYYY-DD-MM").format("YYYY-MM-DD"):null)}checkFieldsOk(){let e=!0;return this.state.headerNames&&Object.keys(this.state.headerNames).length>0?Object.keys(this.state.headerNames).forEach(t=>{""===this.state.headerNames[t]&&(e=!1)}):e=!1,e}cancelClicked(){this.props.onCancel&&this.props.onCancel()}downloadTemplate(){let e=this;e.setState({loading:!0});let t=[],a=e.props.headerNames.map(e=>e.name);t.push(a);let l=e.props.exampleNames.map(e=>e.name);t.push(l);let i=w.c.json_to_sheet(t,{skipHeader:!0}),s=w.c.book_new();w.c.book_append_sheet(s,i,"Sheet");let n={url:"/department/updateDepartmentUploadTemplate",method:"post",responseType:"arraybuffer",data:w.d(s,{bookType:"xlsx",bookSST:!1,type:"base64"})};Object(p.e)(n).then((function(t){let a=document.createElement("a");a.href=window.URL.createObjectURL(new Blob([t.data],{type:"application/vnd.ms-excel"})),a.download="Toplu_Departman_Sablonu.xlsx",document.body.appendChild(a),a.click(),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1}),Object(u.v)(t)}))}renderMainTable(e){if(!e||e.length<=0)return"";let t=e[0],a=[];return Object.keys(t).forEach((e,t)=>{a.push({Header:i.a.createElement(s.Input,{type:"select",value:this.state.headerNames[e],onChange:t=>{this.headerDropDownChanged(e,t.target.value)},style:{backgroundColor:this.state.headerNames[e]?"":"orange"}},[i.a.createElement("option",{value:"",style:{backgroundColor:"#ffffffc2"}},"Se\xe7iniz"),i.a.createElement("option",{value:"outOfScope",style:{backgroundColor:"#cccccc"}},"Kapsam D\u0131\u015f\u0131"),...this.props.headerNames.map(e=>i.a.createElement("option",{value:e.code,style:{backgroundColor:"#ffffffc2"}},e.name))]),columns:[{Header:e,accessor:e}]})}),this.state.headerRowSelected&&(e=e.slice(1)),i.a.createElement(B.a,{data:e,columns:a,defaultPageSize:5,previousText:"\xd6nceki",nextText:"Sonraki",pageText:"Sayfa",ofText:"Sayfa Toplam\u0131:",rowsText:"kay\u0131t",style:{overflowWrap:"break-word"}})}render(){return i.a.createElement("div",null,!this.state.bulkCreateData&&i.a.createElement(s.Container,null,i.a.createElement("div",{className:"row",style:{marginBottom:"15px"}},i.a.createElement(s.Button,{color:"info",title:"Uygun formattaki \u015fablon dosyas\u0131n\u0131 indir",disabled:this.state.loading,onClick:this.downloadTemplate},i.a.createElement("span",null,"\u015eablon \u0130ndir\xa0\xa0"),i.a.createElement("i",{className:"fa fa-download"})),i.a.createElement("div",{id:"MessageHolder"})),i.a.createElement(L,{onFileSelect:this.onFileSelect})),this.state.bulkCreateData&&i.a.createElement("div",null,i.a.createElement("div",{style:{marginLeft:"5%"}},i.a.createElement(s.Input,{type:"checkbox",onChange:e=>{this.setState({headerRowSelected:e.target.checked})},checked:this.state.headerRowSelected}),i.a.createElement("label",null,"\u0130lk sat\u0131rda ba\u015fl\u0131klar var")),this.renderMainTable(this.state.bulkCreateData),i.a.createElement("div",{style:{marginLeft:"2%"}},i.a.createElement(s.Button,{color:"secondary",onClick:this.cancelClicked},"\u0130ptal"),i.a.createElement(s.Button,{color:"primary",onClick:this.okClicked},"Kaydet"))),this.state.alert)}}var z=j,F=a(101),A=a(4);a(20);class K extends l.Component{constructor(e){super(e),this.getDepartmentList=(e,t)=>{let a=[],l=!1;if(t&&e&&e.length>0)for(let i=0;i<e.length;i++)if(e[i].id===t?l=!0:a.push(e[i]),l&&0===i)return[];return a},this.checkDepartment=e=>{let t=!0,{parentList:a}=this.state;if(e&&a&&a.length>0)for(let l=0;l<a.length;l++)a[l].parentId===e&&(t=!1);return t},this.getDepartmentName=e=>{let t;return this.state.parentList.forEach(a=>{a.id===e&&(t=a.name)}),t},this.deleteResponseAlert=e=>{this.setState({alert:i.a.createElement(O.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:"Departman Se\xe7ilenleri Silme \u0130\u015flem Sonucu",onConfirm:()=>this.setState({alert:null})},i.a.createElement("div",{style:{overflowY:"scroll",border:"1px solid black",width:"440px",float:"center",height:"250px",position:"relative"}},e.map(e=>e.toString().includes("silindi")?i.a.createElement("label",{style:{color:"green"}},e):i.a.createElement("label",{style:{color:"red"}},e))))})},this.checkIfCodeIsMust=()=>!this.state.parentList.includes("{Ana Departman}"),this.generateRecommendation=()=>{let e="",t="",a=this.state.selected&&this.state.selected.parentId,l=this.state.selected&&this.state.selected.name;if(this.state.parentList&&this.state.parentList.map(t=>{t.id===parseInt(a)&&(e=t.name)}),e.length&&!e.includes("{"))if(e.includes(" ")){let a=e.split(" ");a.map((e,l)=>{1===l&&2===a.length?t+=e.substring(0,2):t+=e[0]})}else t=e.substring(0,3);return t?"\xd6nerilen Departman Kodu: "+t+(l?"-"+l:"-...Departman Ad\u0131..."):""},this.arrangeDataSet=()=>{let e={sheetName:"Departman_Listesi"};return e.uuid=Object(u.h)(),e.list=this.state.selection,e.type="excel",e},this.notify=i.a.createRef(),this.state={alert:null,session:null,loading:!0,displayCreateUpdateDialog:!1,valid:null,manual:!1,content:[],treeData:[],parentList:[],departmanList:[],total:0,searching:!1,searchQuery:void 0,page:0,size:10,searchKey:"",selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],selection:[],totalIdList:[],steps:[{target:".baseBackground",content:"Departman tan\u0131mlar\u0131n\u0131z\u0131 bu sayfada yapabilirsiniz.",placement:"center"},{target:".zocial",content:'Departman bilgileri departman a\u011fac\u0131 \u015feklinde tutulmaktad\u0131r.Bu sebeple, bir departman\u0131n hangi bir departman\u0131n hangi departmana ba\u011fl\u0131 oldu\u011funa dair ili\u015fkiler kurulmal\u0131d\u0131r.       \xc7al\u0131\u015fanlar\u0131n\u0131z\u0131, \xe7al\u0131\u015fan ekran\u0131ndan excel ile toplu eklerken "Departman Kodu" bilgisi ile y\xfckleyerek g\xfcncellerseniz departman bilgileri e\u015fle\u015fmi\u015f olur',placement:"auto"},{target:".zocial:nth-child(2)",content:'Birden fazla departman g\xfcncellenmek veya eklenmek istendi\u011finde "Toplu ekle/G\xfcncelle" butonundan \u015fablon indirip yapabilirsiniz.',placement:"auto"}],steps2:[{target:".baseBackground",content:"Yeni departman bilgisi bu sayfadan eklenir.",placement:"center"},{target:".form-group:nth-child(1) .form-control",content:"Yeni girilen departman\u0131n hangi departmana ba\u011fl\u0131 olaca\u011f\u0131 bilgisi verilmelidir. \u0130lk defa departman giri\u015finde bir tane ana departman olu\u015fturulmal\u0131,bundan sonrakiler bu departmana ba\u011fl\u0131 olarak s\u0131ras\u0131yla olu\u015fturulmal\u0131d\u0131r.",placement:"auto"},{target:".form-group:nth-child(2) .form-control",content:"Departman t\xfcr\xfc se\xe7ilir.",placement:"auto"},{target:".form-group:nth-child(3) .form-control ",content:"Departman ad\u0131 girilir.",placement:"auto"},{target:".form-group:nth-child(4) .form-control ",content:'\xc7al\u0131\u015fanlar\u0131n\u0131z\u0131 "Toplu Ekle" den excel ile y\xfcklerken \xe7al\u0131\u015fan listenizin oldu\u011fu bir excel dosyas\u0131nda departman kolonunda yaz\u0131lmas\u0131 gereken koddur.Departman koduna g\xf6re e\u015fle\u015fme yap\u0131lmaktad\u0131r.',placement:"auto"}],locale:{back:"Geri",close:"Kapat",last:"Son",next:"\u0130leri",skip:"Atla"},joyrideActive:!1,shouldRun:!0,types:[],iller:[],ilceler:[],excelIsDownloading:!1,displayCreateBulkDialog:!1},this.editValidateDef={name:e=>!h.a.isEmpty(e)},this.fetchData=this.fetchData.bind(this),this.editClicked=this.editClicked.bind(this),this.saveClicked=this.saveClicked.bind(this),this.handleSearch=this.handleSearch.bind(this),this.searchWithKey=this.searchWithKey.bind(this),this.createClicked=this.createClicked.bind(this),this.deleteClicked=this.deleteClicked.bind(this),this.editHandleInputChange=this.editHandleInputChange.bind(this),this.callback=this.callback.bind(this),this.getDepartmentTypes=this.getDepartmentTypes.bind(this),this.getIlList=this.getIlList.bind(this),this.downloadMedia=this.downloadMedia.bind(this),this.createBulkClicked=this.createBulkClicked.bind(this),this.createBulkSubmit=this.createBulkSubmit.bind(this),this.isSelected=this.isSelected.bind(this),this.deleteList=this.deleteList.bind(this),this.toggleCheckboxChange=this.toggleCheckboxChange.bind(this)}componentDidMount(){this.getDepartmentTypes(),this.getIlList()}createBulkSubmit(e){let t=this,a={url:"/department/saveDepartments",method:"post",data:e};t.setState({loading:!0,displayCreateBulkDialog:!1}),Object(p.e)(a).then((function(e){let a=e.data;if(Array.isArray(a)){let e="";a.map(t=>{e=""===e?t:e+"\n"+t}),t.setState({alert:i.a.createElement(O.a,{success:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:"Hatas\u0131z sat\u0131rlar i\xe7in y\xfckleme tamamland\u0131.",onConfirm:()=>t.setState({alert:null})},i.a.createElement("div",null,i.a.createElement("label",null,"Excel'de departman format\u0131/mant\u0131\u011f\u0131 hatal\u0131 sat\u0131rlar bulunmaktad\u0131r, hata i\xe7eri\u011fi a\u015fa\u011f\u0131daki gibidir."),i.a.createElement(s.Input,{type:"textarea",rows:5,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px"},value:e,disable:!0})))})}else f.a.success(a,{position:"top-right",effect:"stackslide",timeout:5e3});t.setState({loading:!1,manual:!0})})).catch((function(e){let a=e.response.data;if(Array.isArray(a)){let e="";a.map(t=>{e=""===e?t:e+"\n"+t+"\n"}),t.setState({alert:i.a.createElement(O.a,{error:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"error",title:"Y\xfcklenemedi",onConfirm:()=>t.setState({alert:null})},i.a.createElement("div",null,i.a.createElement("label",null,"Excel'de departman format\u0131/mant\u0131\u011f\u0131 hatal\u0131 sat\u0131rlar bulunmaktad\u0131r, hata i\xe7eri\u011fi a\u015fa\u011f\u0131daki gibidir."),i.a.createElement(s.Input,{type:"textarea",rows:5,style:{height:"200px",border:"1px solid #E3E3E3",marginTop:"2px"},value:e,disable:!0})))})}else Object(u.v)(e);t.setState({loading:!1,manual:!0})}))}getDepartmentTypes(){let e=this;Object(p.e)({url:"/departmenttype/readDepartmentTypeAll",method:"get"}).then((function(t){e.setState({types:t.data})})).catch((function(e){Object(u.v)(e)}))}getIlList(){let e=this;Object(p.e)({url:"/il/iller",method:"get"}).then((function(t){e.setState({iller:t.data})})).catch((function(e){Object(u.v)(e)}))}handleSearch(e){this.setState({searchQuery:e,searching:!0},()=>this.fetchData(this.state.accessor,this.state.direction,0,this.state.size))}searchWithKey(e){this.setState({searchKey:e.target.value,manual:!0})}fetchData(e,t,a,l){let i=this,s=void 0!==e?"&sort="+e+","+t:"",n=i.state.searchQuery?"&"+i.state.searchQuery:"",r={url:"/department/readDepartmentAll?page="+a+"&size="+l+n+s,method:"get"};i.setState({loading:!0,searching:!0,manual:!0!==i.manual&&i.manual}),i.props.reload(!0),Object(p.e)(r).then((function(e){i.setState({page:a,size:l,total:e.data.totalElements,content:e.data.list,treeData:e.data.treeData,parentList:e.data.parentList,totalIdList:e.data?e.data.selectedIdList.reverse():[],loading:!1,searching:!1}),i.props.reload(!1)})).catch((function(e){i.setState({loading:!1,searching:!1}),i.props.reload(!1),Object(u.v)(e)}))}createClicked(){this.newData=!0;let e=this.state.types.find(e=>!0===e.isDefault);this.setState({selected:{name:"",type:void 0!==e?e.id:""},valid:{},displayCreateUpdateDialog:!0,departmanList:this.state.parentList})}editClicked(e){let t=Object.assign({},e);delete t._$visited;let a=this.getDepartmentList(this.state.parentList,t.id),l=this.state.iller.find(e=>e.ilNo===parseInt(t.il)),i=[];void 0!==l&&void 0!==l.ilceler&&(i=l.ilceler),this.setState({ilceler:i,selected:t,valid:{},displayCreateUpdateDialog:!0,departmanList:a})}saveClicked(){let e=Object.assign({},this.state.selected),t=Object(y.a)(e,this.checkIfCodeIsMust());if(t.valid){let t=this,a={url:"/department/saveDepartment",method:"post",data:e};t.setState({disabledSaveBtn:!0}),Object(p.e)(a).then((function(e){let a=e.data;t.setState({selected:null,displayCreateUpdateDialog:!1,manual:!0,disabledSaveBtn:!1}),f.a.success(a,{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){Object(u.v)(e),t.setState({disabledSaveBtn:!1})}))}else f.a.error(t.errorMessage,{position:"top-right",effect:"stackslide",timeout:8e3})}deleteClicked(e){if(this.checkDepartment(e.id)){let t=this,a={url:"/department/deleteDepartment",method:"post",data:e};t.setState({disabledDeleteBtn:!0}),Object(p.e)(a).then((function(e){let a=e.data;t.setState({selected:null,displayCreateUpdateDialog:!1,manual:!0,alert:null,disabledDeleteBtn:!1}),f.a.success(a,{position:"top-right",effect:"stackslide",timeout:5e3})})).catch((function(e){Object(u.v)(e),t.setState({loading:!1,disabledDeleteBtn:!1})}))}else this.setState({alert:i.a.createElement(O.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:"Departmana ba\u011fl\u0131 departman bulunmaktad\u0131r, l\xfctfen kontrol ediniz.",onConfirm:()=>this.setState({alert:null})})})}deleteList(){let e=this,t=[],a=[];if(this.state.selection.forEach(e=>{this.checkDepartment(e)?t.push(e):a.push(e)}),a.length>0)this.setState({alert:i.a.createElement(O.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:"Se\xe7ilen Departmanlar Silinemez",onConfirm:()=>this.setState({alert:null})},i.a.createElement("div",{style:{overflowY:"scroll"}},a.map(e=>i.a.createElement("label",{style:{color:"red"}},this.getDepartmentName(e)+" departman\u0131na ba\u011fl\u0131 departman vard\u0131r.Silme i\u015flemine en alt seviye departmanlardan ba\u015flay\u0131n\u0131z."))))});else{let a={url:"/department/deleteDepartmentList",method:"post",data:t};e.setState({loading:!0,alert:null}),Object(p.e)(a).then((function(t){let a=t.data;e.setState({selected:null,manual:!0,alert:null,page:0,selection:[],selectedAll:!1}),e.deleteResponseAlert(a)})).catch(t=>{Object(u.v)(t),e.setState({loading:!1,createUpdateLoading:!1})})}}editHandleInputChange(e){const t=e.target;let a="checkbox"===t.type?t.checked:t.value,l=t.name;if("integrationCode"===l&&(a=a.toString().split(" ").join("")),null!=l&&"il"===l){let e=this.state.iller.find(e=>e.ilNo===parseInt(a));if(void 0!==e&&void 0!==e.ilceler){let t=e.ilceler;this.setState({ilceler:t})}}let i=this.editValidateDef[l]&&this.editValidateDef[l](a);("integrationCode"!==l||a.match(/^[a-zA-Z0-9\xfc\xdc\u0131\u011f\u011e\u0130\u015f\u015e\xe7\xc7\xf6\xd6./&\s\-]+$/))&&this.setState(e=>(e.selected[l]=a,e.valid[l]=i,{selected:e.selected,valid:e.valid}))}editClassName(e){let t=this.state.valid[e];return"boolean"!==typeof t?void 0:{valid:t,invalid:!t}}downloadMedia(){let e=this;if(0===e.state.selection.length)this.setState({alert:i.a.createElement(O.a,{error:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"error",title:"Bo\u015f Liste",onConfirm:()=>this.setState({alert:null})},"\u0130ndirmek istedi\u011finiz departmanlara l\xfctfen tik at\u0131n\u0131z!")});else{let t={url:"/department/getDepartmentsForExcelFormat",method:"post",data:e.arrangeDataSet()};Object(p.e)(t).then(()=>{f.a.success("\u0130ndirme talebiniz i\u015fleme al\u0131nd\u0131. 'Bekleyen \u0130ndirmeler'den' takip edebilirsiniz.",{position:"top-right",effect:"stackslide",timeout:8e3})}).catch((function(e){Object(u.v)(e)}))}}createBulkClicked(){this.setState({displayCreateBulkDialog:!0})}renderBulkInsert(){let e=[{name:" Departman Ad\u0131 ",code:"departmentName"},{name:" Departman Kodu ",code:"departmentCode"},{name:" Ba\u011fl\u0131 Oldu\u011fu Departman Kodu ",code:"departmentParentCode"},{name:" Departman T\xfcr\xfc ",code:"typeDescription"},{name:" \u0130l ",code:"ilName"},{name:" \u0130l\xe7e ",code:"ilceName"},{name:"      Adres     ",code:"adres"},{name:" Masraf Yeri ",code:"isExpenditureDepartment"}];this.state.titleList&&this.state.titleList.map((t,a)=>{let l="title"+a;e.push({name:t,code:l})});let t=e;return i.a.createElement(s.Modal,{isOpen:this.state.displayCreateBulkDialog,size:"lg",toggle:()=>this.setState({displayCreateBulkDialog:!1})},i.a.createElement(s.ModalHeader,{className:"justify-content-center",toggle:()=>this.setState({displayCreateBulkDialog:!1})},"Toplu Departman Y\xfckleme"),i.a.createElement(s.ModalBody,null,i.a.createElement(z,{headerNames:t,exampleNames:[],onCancel:()=>this.setState({displayCreateBulkDialog:!1}),onSubmit:this.createBulkSubmit})))}renderCreateUpdate(){return i.a.createElement(s.Modal,{isOpen:this.state.displayCreateUpdateDialog,size:"xl",toggle:()=>this.setState({displayCreateUpdateDialog:!1})},i.a.createElement(s.ModalHeader,{className:"justify-content-center",toggle:()=>this.setState({displayCreateUpdateDialog:!1})},"Departman Olu\u015ftur",i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()},style:{position:"absolute",right:"70px",alignSelf:"center",marginTop:"-5px"}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon",style:{opacity:".5"}}))),i.a.createElement(s.ModalBody,null,this.state.displayCreateUpdateDialog&&i.a.createElement(d.a,{ref:this.notify}),this.state.selected&&i.a.createElement("div",null,i.a.createElement(s.Form,null,i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"parentId"},"Ba\u011fl\u0131 Oldu\u011fu Departman: *"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"select",name:"parentId",value:this.state.selected.parentId,onChange:this.editHandleInputChange},this.editClassName("parentId")),[i.a.createElement("option",{key:"0",value:""},"Se\xe7iniz"),...this.state.departmanList.map(e=>i.a.createElement("option",{key:e.id,value:e.id,il:e.il,ilce:e.ilce},e.name))]))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"type"},"Departman T\xfcr : *"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"select",name:"typeId",value:this.state.selected.typeId,onChange:this.editHandleInputChange},this.editClassName("typeId")),[i.a.createElement("option",{key:"0",value:""},"Se\xe7iniz"),...this.state.types.map(e=>i.a.createElement("option",{key:e.id,value:e.id},e.type))]))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"name"},"Departman Ad\u0131: *"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"text",name:"name",value:this.state.selected.name,onChange:this.editHandleInputChange},this.editClassName("name"))))),this.checkIfCodeIsMust()&&i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"parentId"},"Departman Kodu : *"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"text",name:"integrationCode",value:this.state.selected.integrationCode,onChange:this.editHandleInputChange},this.editClassName("integrationCode"))))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:5,for:"is_expenditure_dep"},"Masraf Yeri :"),i.a.createElement(s.Col,{sm:7},i.a.createElement(s.Input,{type:"checkbox",name:"is_expenditure_dep",checked:null!=this.state.selected.isExpenditureDepartment&&this.state.selected.isExpenditureDepartment,onChange:e=>{let t=this.state.selected;t.isExpenditureDepartment=e.target.checked,this.setState({selected:t})}}))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"il"},"\u0130l :"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"select",name:"il",value:this.state.selected.il,onChange:this.editHandleInputChange},this.editClassName("il")),[i.a.createElement("option",{key:"0",value:""},"Se\xe7iniz"),...this.state.iller.map(e=>i.a.createElement("option",{key:e.ilNo,value:e.ilNo},e.isim))]))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"ilce"},"\u0130l\xe7e :"),i.a.createElement(s.Col,{sm:8},i.a.createElement(s.Input,Object.assign({type:"select",name:"ilce",value:this.state.selected.ilce,onChange:this.editHandleInputChange},this.editClassName("ilce")),[i.a.createElement("option",{key:"0",value:""},"Se\xe7iniz"),...this.state.ilceler.map(e=>i.a.createElement("option",{key:e.ilceNo,value:e.ilceNo},e.isim))]))),i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Label,{sm:4,for:"adres"},"Adres :"),i.a.createElement(s.Col,{sm:8},i.a.createElement("textarea",Object.assign({type:"text",className:"form-control",name:"adres",value:this.state.selected.adres,rows:"5",onChange:this.editHandleInputChange},this.editClassName("adres"))))),this.checkIfCodeIsMust()&&i.a.createElement(s.FormGroup,{row:!0},i.a.createElement(s.Col,{sm:4}),i.a.createElement(s.Label,{sm:8,for:"recommendedCode",style:{color:"darkgray"}},this.generateRecommendation()))))),i.a.createElement(s.ModalFooter,null,i.a.createElement(s.Button,{title:"\u0130ptal",style:{paddingLeft:"16px",width:"100px"},color:"secondary",onClick:()=>this.setState({displayCreateUpdateDialog:!1})},"\u0130ptal"),i.a.createElement(s.Button,{title:"Kaydet",style:{paddingLeft:"16px",width:"100px"},color:"primary",disabled:this.state.disabledSaveBtn,onClick:this.saveClicked},"Kaydet")))}activateJoyride(){!1===this.state.joyrideActive&&(this.setState({flag:0}),this.setState({joyrideActive:!0}),this.state.width<1e3&&this.setState({flag:1}))}callback(e){"close"===e.action&&"step:after"===e.type&&this.setState({shouldRun:!1}),"stop"!==e.action&&"reset"!==e.action&&"skip"!==e.action||(this.setState({shouldRun:!0}),this.setState({joyrideActive:!1}),this.setState({flag:0}),this.activateJoyride())}isSelected(e){return-1!==this.state.selection.indexOf(e)}toggleCheckboxChange(e,t,a){let l=this,i=e.target.checked,s=l.state.content,n=l.state.selection;if("all"===t){let e=[];i&&s.forEach(t=>{e.push(t[a])}),l.setState({selection:e,selectedAll:i})}else{let e=n.indexOf(t[a]);e>=0?n=[...n.slice(0,e),...n.slice(e+1)]:n.push(t[a]),l.setState({selection:n,selectedAll:n.length>0&&n.length===l.state.content.length})}}render(){let e=this.state.steps,t=this.state.steps2,a=this.state.locale,l=[];this.state.content&&this.state.content instanceof Array&&this.state.content.map(e=>{l.push(e.id)});const c=[{Header:this.state.content&&i.a.createElement(F.a,{selectionIdList:this.state.selection,totalIdList:this.state.totalIdList,pageIdList:l,onChange:e=>this.setState({selection:e})}),accessor:"id",selectType:"checkbox",sortable:!1,Cell:(e,t)=>this.state.content&&i.a.createElement("input",{type:"checkbox",checked:this.isSelected(e.id),onChange:a=>this.toggleCheckboxChange(a,e,"id",t)})},{Header:"Departman Ad\u0131",accessor:"name",Cell:e=>i.a.createElement("div",{style:{textAlign:"left",width:"200px",overflow:"auto"}},e.name)},{Header:"Ba\u011fl\u0131 Oldu\u011fu Departman",accessor:"parentName",sortable:!1,Cell:e=>i.a.createElement("div",{style:{textAlign:"left",overflow:"auto"}},e.parentName),width:"30%"},{Header:"Departman Kodu",accessor:"integrationCode",Cell:e=>i.a.createElement("div",{style:{textAlign:"left",color:"cornflowerblue",width:"200px",overflow:"auto"}},e.integrationCode),width:"30%"},{Header:"Masraf Yeri",accessor:"isExpenditureDepartment",Cell:e=>i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("input",{type:"checkbox",checked:null!==e.isExpenditureDepartment&&e.isExpenditureDepartment,disabled:"disabled"}))},{Header:"\u0130\u015flemler",accessor:"",sortable:!1,width:"auto",Cell:e=>i.a.createElement("div",null,i.a.createElement(r.a,{title:"D\xfczenle",faIcon:"fa-edit",onClick:()=>this.editClicked(e),color:"success"}),i.a.createElement(r.a,{title:"Sil",faIcon:"fa-trash",color:"danger",onClick:()=>{this.setState({alert:i.a.createElement(o.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",disabled:this.state.disabledDeleteBtn,title:"Emin misiniz?",onConfirm:()=>this.setState({alert:null},()=>{this.deleteClicked(e)}),onCancel:()=>this.setState({alert:null})},e.name+(null!=e.isExpenditureDepartment&&1==e.isExpenditureDepartment?" masraf yeri ":" departman\u0131 ")+" silinecek.")})}}))}];return i.a.createElement("div",{className:"row baseBackground"},this.state.joyrideActive&&i.a.createElement(x.a,{disableBeacon:!1,autoStart:!0,locale:a,steps:this.state.displayCreateUpdateDialog?t:e,continuous:!0,run:this.state.shouldRun,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,scrollToSteps:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClicks:!1,keyboardNavigation:!0,hideBackButton:!1,disableOverlayClose:!0,callback:this.callback,holePadding:0,shouldRun:this.state.shouldRun,styles:{options:{zIndex:1e5,primaryColor:"#50a8e2"}}}),i.a.createElement(s.Nav,{className:"topbar",style:{paddingLeft:"14px",height:"53px"}},i.a.createElement(v.a,{position:"leftSide",className:"zocial Yeni",style:{fontSize:"x-small"},label:"Yeni Olu\u015ftur",onClick:this.createClicked}),!this.props.currentUser.pairedEmployeeId&&i.a.createElement(v.a,{position:"leftSide",className:"zocial Yeni",style:{fontSize:"x-small"},label:"Toplu Ekle / G\xfcncelle",title:"Toplu Departman Listesi ile G\xfcncelleme Yap",onClick:this.createBulkClicked}),Object(u.f)(this,A.n)&&i.a.createElement(v.a,{position:"leftSide",className:"zocial Sil",style:{fontSize:"x-small"},label:"Se\xe7ilenleri Sil",title:"Se\xe7ilen Kay\u0131tlar\u0131 Sil",disabled:this.state.loading,onClick:()=>{this.state.selection&&this.state.selection.length>0?this.setState({alert:i.a.createElement(O.a,{showCancel:!0,warning:!0,confirmBtnText:"Evet",cancelBtnText:"Hay\u0131r",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Emin misiniz?",onConfirm:()=>{this.deleteList()},onCancel:()=>this.setState({alert:null})},"Se\xe7ilen kay\u0131tlar silinecek.")}):this.setState({alert:i.a.createElement(O.a,{warning:!0,confirmBtnText:"Tamam",confirmBtnBsStyle:"warning",title:"Se\xe7im Yap\u0131lmad\u0131",onConfirm:()=>this.setState({alert:null})},"Departman se\xe7ilmedi.")})}}),i.a.createElement("ul",{className:"helpfulList"},i.a.createElement("li",{className:"helpButtonContainer"},i.a.createElement("button",{className:"helpButton",onClick:()=>{this.activateJoyride()}},i.a.createElement("span",{className:"tooltipText"},"Size yard\u0131mc\u0131 olabilirim"),i.a.createElement("i",{className:"far fa-question-circle helpButtonIcon"}))))),i.a.createElement("div",{className:"col-sm-12 satirBasi"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"card-title"},"Departman Listesi")),i.a.createElement("div",{className:"row",style:{margin:"1px 0 1px 0"}},i.a.createElement("div",{className:"col-lg-4 col-md-12"},i.a.createElement(S,{treeData:this.state.treeData,selectedKeys:this.state.selectedKeys,checkedKeys:this.state.checkedKeys})),i.a.createElement("div",{className:"col-lg-8 col-md-12",style:{marginTop:"-9px"}},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement(g.a,{fields:[{label:"Departman Ad\u0131",accessor:"name",type:"text",operator:"="},{label:"Departman Kodu",accessor:"integrationCode",type:"text",operator:"="},{label:"Masraf Yeri",accessor:"isExpenditureDepartment",type:"boolean",operator:"="}],loading:this.state.searching,onSearch:this.handleSearch})),i.a.createElement("div",{className:"col-sm-12"},i.a.createElement(n.a,{columns:c,content:this.state.content,loading:this.state.loading,total:this.state.total,page:this.state.page,manual:this.state.manual,size:this.state.size,options:["5","10","20","50","100"],fetchData:this.fetchData})),i.a.createElement("div",{style:{float:"right"}},i.a.createElement(v.a,{position:"rightSide",className:"zocial Excel",style:{fontSize:"x-small"},label:"Excel'e Aktar",title:"Departman Listesi",disabled:this.state.excelIsDownloading,onClick:this.downloadMedia}))))),this.state.alert,this.renderCreateUpdate(),!this.state.displayCreateUpdateDialog&&i.a.createElement(d.a,{ref:this.notify}),this.renderBulkInsert())}}t.default=K}}]);